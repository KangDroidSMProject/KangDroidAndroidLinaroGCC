2016-05-12  Yvan Roux  <yvan.roux@linaro.org>

	Make Linaro GCC Snapshot 5.3-2016.05.

	gcc/
	* LINARO-VERSION: Update.

2016-05-11  Yvan Roux  <yvan.roux@linaro.org>

	Merge branches/gcc-5-branch rev 236108.

2016-05-11  Michael Collison  <michael.collison@linaro.org>

	gcc/testsuite/
	Backport from trunk r232600.
	2016-01-20  Andre Vieira  <andre.simoesdiasvieira@arm.com>

	* gcc.target/arm/memset-inline-10.c: Added
	dg-require-effective-target arm_thumb2_ok.

2016-05-11  Christophe Lyon  <christophe.lyon@linaro.org>

	gcc/
	Backport from trunk r234685.
	2016-03-31  Evandro Menezes  <e.menezes@samsung.com>

	Fix the predicate "aarch64_simd_reg_or_zero" to correctly validate
	the "Y" constraint (scalar FP 0.0 immediate).

	* gcc/config/aarch64/predicates.md (aarch64_simd_reg_or_zero):
	Add the "const_double" to the list of operand constraints.

2016-05-11  Christophe Lyon  <christophe.lyon@linaro.org>

	gcc/
	Backport from trunk r234422.
	2016-03-23  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config/arm/arm1020e.md (1020call_op): Reduce reservation
	duration.
	(v10_fdivs): Likewise.
	(v10_fdivd): Likewise.

2016-05-11  Christophe Lyon  <christophe.lyon@linaro.org>

	gcc/testsuite/
	Backport from trunk r233667.
	2016-02-24  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* gcc.target/arm/cond_sub_restrict_it.c: New test.
	* gcc.target/arm/condarith_restrict_it.c: Likewise.
	* gcc.target/arm/movcond_restrict_it.c: Likewise.
	* gcc.target/arm/negscc_restrict_it.c: Likewise.

2016-05-11  Christophe Lyon  <christophe.lyon@linaro.org>

	gcc/testsuite/
	Backport from trunk r235372.
	2016-04-22  Christophe Lyon  <christophe.lyon@linaro.org>

	* lib/gcc-dg.exp (${tool}_load): Add default return value handler.

2016-05-11  Christophe Lyon  <christophe.lyon@linaro.org>

	gcc/
	Backport from trunk r235132.
	2016-04-18  Matthew Wahab  <matthew.wahab@arm.com>

	PR target/70711
	* config/arm/bpabi.h (BE8_LINK_SPEC): Add entries for armv8+crc,
	armv8.1-a and armv8.1-a+crc.

2016-04-25  Christophe Lyon  <christophe.lyon@linaro.org>

	gcc/
	Backport from trunk r234116.
	2016-03-10  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* common/config/aarch64/aarch64-common.c (aarch64_handle_option):
	Set x_flag_omit_leaf_frame_pointer when handling
	-momit-leaf-frame-pointer.

	gcc/
	Backport from trunk r234118.
	2016-03-10  Nick Clifton  <nickc@redhat.com>

	PR target/7044
	* config/aarch64/aarch64.c
	(aarch64_override_options_after_change_1): When forcing
	flag_omit_frame_pointer to be true, use a special value that can
	be detected if this function is called again, thus preventing
	flag_omit_leaf_frame_pointer from being forced to be false.

	gcc/testsuite/
	Backport from trunk r234118.
	2016-03-10  Nick Clifton  <nickc@redhat.com>

	PR target/70044
	* gcc.target/aarch64/pr70044.c: New test.

2016-04-14  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	* LINARO-VERSION: Bump version number, post snapshot.

2016-04-14  Yvan Roux  <yvan.roux@linaro.org>

	Make Linaro GCC Snapshot 5.3-2016.04.

	gcc/
	* LINARO-VERSION: Update.

2016-04-14  Yvan Roux  <yvan.roux@linaro.org>

	Merge branches/gcc-5-branch rev 234898.

2016-04-12  Christophe Lyon  <christophe.lyon@linaro.org>

	gcc/
	Backport from trunk r233342.
	2016-02-11  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config/aarch64/aarch64.c (aarch64_last_printed_arch_string):
	New variable.
	(aarch64_last_printed_tune_string): Likewise.
	(aarch64_declare_function_name): Only output .arch assembler
	directive if it will be different from the previously output
	directive.  Same for .tune comment but only if -dA is set.
	(aarch64_start_file): New function.
	(TARGET_ASM_FILE_START): Define.

	gcc/testsuite/
	Backport from trunk r233342.
	2016-02-11  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* gcc.target/aarch64/target_attr_15.c: Scan assembly for
	.arch armv8-a\n.  Add -dA to dg-options.
	* gcc.target/aarch64/assembler_arch_1.c: New test.
	* gcc.target/aarch64/target_attr_7.c: Add -dA to dg-options.

	gcc/testsuite/
	Backport from trunk r233559.
	2016-02-19  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* lib/target-supports.exp: Define aarch64_asm_FUNC_ok checks
	for fp, simd, crypto, crc, lse.
	* doc/sourcebuild.texi (AArch64-specific attributes): Document the
	above.
	* gcc.target/aarch64/assembler_arch_1.c: Add aarch64_asm_lse_ok
	effective target check.

	gcc/
	Backport from trunk r234875.
	2016-04-11  James Greenhalgh  <james.greenhalgh@arm.com>

	* config/aarch64/aarch64.h (AARCH64_FL_FOR_ARCH8_1): Also add
	AARCH64_FL_CRC.

	gcc/
	Backport from trunk r234876.
	2016-04-11  James Greenhalgh  <james.greenhalgh@arm.com>

	PR target/70133
	* config/aarch64/aarch64-common.c (aarch64_option_extension): Keep
	track of a canonical flag name.
	(all_extensions): Likewise.
	(arch_to_arch_name): Also track extension flags enabled by the arch.
	(all_architectures): Likewise.
	(aarch64_parse_extension): Move to here.
	(aarch64_get_extension_string_for_isa_flags): Take a new argument,
	rework.
	(aarch64_rewrite_selected_cpu): Update for above change.
	* config/aarch64/aarch64-option-extensions.def: Rework the way flags
	are handled, such that the single explicit value enabled by an
	extension is kept seperate from the implicit values it also enables.
	* config/aarch64/aarch64-protos.h (aarch64_parse_opt_result): Move
	to here.
	(aarch64_parse_extension): New.
	* config/aarch64/aarch64.c (aarch64_parse_opt_result): Move from
	here to config/aarch64/aarch64-protos.h.
	(aarch64_parse_extension): Move from here to
	common/config/aarch64/aarch64-common.c.
	(aarch64_option_print): Update.
	(aarch64_declare_function_name): Likewise.
	(aarch64_start_file): Likewise.
	* config/aarch64/driver-aarch64.c (arch_extension): Keep track of
	the canonical flag for extensions.
	* config.gcc (aarch64*-*-*): Extend regex for capturing extension
	flags.

	gcc/testsuite/
	Backport from trunk r234876.
	2016-04-11  James Greenhalgh  <james.greenhalgh@arm.com>

	PR target/70133
	* gcc.target/aarch64/mgeneral-regs_4.c: Fix expected output.
	* gcc.target/aarch64/target_attr_15.c: Likewise.

	gcc/
	Backport from trunk r234877.
	2016-04-11  James Greenhalgh  <james.greenhalgh@arm.com>

	PR target/70133
	* config/aarch64/driver-aarch64.c
	(aarch64_get_extension_string_for_isa_flags): New.
	(arch_extension): Rename to...
	(aarch64_arch_extension): ...This.
	(ext_to_feat_string): Rename to...
	(aarch64_extensions): ...This.
	(aarch64_core_data): Keep track of architecture extension flags.
	(cpu_data): Rename to...
	(aarch64_cpu_data): ...This.
	(aarch64_arch_driver_info): Keep track of architecture extension
	flags.
	(get_arch_name_from_id): Rename to...
	(get_arch_from_id): ...This, change return type.
	(host_detect_local_cpu): Update and reformat for renames, handle
	extensions through common infrastructure.

2016-04-11  Christophe Lyon  <christophe.lyon@linaro.org>

	gcc/
	Backport from trunk r233941.
	2016-03-03  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	PR rtl-optimization/69904
	* config/arm/arm.c (arm_cannot_copy_insn_p):
	Return true for load-exclusive instructions.

	gcc/testsuite/
	Backport from trunk r233941.
	2016-03-03  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	PR rtl-optimization/69904
	* gcc.target/arm/pr69904.c: New test.

2016-04-11  Christophe Lyon  <christophe.lyon@linaro.org>

	gcc/
	Backport from trunk r229412.
	2015-10-27  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config/aarch64/aarch64-protos.h
	(struct tune_params): Add autoprefetcher_model field.
	* config/aarch64/aarch64.c: Include params.h
	(generic_tunings): Specify autoprefetcher_model value.
	(cortexa53_tunings): Likewise.
	(cortexa57_tunings): Likewise.
	(cortexa72_tunings): Likewise.
	(thunderx_tunings): Likewise.
	(xgene1_tunings): Likewise.
	(aarch64_first_cycle_multipass_dfa_lookahead_guard): New function.
	(TARGET_SCHED_FIRST_CYCLE_MULTIPASS_DFA_LOOKAHEAD_GUARD): Define.
	(aarch64_override_options_internal): Set
	PARAM_SCHED_AUTOPREF_QUEUE_DEPTH param.

	gcc/
	Backport from trunk r230261.
	2015-11-12  Evandro Menezes  <e.menezes@samsung.com>

	* config/aarch64/aarch64-protos.h (tune_params): Add new members
	"max_case_values" and "cache_line_size".
	* config/aarch64/aarch64.c (aarch64_case_values_threshold): New
	function.
	(aarch64_override_options_internal): Tune heuristics based on new
	members in "tune_params".
	(TARGET_CASE_VALUES_THRESHOLD): Define macro.

	gcc/
	Backport from trunk r230431.
	2015-11-16  James Greenhalgh  <james.greenhalgh@arm.com>

	* config/arm/arm-cores.def (cortex-a35): New.
	* config/arm/arm.c (arm_cortex_a35_tune): New.
	* config/arm/arm-tables.opt: Regenerate.
	* config/arm/arm-tune.md: Regenerate.
	* config/arm/bpabi.h (BE8_LINK_SPEC): Add cortex-a35.
	* config/arm/t-aprofile: Likewise.
	* doc/invoke.texi (-mcpu): Likewise.

	gcc/
	Backport from trunk r230458.
	2015-11-17  James Greenhalgh  <james.greenhalgh@arm.com>

	* config/aarch64/aarch64-cores.def (cortex-a35): New.
	* config/aarch64/aarch64.c (cortexa35_tunings): New.
	* config/aarch64/aarch64-tune.md: Regenerate.
	* doc/invoke.texi (-mcpu): Add Cortex-A35

	gcc/
	Backport from trunk r233659.
	2016-02-24  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config/arm/arm-cores.def (cortex-a32): New entry.
	* config/arm/arm-tables.opt: Regenerate.
	* config/arm/arm-tune.md: Regenerate.
	* config/arm/bpabi.h (BE8_LINK_SPEC): Add mcpu=cortex-a32.
	* config/arm/t-aprofile: Handle mcpu=cortex-a32.
	* doc/invoke.texi (ARM Options): Document cortex-a32 as value
	for -mcpu and -mtune.

	gcc/
	Backport from trunk r234040.
	2016-03-07  Andre Vieira  <andre.simoesdiasvieira@arm.com>

	* config/arm/arm-cores.def (cortex-r8): New.
	* config/arm/arm-tables.opt (cortex-r8): Regenerate.
	* config/arm/arm-tune.md: Likewise.
	* gcc/doc/invoke.texi: Add cortex-r8 to list of cpu values.

	gcc/testsuite/
	Backport from trunk r234041.
	2016-03-07  Andre Vieira  <andre.simoesdiasvieira@arm.com>

	* gcc.target/arm/pr45701-1.c: Change assembler scan to not
	trigger for cortex-r8, when scanning for register r8.
	* gcc.target/arm/pr45701-2.c: Likewise.

	gcc/testsuite/
	Backport from trunk r234109.
	2016-03-10 Andre Vieira <andre.simoesdiasvieira@arm.com>

	* gcc.target/arm/pr45701-1.c: Escape brackets.
	* gcc.target/arm/pr45701-2.c: Likewise.

2016-04-11  Christophe Lyon  <christophe.lyon@linaro.org>

	gcc/
	Backport from trunk r232789.
	2016-01-25  Bilyan Borisov  <bilyan.borisov@arm.com>

	* config/aarch64/arm_neon.h (vcvt_s64_f64): New intrinsic.
	(vcvt_u64_f64): Likewise.
	(vcvta_s64_f64): Likewise.
	(vcvta_u64_f64): Likewise.
	(vcvtm_s64_f64): Likewise.
	(vcvtm_u64_f64): Likewise.
	(vcvtn_s64_f64): Likewise.
	(vcvtn_u64_f64): Likewise.
	(vcvtp_s64_f64): Likewise.
	(vcvtp_u64_f64): Likewise.

	gcc/testsuite/
	Backport from trunk r232789.
	2016-01-25  Bilyan Borisov  <bilyan.borisov@arm.com>

	* gcc.target/aarch64/simd/vcvt_s64_f64_1.c: New.
	* gcc.target/aarch64/simd/vcvt_u64_f64_1.c: Likewise.
	* gcc.target/aarch64/simd/vcvta_s64_f64_1.c: Likewise.
	* gcc.target/aarch64/simd/vcvta_u64_f64_1.c: Likewise.
	* gcc.target/aarch64/simd/vcvtm_s64_f64_1.c: Likewise.
	* gcc.target/aarch64/simd/vcvtm_u64_f64_1.c: Likewise.
	* gcc.target/aarch64/simd/vcvtn_s64_f64_1.c: Likewise.
	* gcc.target/aarch64/simd/vcvtn_u64_f64_1.c: Likewise.
	* gcc.target/aarch64/simd/vcvtp_s64_f64_1.c: Likewise.
	* gcc.target/aarch64/simd/vcvtp_u64_f64_1.c: Likewise.

2016-04-11  Christophe Lyon  <christophe.lyon@linaro.org>

	gcc/
	Backport from trunk r234825.
	2016-04-08  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	PR target/70566
	* config/arm/thumb2.md (tst + branch-> lsls + branch
	peephole below *orsi_not_shiftsi_si): Require that condition
	register is dead after the peephole.
	(second peephole after the above): Likewise.

	gcc/testsuite/
	Backport from trunk r234825.
	2016-04-08  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	PR target/70566
	* gcc.c-torture/execute/pr70566.c: New test.

2016-04-11  Christophe Lyon  <christophe.lyon@linaro.org>

	gcc/
	Backport from trunk r234568.
	2016-03-30  Nick Clifton  <nickc@redhat.com>

	PR target/62254
	* config/arm/arm.c (arm_reload_out_hi): Add code to handle the
	case where we are already provided with an SImode SUBREG.

2016-04-11  Christophe Lyon  <christophe.lyon@linaro.org>

	gcc/
	Backport from trunk r234453.
	2016-03-24  Richard Biener  <rguenther@suse.de>

	PR middle-end/70370
	* gimplify.c (gimplify_asm_expr): Handle !allows_mem outputs
	with register bases.

	gcc/testsuite/
	Backport from trunk r234453.
	2016-03-24  Richard Biener  <rguenther@suse.de>

	PR middle-end/70370
	* gcc.dg/torture/pr70370.c: New testcase.

2016-04-11  Christophe Lyon  <christophe.lyon@linaro.org>

	gcc/testsuite/
	Backport from trunk r234330.
	2016-03-18  Christophe Lyon  <christophe.lyon@linaro.org>

	PR target/70113
	* gcc.target/aarch64/pr63304_1.c: Add -mno-fix-cortex-a53-843419.

2016-04-11  Christophe Lyon  <christophe.lyon@linaro.org>

	gcc/
	Backport from trunk r234162.
	2016-03-12  Vladimir Makarov  <vmakarov@redhat.com>

	PR target/69614
	* lra-constraints.c (delete_move_and_clobber): New.
	(remove_inheritance_pseudos): Use it.

	gcc/testsuite/
	Backport from trunk r234162.
	2016-03-12  Vladimir Makarov  <vmakarov@redhat.com>

	PR target/69614
	* gcc.target/arm/pr69614.c: New.

2016-04-11  Christophe Lyon  <christophe.lyon@linaro.org>

	gcc/
	Backport from trunk r234419.
	2016-03-23  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	PR driver/70132
	* config/arm/driver-arm.c (host_detect_local_cpu): Reorder exit logic
	to not call fclose twice on file.

2016-04-11  Christophe Lyon  <christophe.lyon@linaro.org>

	gcc/
	Backport from trunk r234638.
	2016-03-31  James Greenhalgh  <james.greenhalgh@arm.com>

	* config/arm/linux-elf.h (ASM_OUTPUT_DEF): Delete.

2016-04-11  Christophe Lyon  <christophe.lyon@linaro.org>

	gcc/testsuite/
	Backport from trunk r234781.
	2016-04-06  Yvan Roux  <yvan.roux@linaro.org>
	    Pedro Alves  <palves@redhat.com>

	* gcc.dg/guality/guality.h (main): Avoid GDB being blocked on signals.

2016-04-11  Christophe Lyon  <christophe.lyon@linaro.org>

	gcc/
	Backport from trunk r234675.
	2016-04-01  Ramana Radhakrishnan  <ramana.radhakrishnan@arm.com>

	PR target/70496
	* config/arm/arm.h (ASM_APP_OFF): Handle TARGET_ARM
	and TARGET_THUMB.

	gcc/testsuite/
	Backport from trunk r234675.
	2016-04-01  Ramana Radhakrishnan  <ramana.radhakrishnan@arm.com>

	PR target/70496
	* gcc.target/arm/pr70496.c: New test.

	gcc/testsuite/
	Backport from trunk r234811.
	2016-04-07  Thomas Preud'homme  <thomas.preudhomme@arm.com>

	PR testsuite/70553
	* gcc.target/arm/pr70496.c: Also require arm_arm_ok effective target.

2016-04-07  Christophe Lyon  <christophe.lyon@linaro.org>

	gcc/
	Backport from trunk r234792.
	2016-04-06  Vladimir Makarov  <vmakarov@redhat.com>

	PR rtl-optimization/70398
	* lra-constraints.c (process_address_1): Check zero scale and code
	for reloading with zero scale.

	gcc/testsuite/
	Backport from trunk r234792.
	2016-04-06  Vladimir Makarov  <vmakarov@redhat.com>

	PR rtl-optimization/70398
	* testsuite/gcc.target/aarch64/pr70398.c: New.

2016-03-31  Backport Tool  <christophe.lyon@linaro.org>

	gcc/
	Backport from trunk r232817.
	2016-01-26  Richard Sandiford  <richard.sandiford@arm.com>

	PR tree-optimization/69400
	* wide-int.cc (wi_pack): Take the precision as argument and
	perform canonicalization here rather than in the callers.
	Use the main loop to handle all full-width HWIs.  Add a
	zero HWI if in_len isn't a full result.
	(wi::divmod_internal): Update accordingly.
	(wi::mul_internal): Likewise.  Simplify.

	gcc/testsuite/
	Backport from trunk r232817.
	2016-01-26  Richard Sandiford  <richard.sandiford@arm.com>

	PR tree-optimization/69400
	* gcc.dg/plugin/wide-int_plugin.c (test_wide_int_mod_trunc): New
	function.
	(plugin_init): Call it.
	* gcc.dg/torture/pr69400.c: New test.

2016-03-17  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	* LINARO-VERSION: Bump version number, post snapshot.

2016-03-17  Yvan Roux  <yvan.roux@linaro.org>

	Make Linaro GCC Snapshot 5.3-2016.03.

	gcc/
	* LINARO-VERSION: Update.

2016-03-15  Yvan Roux  <yvan.roux@linaro.org>

	Merge branches/gcc-5-branch rev 234210.

2016-03-15  Christophe Lyon  <christophe.lyon@linaro.org>

	gcc/
	Backport from trunk r234108.
	2016-03-10  Christophe Lyon  <christophe.lyon@linaro.org>

	PR target/70113.
	* config/aarch64/aarch64.h (TARGET_FIX_ERR_A53_843419_DEFAULT):
	Always define to 0 or 1.
	(TARGET_FIX_ERR_A53_843419): New macro.
	* config/aarch64/aarch64-elf-raw.h
	(TARGET_FIX_ERR_A53_843419_DEFAULT): Update for above changes.
	* config/aarch64/aarch64-linux.h: Likewise.
	* config/aarch64/aarch64.c
	(aarch64_override_options_after_change_1): Do not default
	aarch64_nopcrelative_literal_loads to true if Cortex-A53 erratum
	843419 is on.
	(aarch64_attributes): Handle fix-cortex-a53-843419.
	(aarch64_can_inline_p): Likewise.
	* config/aarch64/aarch64.opt (aarch64_fix_a53_err843419): Save.

2016-03-15  Christophe Lyon  <christophe.lyon@linaro.org>

	gcc/
	Backport from trunk r233611.
	2016-02-22  Jakub Jelinek  <jakub@redhat.com>

	PR target/69894
	PR target/69895
	* config/m68k/t-opts (OPTIONS_H_EXTRA): Add m68k-microarchs.def
	and m68k-devices.def.
	* config/c6x/t-c6x (OPTIONS_H_EXTRA): Add c6x-isas.def.
	* config/aarch64/t-aarch64 (OPTIONS_H_EXTRA): Add aarch64-arches.def.

	gcc/
	Backport from trunk r234105.
	2016-03-10  Christophe Lyon  <christophe.lyon@linaro.org>

	* config/aarch64/t-aarch64 (OPTIONS_H_EXTRA): Add
	aarch64-fusion-pairs.def and aarch64-tuning-flags.def

2016-03-15  Christophe Lyon  <christophe.lyon@linaro.org>

	gcc/testsuite/
	Backport from trunk r233899.
	2016-03-02  Maxim Kuvyrkov  <maxim.kuvyrkov@linaro.org>

	* c-c++-common/asan/swapcontext-test-1.c,
	* c-c++-common/tsan/thread_leak.c,
	* g++.dg/tsan/aligned_vs_unaligned_race.C,
	* g++.dg/tsan/benign_race.C,
	* g++.dg/tsan/fd_close_norace.C,
	* g++.dg/tsan/fd_close_norace2.C: Print markers to stderr to avoid
	races with sanitizer output

2016-03-14  Christophe Lyon  <christophe.lyon@linaro.org>

	gcc/
	Backport from trunk r233266.
	2016-02-10  Wilco Dijkstra  <wdijkstr@arm.com>

	* config/arm/arm.c (arm_cortex_a53_tune): Enable AES fusion.
	(arm_cortex_a57_tune): Likewise.
	(aarch_macro_fusion_pair_p): Add support for AES fusion.
	* config/arm/arm-protos.h (fuse_ops): Add FUSE_AES_AESMC.

2016-03-14  Christophe Lyon  <christophe.lyon@linaro.org>

	gcc/
	Backport from trunk r233518.
	2016-02-18  Nick Clifton  <nickc@redhat.com>

	PR target/62254
	PR target/69610
	* config/arm/arm.c (arm_option_override_internal): Disable
	interworking if the target does not support thumb instructions.
	(arm_reload_in_hi): Handle the case where a register to register
	move needs reloading because there is no simple pattern to handle
	it.
	(arm_reload_out_hi): Likewise.

	gcc/testsuite/
	Backport from trunk r233518.
	2016-02-18  Nick Clifton  <nickc@redhat.com>

	PR target/62254
	PR target/69610
	* gcc.target/arm/pr62554.c: New test.
	* gcc.target/arm/pr69610-1.c: New test.
	* gcc.target/arm/pr69610-2.c: New test.

2016-03-14  Christophe Lyon  <christophe.lyon@linaro.org>

	gcc/
	Backport from trunk r233495.
	2016-02-17  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	PR target/69161
	* config/arm/predicates.md (arm_comparison_operator_mode):
	New predicate.
	* config/arm/arm.md (*mov_scc): Use arm_comparison_operator_mode
	instead of arm_comparison_operator.
	(*mov_negscc): Likewise.
	(*mov_notscc): Likewise.
	* config/arm/thumb2.md (*thumb2_mov_scc): Likewise.
	(*thumb2_mov_negscc): Likewise.
	(*thumb2_mov_negscc_strict_it): Likewise.
	(*thumb2_mov_notscc): Likewise.
	(*thumb2_mov_notscc_strict_it): Likewise.

2016-03-14  Christophe Lyon  <christophe.lyon@linaro.org>

	gcc/
	Backport from trunk r233490.
	2016-02-17  Wilco Dijkstra  <wdijkstr@arm.com>

	* config/aarch64/aarch64.c (aarch64_internal_mov_immediate):
	Add missing return.

2016-03-14  Christophe Lyon  <christophe.lyon@linaro.org>

	gcc/
	Backport from trunk r233461.
	    Ramana Radhakrishnan  <ramana.radhakrishnan@arm.com>

	* config/aarch64/aarch64.c (aarch64_expand_vector_init): Refactor,
	always use lane loads to construct non-constant vectors.

	2016-02-16  James Greenhalgh  <james.greenhalgh@arm.com>
	gcc/testsuite/
	Backport from trunk r233461.
	2016-02-16  James Greenhalgh  <james.greenhalgh@arm.com>
	    Ramana Radhakrishnan  <ramana.radhakrishnan@arm.com>

	* gcc.target/aarch64/vector_initialization_nostack.c: New.

2016-03-14  Christophe Lyon  <christophe.lyon@linaro.org>

	gcc/
	Backport from trunk r233460.
	2016-02-16  James Greenhalgh  <james.greenhalgh@arm.com>

	* config/aarch64/aarch64.md
	(arch64_sqrdml<SQRDMLH_AS:rdma_as>h_lane<mode>): Fix register
	constraints for	operand 3.
	(aarch64_sqrdml<SQRDMLH_AS:rdma_as>h_laneq<mode>): Likewise.

2016-03-14  Christophe Lyon  <christophe.lyon@linaro.org>

	gcc/testsuite/
	Backport from trunk r233426.
	2016-02-15  Prathamesh Kulkarni  <prathamesh.kulkarni@linaro.org>

	* lib/target-supports.exp (check_effective_target_section_anchors): Add
	check for aarch64*-*-*.

2016-03-14  Christophe Lyon  <christophe.lyon@linaro.org>

	gcc/
	Backport from trunk r233268.
	2016-02-10  Wilco Dijkstra  <wdijkstr@arm.com>

	* config/aarch64/aarch64.c (cortexa53_tunings): Enable AES fusion.
	(cortexa57_tunings): Likewise.
	(cortexa72_tunings): Likewise.
	(arch_macro_fusion_pair_p): Add support for AES fusion.
	* config/aarch64/aarch64-fusion-pairs.def: Add AES_AESMC entry.
	* config/arm/aarch-common.c (aarch_crypto_can_dual_issue):
	Allow virtual registers before reload so early scheduling works.
	* config/arm/cortex-a57.md (cortex_a57_crypto_simple): Use
	correct latency and pipeline.
	(cortex_a57_crypto_complex): Likewise.
	(cortex_a57_crypto_xor): Likewise.
	(define_bypass): Add AES bypass.

2016-02-17  Christophe Lyon  <christophe.lyon@linaro.org>

	gcc/
	Backport from trunk r232818.
	2016-01-26  Roger Ferrer Ibáñez  <rofirrim@gmail.com>

	PR target/67896
	* config/aarch64/aarch64-builtins.c
	(aarch64_init_simd_builtin_types): Do not set structural
	equality to __Poly{8,16,64,128}_t types.

	gcc/testsuite/
	Backport from trunk r232818.
	2016-01-26  Roger Ferrer Ibáñez  <rofirrim@gmail.com>

	PR target/67896
	* gcc.target/aarch64/simd/pr67896.C: New.

2016-02-11  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	* LINARO-VERSION: Bump version number, post snapshot.

2016-02-11  Yvan Roux  <yvan.roux@linaro.org>

	Make Linaro GCC Snapshot 5.3-2016.02.

	gcc/
	* LINARO-VERSION: Update.

2016-02-09  Yvan Roux  <yvan.roux@linaro.org>

	Merge branches/gcc-5-branch rev 233233.

2016-02-09  Auto Backport Engine  <christophe.lyon@linaro.org>

	gcc/
	Backport from trunk r233146.
	2016-02-04  David Malcolm  <dmalcolm@redhat.com>

	* config/aarch64/cortex-a57-fma-steering.c
	(aarch64_register_fma_steering): Remove "static" from arguments
	to register_pass.

2016-02-09  Auto Backport Engine  <christophe.lyon@linaro.org>

	gcc/
	Backport from trunk r233142.
	2016-02-04  Alan Lawrence  <alan.lawrence@arm.com>

	* config/arm/arm-protos.h (neon_reinterpret): Remove.
	* config/arm/arm.c (neon_reinterpret): Remove.
	* config/arm/arm_neon_builtins.def (vreinterpretv8qi, vreinterpretv4hi,
	vreinterpretv2si, vreinterpretv2sf, vreinterpretdi, vreinterpretv16qi,
	vreinterpretv8hi, vreinterpretv4si, vreinterpretv4sf, vreinterpretv2di,
	vreinterpretti): Remove.
	* config/arm/neon.md (neon_vreinterpretv8qi<mode>,
	neon_vreinterpretv4hi<mode>, neon_vreinterpretv2si<mode>,
	neon_vreinterpretv2sf<mode>, neon_vreinterpretdi<mode>,
	neon_vreinterpretti<mode>, neon_vreinterpretv16qi<mode>,
	neon_vreinterpretv8hi<mode>, neon_vreinterpretv4si<mode>,
	neon_vreinterpretv4sf<mode>, neon_vreinterpretv2di<mode>): Remove.
	* config/arm/arm_neon.h (vreinterpret_p8_p16, vreinterpret_p8_f32,
	vreinterpret_p8_p64, vreinterpret_p8_s64, vreinterpret_p8_u64,
	vreinterpret_p8_s8, vreinterpret_p8_s16, vreinterpret_p8_s32,
	vreinterpret_p8_u8, vreinterpret_p8_u16, vreinterpret_p8_u32,
	vreinterpret_p16_p8, vreinterpret_p16_f32, vreinterpret_p16_p64,
	vreinterpret_p16_s64, vreinterpret_p16_u64, vreinterpret_p16_s8,
	vreinterpret_p16_s16, vreinterpret_p16_s32, vreinterpret_p16_u8,
	vreinterpret_p16_u16, vreinterpret_p16_u32, vreinterpret_f32_p8,
	vreinterpret_f32_p16, vreinterpret_f32_p64, vreinterpret_f32_s64,
	vreinterpret_f32_u64, vreinterpret_f32_s8, vreinterpret_f32_s16,
	vreinterpret_f32_s32, vreinterpret_f32_u8, vreinterpret_f32_u16,
	vreinterpret_f32_u32, vreinterpret_p64_p8, vreinterpret_p64_p16,
	vreinterpret_p64_f32, vreinterpret_p64_s64, vreinterpret_p64_u64,
	vreinterpret_p64_s8, vreinterpret_p64_s16, vreinterpret_p64_s32,
	vreinterpret_p64_u8, vreinterpret_p64_u16, vreinterpret_p64_u32,
	vreinterpret_s64_p8, vreinterpret_s64_p16, vreinterpret_s64_f32,
	vreinterpret_s64_p64, vreinterpret_s64_u64, vreinterpret_s64_s8,
	vreinterpret_s64_s16, vreinterpret_s64_s32, vreinterpret_s64_u8,
	vreinterpret_s64_u16, vreinterpret_s64_u32, vreinterpret_u64_p8,
	vreinterpret_u64_p16, vreinterpret_u64_f32, vreinterpret_u64_p64,
	vreinterpret_u64_s64, vreinterpret_u64_s8, vreinterpret_u64_s16,
	vreinterpret_u64_s32, vreinterpret_u64_u8, vreinterpret_u64_u16,
	vreinterpret_u64_u32, vreinterpret_s8_p8, vreinterpret_s8_p16,
	vreinterpret_s8_f32, vreinterpret_s8_p64, vreinterpret_s8_s64,
	vreinterpret_s8_u64, vreinterpret_s8_s16, vreinterpret_s8_s32,
	vreinterpret_s8_u8, vreinterpret_s8_u16, vreinterpret_s8_u32,
	vreinterpret_s16_p8, vreinterpret_s16_p16, vreinterpret_s16_f32,
	vreinterpret_s16_p64, vreinterpret_s16_s64, vreinterpret_s16_u64,
	vreinterpret_s16_s8, vreinterpret_s16_s32, vreinterpret_s16_u8,
	vreinterpret_s16_u16, vreinterpret_s16_u32, vreinterpret_s32_p8,
	vreinterpret_s32_p16, vreinterpret_s32_f32, vreinterpret_s32_p64,
	vreinterpret_s32_s64, vreinterpret_s32_u64, vreinterpret_s32_s8,
	vreinterpret_s32_s16, vreinterpret_s32_u8, vreinterpret_s32_u16,
	vreinterpret_s32_u32, vreinterpret_u8_p8, vreinterpret_u8_p16,
	vreinterpret_u8_f32, vreinterpret_u8_p64, vreinterpret_u8_s64,
	vreinterpret_u8_u64, vreinterpret_u8_s8, vreinterpret_u8_s16,
	vreinterpret_u8_s32, vreinterpret_u8_u16, vreinterpret_u8_u32,
	vreinterpret_u16_p8, vreinterpret_u16_p16, vreinterpret_u16_f32,
	vreinterpret_u16_p64, vreinterpret_u16_s64, vreinterpret_u16_u64,
	vreinterpret_u16_s8, vreinterpret_u16_s16, vreinterpret_u16_s32,
	vreinterpret_u16_u8, vreinterpret_u16_u32, vreinterpret_u32_p8,
	vreinterpret_u32_p16, vreinterpret_u32_f32, vreinterpret_u32_p64,
	vreinterpret_u32_s64, vreinterpret_u32_u64, vreinterpret_u32_s8,
	vreinterpret_u32_s16, vreinterpret_u32_s32, vreinterpret_u32_u8,
	vreinterpret_u32_u16, vreinterpretq_p8_p16, vreinterpretq_p8_f32,
	vreinterpretq_p8_p64, vreinterpretq_p8_p128, vreinterpretq_p8_s64,
	vreinterpretq_p8_u64, vreinterpretq_p8_s8, vreinterpretq_p8_s16,
	vreinterpretq_p8_s32, vreinterpretq_p8_u8, vreinterpretq_p8_u16,
	vreinterpretq_p8_u32, vreinterpretq_p16_p8, vreinterpretq_p16_f32,
	vreinterpretq_p16_p64, vreinterpretq_p16_p128, vreinterpretq_p16_s64,
	vreinterpretq_p16_u64, vreinterpretq_p16_s8, vreinterpretq_p16_s16,
	vreinterpretq_p16_s32, vreinterpretq_p16_u8, vreinterpretq_p16_u16,
	vreinterpretq_p16_u32, vreinterpretq_f32_p8, vreinterpretq_f32_p16,
	vreinterpretq_f32_p64, vreinterpretq_f32_p128, vreinterpretq_f32_s64,
	vreinterpretq_f32_u64, vreinterpretq_f32_s8, vreinterpretq_f32_s16,
	vreinterpretq_f32_s32, vreinterpretq_f32_u8, vreinterpretq_f32_u16,
	vreinterpretq_f32_u32, vreinterpretq_p64_p8, vreinterpretq_p64_p16,
	vreinterpretq_p64_f32, vreinterpretq_p64_p128, vreinterpretq_p64_s64,
	vreinterpretq_p64_u64, vreinterpretq_p64_s8, vreinterpretq_p64_s16,
	vreinterpretq_p64_s32, vreinterpretq_p64_u8, vreinterpretq_p64_u16,
	vreinterpretq_p64_u32, vreinterpretq_p128_p8, vreinterpretq_p128_p16,
	vreinterpretq_p128_f32, vreinterpretq_p128_p64, vreinterpretq_p128_s64,
	vreinterpretq_p128_u64, vreinterpretq_p128_s8, vreinterpretq_p128_s16,
	vreinterpretq_p128_s32, vreinterpretq_p128_u8, vreinterpretq_p128_u16,
	vreinterpretq_p128_u32, vreinterpretq_s64_p8, vreinterpretq_s64_p16,
	vreinterpretq_s64_f32, vreinterpretq_s64_p64, vreinterpretq_s64_p128,
	vreinterpretq_s64_u64, vreinterpretq_s64_s8, vreinterpretq_s64_s16,
	vreinterpretq_s64_s32, vreinterpretq_s64_u8, vreinterpretq_s64_u16,
	vreinterpretq_s64_u32, vreinterpretq_u64_p8, vreinterpretq_u64_p16,
	vreinterpretq_u64_f32, vreinterpretq_u64_p64, vreinterpretq_u64_p128,
	vreinterpretq_u64_s64, vreinterpretq_u64_s8, vreinterpretq_u64_s16,
	vreinterpretq_u64_s32, vreinterpretq_u64_u8, vreinterpretq_u64_u16,
	vreinterpretq_u64_u32, vreinterpretq_s8_p8, vreinterpretq_s8_p16,
	vreinterpretq_s8_f32, vreinterpretq_s8_p64, vreinterpretq_s8_p128,
	vreinterpretq_s8_s64, vreinterpretq_s8_u64, vreinterpretq_s8_s16,
	vreinterpretq_s8_s32, vreinterpretq_s8_u8, vreinterpretq_s8_u16,
	vreinterpretq_s8_u32, vreinterpretq_s16_p8, vreinterpretq_s16_p16,
	vreinterpretq_s16_f32, vreinterpretq_s16_p64, vreinterpretq_s16_p128,
	vreinterpretq_s16_s64, vreinterpretq_s16_u64, vreinterpretq_s16_s8,
	vreinterpretq_s16_s32, vreinterpretq_s16_u8, vreinterpretq_s16_u16,
	vreinterpretq_s16_u32, vreinterpretq_s32_p8, vreinterpretq_s32_p16,
	vreinterpretq_s32_f16, vreinterpretq_s32_f32, vreinterpretq_s32_p64,
	vreinterpretq_s32_p128, vreinterpretq_s32_s64, vreinterpretq_s32_u64,
	vreinterpretq_s32_s8, vreinterpretq_s32_s16, vreinterpretq_s32_u8,
	vreinterpretq_s32_u16, vreinterpretq_s32_u32, vreinterpretq_u8_p8,
	vreinterpretq_u8_p16, vreinterpretq_u8_f32, vreinterpretq_u8_p64,
	vreinterpretq_u8_p128, vreinterpretq_u8_s64, vreinterpretq_u8_u64,
	vreinterpretq_u8_s8, vreinterpretq_u8_s16, vreinterpretq_u8_s32,
	vreinterpretq_u8_u16, vreinterpretq_u8_u32, vreinterpretq_u16_p8,
	vreinterpretq_u16_p16, vreinterpretq_u16_f32, vreinterpretq_u16_p64,
	vreinterpretq_u16_p128, vreinterpretq_u16_s64, vreinterpretq_u16_u64,
	vreinterpretq_u16_s8, vreinterpretq_u16_s16, vreinterpretq_u16_s32,
	vreinterpretq_u16_u8, vreinterpretq_u16_u32, vreinterpretq_u32_p8,
	vreinterpretq_u32_p16, vreinterpretq_u32_f32, vreinterpretq_u32_p64,
	vreinterpretq_u32_p128, vreinterpretq_u32_s64, vreinterpretq_u32_u64,
	vreinterpretq_u32_s8, vreinterpretq_u32_s16, vreinterpretq_u32_s32,
	vreinterpretq_u32_u8, vreinterpretq_u32_u16): Rewrite using casts.

2016-02-05  Prathamesh Kulkarni  <prathamesh.kulkarni@linaro.org>

	gcc/
	Backport from trunk r232668.
	2016-01-21   Stefan Sørensen  <stefan.sorensen@spectralink.com>
	     Jakub Jelinek  <jakub@redhat.com>

	PR target/69187
	PR target/65624
	* config/arm/arm-builtins.c (arm_expand_neon_builtin): Increase
	args array size by one to avoid buffer overflow.

	gcc/testsuite/
	Backport from trunk r232668.
	PR target/69187
	PR target/65624
	* gcc.target/arm/pr69187.c: New test.

2016-02-04  Charles Baylis  <charles.baylis@linaro.org>

	gcc/
	Backport from trunk r232154.
	2016-01-08  Thomas Preud'homme  <thomas.preudhomme@arm.com>

	PR tree-optimization/67781
	* tree-ssa-math-opts.c (find_bswap_or_nop): Zero out bytes in cmpxchg
	and cmpnop in two steps: first the ones not accessed in original
	gimple expression in a endian independent way and then the ones not
	accessed in the final result in an endian-specific way.

	gcc/testsuite/
	Backport from trunk r232154.
	2016-01-08  Thomas Preud'homme  <thomas.preudhomme@arm.com>

	PR tree-optimization/67781
	* gcc.c-torture/execute/pr67781.c: New file.

2016-02-04  Backport Tool  <christophe.lyon@linaro.org>

	gcc/testsuite/
	Backport from trunk r232913.
	2016-01-28  Thomas Preud'homme  <thomas.preudhomme@arm.com>

	* g++.dg/pr67989.C: Remove ARM-specific option.
	* gcc.target/arm/pr67989.C: New file.

2016-02-04  Backport Tool  <christophe.lyon@linaro.org>

	gcc/
	Backport from trunk r232921.
	2016-01-28  Wilco Dijkstra  <wdijkstr@arm.com>

	* config/aarch64/aarch64.md (ccmp<mode>): Disassemble
	immediate as %1.
	(add<mode>3_compare0): Likewise.
	(addsi3_compare0_uxtw): Likewise.
	(add<mode>3nr_compare0): Likewise.
	(compare_neg<mode>): Likewise.
	(<optab><mode>3): Likewise.

2016-02-04  kugan.vivekanandarajah  <kuganv@linaro.org>

	gcc/
	Backport from trunk r232566.
	2016-01-19  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	PR target/69135
	* config/arm/vfp.md (l<vrint_pattern><su_optab><mode>si2): Set "conds"
	attribute to unconditional.  Remove %? from output template.

	gcc/testsuite/
	Backport from trunk r232566.
	2016-01-19  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	PR target/69135
	* gcc.target/arm/pr69135_1.c: New test.

2016-02-04  kugan.vivekanandarajah  <kuganv@linaro.org>

	gcc/
	Backport from trunk r232587.
	2016-01-20  Kugan Vivekanandarajah  <kuganv@linaro.org>

	* doc/lto.texi: Remove text that says only Gold has linker plugin
	support.

2016-02-04  Charles Baylis  <charles.baylis@linaro.org>

	gcc/
	Backport from trunk r231887.
	2015-12-21  Andrew Pinski <apinski@cavium.com>

	* config/aarch64/aarch64-option-extensions.def (LSE): Change
	FEAT_STRING to "atomics".

2016-02-03  Michael Collison  <michael.collison@linaro.org>

	gcc/
	Backport from trunk r232727.
	2016-01-22  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	PR target/69403
	* config/arm/thumb2.md (*thumb2_ior_scc_strict_it): Convert to
	define_insn_and_split.  Ensure operands[1] and operands[0] do not
	get assigned the same register.

	gcc/testsuite/
	Backport from trunk r232727.
	2016-01-22  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	PR target/69403
	* gcc.c-torture/execute/pr69403.c: New test.

2016-02-03  Michael Collison  <michael.collison@linaro.org>

	gcc/
	Backport from trunk r232493.
	2016-01-18  Thomas Preud'homme  <thomas.preudhomme@arm.com>

	* config/arm/arm.c (thumb1_reorg): Check that the comparison is
	against the constant 0.

2016-01-28  Michael Collison  <michael.collison@linaro.org>

	gcc/
	Backport from trunk r232414.
	2016-01-15  Sebastian Huber  <sebastian.huber@embedded-brains.de>

	* config/arm/t-rtems: Add cortex-m7/fpv5-d16 multilib.

2016-01-27  Charles Baylis  <charles.baylis@linaro.org>

	gcc/
	Backport from trunk r232228.
	2016-01-11  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	PR rtl-optimization/68796
	* config/aarch64/aarch64.md (*and<mode>_compare0): New pattern.
	* config/aarch64/aarch64.c (aarch64_select_cc_mode): Handle HImode
	and QImode comparisons against zero with CC_NZmode.
	* config/aarch64/iterators.md (short_mask): New mode_attr.

	gcc/testsuite/
	Backport from trunk r232228.
	2016-01-11  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	PR rtl-optimization/68796
	* gcc.target/aarch64/tst_5.c: New test.
	* gcc.target/aarch64/tst_6.c: Likewise.

2016-01-27  Christophe Lyon  <christophe.lyon@linaro.org>

	gcc/
	Backport from trunk r232441.
	2016-01-15  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config/aarch64/aarch64.c (aarch64_rtx_costs, COMPARE case):
	Handle COMPARE of ZERO_EXTRACT against zero form of TST-immediate.

2016-01-27  Prathamesh Kulkarni  <prathamesh.kulkarni@linaro.org>

	gcc/
	Backport from trunk r232444.
	2016-01-15  Jiong Wang  <jiong.wang@arm.com>

	* config/aarch64/aarch64-builtins.c (aarch64_types_unopus_qualifiers):
	New.
	(TYPES_UNOPUS): Likewise.
	* config/aarch64/aarch64-simd-builtins.def (lbtruncuv2sf): Correct
	builtin type, from UNOP to UNOPUS.
	(lbtruncuv4sf): Likewise.
	(lbtruncuv2df): Likewise.
	(lrounduv2sf): Likewise.
	(lrounduv4sf): Likewise.
	(lrounduv2df): Likewise.
	(lroundusf): Likewise.
	(lroundusf): Likewise.
	(lceiluv2sf): Likewise.
	(lceiluv4sf): Likewise.
	(lceiluv2df): Likewise.
	(lceilusf): Likewise.
	(lceiludf): Likewise.
	(lflooruv2sf): Likewise.
	(lflooruv4sf): Likewise.
	(lflooruv2df): Likewise.
	(lfloorusf): Likewise.
	(lfloorudf): Likewise.
	(lfrintnuv2sf): Likewise.
	(lfrintnuv4sf): Likewise.
	(lfrintnuv2df): Likewise.
	(lfrintnusf): Likewise.
	(lfrintnudf): Likewise.
	* config/aarch64/arm_neon.h (vcvt_u32_f32): Remove unncessary type
	conversion.
	(vcvtq_u32_f32): Likewise.
	(vcvtq_u64_f64): Likewise.
	(vcvta_u32_f32): Likewise.
	(vcvtaq_u32_f32): Likewise.
	(vcvtaq_u64_f64): Likewise.
	(vcvtm_u32_f32): Likewise.
	(vcvtmq_u32_f32): Likewise.
	(vcvtmq_u64_f64): Likewise.
	(vcvtn_u32_f32): Likwise.
	(vcvtnq_u32_f32): Likewise.
	(vcvtnq_u64_f64): Likewise.
	(vcvtp_u32_f32): Likewise.
	(vcvtpq_u32_f32): Likewise.
	(vcvtpq_u64_f64): Likewise.
	(vcvtmd_u64_f64): Likewise.
	(vcvtms_u32_f32): Likewise.
	(vcvtad_u64_f64): Likewise.
	(vcvtas_u32_f32): Likewise.
	(vcvtnd_u64_f64): Likewise.
	(vcvtns_u32_f32): Likewise.
	(vcvtpd_u64_f64): Likewise.
	(vcvtps_u32_f32): Likewise.

2016-01-27  Prathamesh Kulkarni  <prathamesh.kulkarni@linaro.org>

	gcc/
	Backport from trunk r232442.
	2016-01-15  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config/aarch64/aarch64.c (aarch64_if_then_else_costs): Handle
	CSEL of zero_extended registers.

2016-01-27  Prathamesh Kulkarni  <prathamesh.kulkarni@linaro.org>

	gcc/
	Backport from trunk r232440.
	2016-01-15  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config/aarch64/aarch64.c (aarch64_process_one_target_attr): Return
	false when argument string is not found in the attributes table
	at all.

	gcc/testsuite/
	Backport from trunk r232440.
	2016-01-15  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* gcc.target/aarch64/target_attr_17.c: New test.

2016-01-27  Kugan Vivekanandarajah  <kuganv@linaro.org>

	gcc/
	Backport from trunk r232267.
	2016-01-12  Jakub Jelinek  <jakub@redhat.com>

	PR target/69175
	* ifcvt.c (cond_exec_process_if_block): When removing the last
	insn from then_bb, remove also any possible barriers that follow it.

	gcc/testsuite/
	Backport from trunk r232267.
	2016-01-12  Jakub Jelinek  <jakub@redhat.com>

	PR target/69175
	* g++.dg/opt/pr69175.C: New test.

2016-01-22  Charles Baylis  <charles.baylis@linaro.org>

	gcc/
	Backport from trunk r231304.
	2015-12-04  James Greenhalgh  <james.greenhalgh@arm.com>

	* config/aarch64/aarch64.md (add<mode>3_pluslong): Add register
	constraints.

	gcc/testsuite/
	Backport from trunk r231304.
	2015-12-04  James Greenhalgh  <james.greenhalgh@arm.com>

	* gcc.c-torture/compile/20151204.c: New.

	gcc/
	Backport from trunk r232540.
	2016-01-18  Richard Henderson  <rth@redhat.com>

	PR target/69176
	* config/aarch64/aarch64.md (add<GPI>3): Move long immediate
	operands to pseudo only if CSE is expected.  Split long immediate
	operands only after reload, and for the stack pointer.
	(*add<GPI>3_pluslong): Remove.
	(*addsi3_aarch64, *adddi3_aarch64): Merge into...
	(*add<GPI>3_aarch64): ... here.  Add r/rk/Upl alternative.
	(*addsi3_aarch64_uxtw): Add r/rk/Upl alternative.
	(*add<GPI>3 peepholes): New.
	(*add<GPI>3 splitters): New.
	* config/aarch64/constraints.md (Upl): New.
	* config/aarch64/predicates.md (aarch64_pluslong_strict_immedate): New.

2016-01-14  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	* LINARO-VERSION: Bump version number, post snapshot.

2016-01-14  Yvan Roux  <yvan.roux@linaro.org>

	Make Linaro GCC Snapshot 5.3-2016.01.

	gcc/
	* LINARO-VERSION: Update.

2016-01-13  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r232325.
	2016-01-13  Yvan Roux  <yvan.roux@linaro.org>

	* config/arm/arm-arches.def: Remove spurious whitespace in "armv8.1-a"
	and "armv8.1-a+crc" entries.

2016-01-13  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r231678.
	2015-12-16  Matthew Wahab  <matthew.wahab@arm.com>

	* config/arm/arm-arches.def: Add "armv8.1-a" and "armv8.1-a+crc".
	* config/arm/arm-protos.h (FL2_ARCH8_1): New.
	(FL2_FOR_ARCH8_1A): New.
	* config/arm/arm-tables.opt: Regenerate.
	* config/arm/arm.c (arm_arch8_1): New.
	(arm_option_override): Set arm_arch8_1.
	* config/arm/arm.h (TARGET_NEON_RDMA): New.
	(arm_arch8_1): Declare.
	* doc/invoke.texi (ARM Options, -march): Add "armv8.1-a" and
	"armv8.1-a+crc".
	(ARM Options, -mfpu): Fix a typo.

	gcc/
	Backport from trunk r231680.
	2015-12-16  Matthew Wahab  <matthew.wahab@arm.com>

	* config/arm/t-aprofile: Make "armv8.1-a" and "armv8.1-a+crc"
	matches for "armv8-a".

	gcc/
	Backport from trunk r231681.
	2015-12-16  Matthew Wahab  <matthew.wahab@arm.com>

	* config/arm/iterators.md (VQRDMLH_AS): New.
	(neon_rdma_as): New.
	* config/arm/neon.md
	(neon_vqrdml<VQRDMLH_AS:neon_rdma_as>h<mode>): New.
	(neon_vqrdml<VQRDMLH_AS:neon_rdma_as>h_lane<mode>): New.
	* config/arm/unspecs.md (UNSPEC_VQRDMLAH): New.
	(UNSPEC_VQRDMLSH): New.

	gcc/
	Backport from trunk r231682.
	2015-12-16  Matthew Wahab  <matthew.wahab@arm.com>

	* config/arm/arm-c.c (arm_cpu_builtins): Define
	__ARM_FEATURE_QRDMX.  Clean up some trailing whitespace.

	gcc/
	Backport from trunk r231683.
	2015-12-16  Matthew Wahab  <matthew.wahab@arm.com>

	* doc/sourcebuild.texi (ARM-specific attributes): Add
	"arm_v8_1a_neon_ok" and "arm_v8_1a_neon_hw".

	gcc/testsuite/
	Backport from trunk r231683.
	2015-12-16  Matthew Wahab  <matthew.wahab@arm.com>

	* lib/target-supports.exp (add_options_for_arm_v8_1a_neon): Update
	comment.  Use check_effective_target_arm_v8_1a_neon_ok to select
	the command line options.
	(check_effective_target_arm_v8_1a_neon_ok_nocache): Update initial
	test to allow ARM targets.  Select and record a working set of
	command line options.
	(check_effective_target_arm_v8_1a_neon_hw): Add tests for ARM
	targets.

	gcc/
	Backport from trunk r231685.
	2015-12-16  Matthew Wahab  <matthew.wahab@arm.com>

	* config/arm/arm_neon.h (vqrdmlah_s16, vqrdmlah_s32): New.
	(vqrdmlahq_s16, vqrdmlahq_s32): New.
	(vqrdmlsh_s16, vqrdmlsh_s32): New.
	(vqrdmlahq_s16, vqrdmlshq_s32): New.
	* config/arm/arm_neon_builtins.def: Add "vqrdmlah" and "vqrdmlsh".

	gcc/
	Backport from trunk r231686.
	2015-12-16  Matthew Wahab  <matthew.wahab@arm.com>

	* config/arm/arm_neon.h (vqrdmlahq_lane_s16): New.
	(vqrdmlahq_lane_s32): New.
	(vqrdmlah_lane_s16): New.
	(vqrdmlah_lane_s32): New.
	(vqrdmlshq_lane_s16): New.
	(vqrdmlshq_lane_s32): New.
	(vqrdmlsh_lane_s16): New.
	(vqrdmlsh_lane_s32): New.
	* config/arm/arm_neon_builtins.def: Add "vqrdmlah_lane" and
	"vqrdmlsh_lane".

2016-01-13  Yvan Roux  <yvan.roux@linaro.org>

	Merge branches/gcc-5-branch rev 232321.

2016-01-13  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r230786.
	2015-11-24  Segher Boessenkool  <segher@kernel.crashing.org>

	PR rtl-optimization/68381
	* combine.c (is_parallel_of_n_reg_sets): Return false if the pattern
	is poisoned.

	gcc/testsuite/
	Backport from trunk r230809.
	2015-11-24  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	PR rtl-optimization/68381
	* gcc.c-torture/execute/pr68381.c: New test.

	gcc/
	Backport from trunk r230946.
	2015-11-26  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* combine.c (subst): Do not return clobber of zero in widening mult
	case.  Just return x unchanged if it is a no-op substitution.

2016-01-12  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r230853.
	2015-11-24  Michael Collison  <michael.collison@linaro.org>

	* config/aarch64/aarch64-simd.md (widen_ssum, widen_usum)
	(aarch64_<ANY_EXTEND:su><ADDSUB:optab>w<mode>_internal): New patterns
	* config/aarch64/iterators.md (Vhalf, VDBLW): New mode attributes.

	gcc/testsuite/
	Backport from trunk r230853.
	2015-11-24  Michael Collison  <michael.collison@linaro.org>

	* gcc.target/aarch64/saddw-1.c: New test.
	* gcc.target/aarch64/saddw-2.c: New test.
	* gcc.target/aarch64/uaddw-1.c: New test.
	* gcc.target/aarch64/uaddw-2.c: New test.
	* gcc.target/aarch64/uaddw-3.c: New test.
	* lib/target-support.exp
	(check_effective_target_vect_widen_sum_hi_to_si_pattern):
	Add aarch64 to list of support targets.

2016-01-12  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r231864.
	2015-12-20  Andrew Pinsi  <apinski@cavium.com>

	* config/aarch64/atomics.md
	(aarch64_atomic_<atomic_optab>_fetch<mode>_lse): Add early clobber
	to the scratch register.

2016-01-12  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r231810.
	2015-12-18  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	PR rtl-optimization/68796
	* config/aarch64/aarch64.md (*and<mode>3nr_compare0_zextract):
	New pattern.
	* config/aarch64/aarch64.c (aarch64_select_cc_mode): Handle
	ZERO_EXTRACT comparison with zero.
	(aarch64_mask_from_zextract_ops): New function.
	* config/aarch64/aarch64-protos.h (aarch64_mask_from_zextract_ops):
	New prototype.

	gcc/testsuite/
	Backport from trunk r231810.
	2015-12-18  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	PR rtl-optimization/68796
	* gcc.target/aarch64/tst_3.c: New test.
	* gcc.target/aarch64/tst_4.c: Likewise.

2016-01-12  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r231758.
	2015-12-17  Christian Bruel  <christian.bruel@st.com>

	* tree.h (TYPE_MODE_RAW): New macro.
	* tree-streamer-out.c (pack_ts_type_common_value_fields):
	Replace TYPE_MODE by TYPE_MODE_RAW.

2016-01-12  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r231696.
	2015-12-16  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	PR target/68696
	* config/aarch64/aarch64-simd.md (*aarch64_simd_bsl<mode>_alt):
	New pattern.
	(aarch64_simd_bsl<mode>_internal): Update comment to reflect
	the above.

2016-01-12  Yvan Roux  <yvan.roux@linaro.org>

	gcc/testsuite/
	Backport from trunk r231413.
	2015-12-08  Jiong Wang  <jiong.wang@arm.com>

	* gcc.target/aarch64/got_mem_hoist_1.c (dg-skip-if): Match big-endian
	as well.

2016-01-12  Yvan Roux  <yvan.roux@linaro.org>

	gcc/testsuite/
	Backport from trunk r231401.
	2015-12-08  Andre Vieira  <andre.simoesdiasvieira@arm.com>
	    Joern Rennecke  <joern.rennecke@embecosm.com>

	* gcc.dg/torture/stackalign/builtin-return-1.c: Add an
	inline assembly read to make sure dummy is not optimized
	away by LTO.

2016-01-12  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r231252.
	2015-12-04  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	PR target/68214
	* config/arm/arm.md (*call_mem): Delete pattern.
	(*call_value_mem): Likewise.
	* config/arm/arm.c (output_call_mem): Delete.
	* config/arm/arm-protos.h (output_call_mem): Delete prototype.

2016-01-12  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r231251.
	2015-12-04  Bin Cheng  <bin.cheng@arm.com>

	* config/aarch64/atomics.md (atomic_store<mode>): Use predicate
	aarch64_sync_memory_operand.

2016-01-12  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r230927.
	2015-11-26  Wilco Dijkstra  <wdijkstr@arm.com>

	* config/aarch64/aarch64.md (cbranch<mode>4): Use
	aarch64_fp_compare_operand.
	(store_pairsf): Use aarch64_reg_or_fp_zero.
	(store_pairdf): Likewise.
	(cstore<mode>4): Use aarch64_fp_compare_operand.
	(cmov<mode>6): Likewise.
	* config/aarch64/aarch64-ldpstp.md: Use aarch64_reg_or_fp_zero.

2016-01-12  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r230814.
	2015-11-24  Wilco Dijkstra  <wdijkstr@arm.com>

	* gcc/config/aarch64/aarch64.md (add<mode>3):
	Block early expansion into 2 add instructions.
	(add<mode>3_pluslong): New pattern to combine complex
	immediates into 2 additions.

2016-01-12  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r230805.
	2015-11-24  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config/aarch64/aarch64.md (*condjump): Rename to...
	(condjump): ... This.
	(*compare_condjump<mode>): New define_insn_and_split.
	(*compare_cstore<mode>_insn): Likewise.
	(*cstore<mode>_insn): Rename to...
	(cstore<mode>_insn): ... This.
	* config/aarch64/iterators.md (CMP): Handle ne code.
	* config/aarch64/predicates.md (aarch64_imm24): New predicate.

	gcc/testsuite/
	Backport from trunk r230805.
	2015-11-24  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* gcc.target/aarch64/cmpimm_branch_1.c: New test.
	* gcc.target/aarch64/cmpimm_cset_1.c: Likewise.

2016-01-12  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r230819.
	2015-11-24  Szabolcs Nagy  <szabolcs.nagy@arm.com>

	* doc/invoke.texi (-fpic): Add the AArch64 limit.
	(-fPIC): Add AArch64.

2016-01-12  Christophe Lyon  <christophe.lyon@linaro.org>

	Fix bug #1982

	gcc/testsuite/
	Revert backport from trunk r225443.
	2015-07-06  Bin Cheng  <bin.cheng@arm.com>

	PR tree-optimization/66720
	* gcc.dg/vect/pr48052.c: Use dg-require-effective-target
	vect_int_mult.

	gcc/
	Revert backport from trunk r224009.
	2015-06-02  Bin Cheng  <bin.cheng@arm.com>

	PR tree-optimization/52563
	PR tree-optimization/62173
	* tree-ssa-loop-ivopts.c (struct iv): New field.  Reorder fields.
	(alloc_iv, set_iv): New parameter.
	(determine_biv_step): Delete.
	(find_bivs): Inline original determine_biv_step.  Pass new
	argument to set_iv.
	(idx_find_step): Use no_overflow information for conversion.
	* tree-scalar-evolution.c (analyze_scalar_evolution_in_loop): Let
	resolve_mixers handle folded_casts.
	(instantiate_scev_name): Change bool parameter to bool pointer.
	(instantiate_scev_poly, instantiate_scev_binary): Ditto.
	(instantiate_array_ref, instantiate_scev_not): Ditto.
	(instantiate_scev_3, instantiate_scev_2): Ditto.
	(instantiate_scev_1, instantiate_scev_r): Ditto.
	(instantiate_scev_convert, ): Change parameter.  Pass argument
	to chrec_convert_aggressive.
	(instantiate_scev): Change argument.
	(resolve_mixers): New parameter and set it.
	(scev_const_prop): New argument.
	* tree-scalar-evolution.h (resolve_mixers): New parameter.
	* tree-chrec.c (convert_affine_scev): Call chrec_convert instead
	of chrec_conert_1.
	(chrec_convert): New parameter.  Move definition below.
	(chrec_convert_aggressive): New parameter and set it.  Call
	convert_affine_scev.
	* tree-chrec.h (chrec_convert): New parameter.
	(chrec_convert_aggressive): Ditto.

	gcc/testsuite/
	Revert backport from trunk r224009.
	2015-06-02  Bin Cheng  <bin.cheng@arm.com>

	PR tree-optimization/52563
	PR tree-optimization/62173
	* gcc.dg/tree-ssa/scev-3.c: Remove xfail.
	* gcc.dg/tree-ssa/scev-4.c: Ditto.

	gcc/
	Revert backport from trunk r224020.
	2015-06-02  Bin Cheng  <bin.cheng@arm.com>

	PR tree-optimization/48052
	* cfgloop.h (struct control_iv): New.
	(struct loop): New field control_ivs.
	* tree-ssa-loop-niter.c : Include "stor-layout.h".
	(number_of_iterations_lt): Set no_overflow information.
	(number_of_iterations_exit): Init control iv in niter struct.
	(record_control_iv): New.
	(estimate_numbers_of_iterations_loop): Call record_control_iv.
	(loop_exits_before_overflow): New.  Interface factored out of
	scev_probably_wraps_p.
	(scev_probably_wraps_p): Factor loop niter related code into
	loop_exits_before_overflow.
	(free_numbers_of_iterations_estimates_loop): Free control ivs.
	* tree-ssa-loop-niter.h (free_loop_control_ivs): New.

	gcc/testsuite/
	Revert backport from trunk r224020.
	2015-06-02  Bin Cheng  <bin.cheng@arm.com>

	PR tree-optimization/48052
	* gcc.dg/tree-ssa/scev-8.c: New.
	* gcc.dg/tree-ssa/scev-9.c: New.
	* gcc.dg/tree-ssa/scev-10.c: New.
	* gcc.dg/vect/pr48052.c: New.

	gcc/testsuite/
	Revert backport from trunk r224055.
	2015-06-03  Bin Cheng  <bin.cheng@arm.com>

	* gcc.dg/tree-ssa/pr65447.c: Increase searching number.

	2015-06-02  Kugan Vivekanandarajah  <kuganv@linaro.org>
	gcc/
	Revert backport from trunk r224058.
	2015-06-03  Bin Cheng  <bin.cheng@arm.com>

	* tree-ssa-loop-ivopts.c (dump_iv): New parameter.
	(dump_use, dump_cand, find_induction_variables): Pass new argument
	to dump_iv.
	(record_use): Preserve the ssa name information in IV.

	gcc/
	Revert backport from trunk r224769.
	2015-06-23  Bin Cheng  <bin.cheng@arm.com>

	PR tree-optimization/66449
	* tree-ssa-loop-niter.c (loop_exits_before_overflow): Use
	POINTER_PLUS_EXPR for pointers.

	gcc/testsuite/
	Revert backport from trunk r224769.
	2015-06-23  Bin Cheng  <bin.cheng@arm.com>

	PR tree-optimization/66449
	* gcc.dg/vect/pr66449.c: New test.

2016-01-07  Christophe Lyon  <christophe.lyon@linaro.org>

	Fix bug #1980

	gcc/
	Revert backport from trunk r230150.
	2015-11-11  Richard Biener  <rguenth@gcc.gnu.org>
	    Jiong Wang      <jiong.wang@arm.com>

	PR tree-optimization/68234
	* tree-vrp.c (vrp_visit_phi_node): Extend SCEV check to those loop PHI
	node which estimiated to be VR_VARYING initially.

	gcc/testsuite/
	Revert backport from trunk r230150.
	2015-11-11  Richard Biener  <rguenth@gcc.gnu.org>
	    Jiong Wang      <jiong.wang@arm.com>

	* gcc.dg/tree-ssa/pr68234.c: New testcase.

	gcc/
	Revert backport from trunk r230754.
	2015-11-23  Richard Biener  <rguenth@gcc.gnu.org>
	    Jiong Wang  <jiong.wang@arm.com>

	PR tree-optimization/68317
	PR tree-optimization/68326
	* tree-vrp.c (adjust_range_with_scev): Call drop_tree_overflow if the
	final min and max are not infinity.

	gcc/testsuite/
	Revert backport from trunk r230754.
	2015-11-23  Richard Biener  <rguenther@suse.de>
	    Jiong Wang  <jiong.wang@arm.com>

	PR tree-optimization/68317
	PR tree-optimization/68326
	* gcc.dg/pr68317.c: New testcase.

2015-12-31  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r230953.
	2015-11-26  Matthew Wahab  <matthew.wahab@arm.com>

	* config/aarch64/aarch64.h (AARCH64_ISA_RDMA): New.
	(TARGET_SIMD_RDMA): New.

	gcc/
	Backport from trunk r230959.
	2015-11-26  Matthew Wahab  <matthew.wahab@arm.com>

	* config/aarch64/aarch64-simd.md
	(aarch64_sqmovun<mode>): Fix some white-space.
	(aarch64_<sur>qmovun<mode>): Likewise.
	(aarch64_sqrdml<SQRDMLH_AS:rdma_as>h<mode>): New.
	(aarch64_sqrdml<SQRDMLH_AS:rdma_as>h_lane<mode>): New.
	(aarch64_sqrdml<SQRDMLH_AS:rdma_as>h_laneq<mode>): New.
	* config/aarch64/iterators.md (UNSPEC_SQRDMLAH): New.
	(UNSPEC_SQRDMLSH): New.
	(SQRDMLH_AS): New.
	(rdma_as): New.

	gcc/
	Backport from trunk r230962.
	2015-11-26  Matthew Wahab  <matthew.wahab@arm.com>

	* config/aarch64/aarch64-simd-builtins.def
	(sqrdmlah, sqrdmlsh): New.
	(sqrdmlah_lane, sqrdmlsh_lane): New.
	(sqrdmlah_laneq, sqrdmlsh_laneq): New.

	gcc/
	Backport from trunk r230966.
	2015-11-26  Matthew Wahab  <matthew.wahab@arm.com>

	* config/aarch64/aarch64-simd-builtins.def:
	Add missing changes from r230962.

	gcc/
	Backport from trunk r230969.
	2015-11-26  Matthew Wahab  <matthew.wahab@arm.com>

	* config/aarch64/aarch64-c.c (aarch64_update_cpp_builtins): Add
	ARM_FEATURE_QRDMX.

	gcc/testsuite/
	Backport from trunk r230970.
	2015-11-26  Matthew Wahab  <matthew.wahab@arm.com>

	* lib/target-supports.exp (add_options_for_arm_v8_1a_neon): New.
	(check_effective_target_arm_arch_FUNC_ok)
	(add_options_for_arm_arch_FUNC)
	(check_effective_target_arm_arch_FUNC_multilib): Add "armv8.1-a"
	to the list to be generated.
	(check_effective_target_arm_v8_1a_neon_ok_nocache): New.
	(check_effective_target_arm_v8_1a_neon_ok): New.
	(check_effective_target_arm_v8_1a_neon_hw): New.

	gcc/
	Backport from trunk r230971.
	2015-11-26  Matthew Wahab  <matthew.wahab@arm.com>

	* gcc/config/aarch64/arm_neon.h (vqrdmlah_s16, vqrdmlah_s32): New.
	(vqrdmlahq_s16, vqrdmlahq_s32): New.
	(vqrdmlsh_s16, vqrdmlsh_s32): New.
	(vqrdmlshq_s16, vqrdmlshq_s32): New.

	gcc/testsuite/
	Backport from trunk r230971.
	2015-11-26  Matthew Wahab  <matthew.wahab@arm.com>

	* gcc.target/aarch64/advsimd-intrinsics/vqrdmlXh.inc: New file,
	support code for vqrdml{as}h tests.
	* gcc.target/aarch64/advsimd-intrinsics/vqrdmlah.c: New.
	* gcc.target/aarch64/advsimd-intrinsics/vqrdmlsh.c: New.

	gcc/
	Backport from trunk r230972.
	2015-11-26  Matthew Wahab  <matthew.wahab@arm.com>

	* gcc/config/aarch64/arm_neon.h
	(vqrdmlah_laneq_s16, vqrdmlah_laneq_s32): New.
	(vqrdmlahq_laneq_s16, vqrdmlahq_laneq_s32): New.
	(vqrdmlsh_lane_s16, vqrdmlsh_lane_s32): New.
	(vqrdmlshq_laneq_s16, vqrdmlshq_laneq_s32): New.
	(vqrdmlah_lane_s16, vqrdmlah_lane_s32): New.
	(vqrdmlahq_lane_s16, vqrdmlahq_lane_s32): New.
	(vqrdmlahh_s16, vqrdmlahh_lane_s16, vqrdmlahh_laneq_s16): New.
	(vqrdmlahs_s32, vqrdmlahs_lane_s32, vqrdmlahs_laneq_s32): New.
	(vqrdmlsh_lane_s16, vqrdmlsh_lane_s32): New.
	(vqrdmlshq_lane_s16, vqrdmlshq_lane_s32): New.
	(vqrdmlshh_s16, vqrdmlshh_lane_s16, vqrdmlshh_laneq_s16): New.
	(vqrdmlshs_s32, vqrdmlshs_lane_s32, vqrdmlshs_laneq_s32): New.

	gcc/testsuite/
	Backport from trunk r230972.
	2015-11-26  Matthew Wahab  <matthew.wahab@arm.com>

	* gcc.target/aarch64/advsimd-intrinsics/vqrdmlXh_lane.inc: New file,
	support code for vqrdml{as}h_lane tests.
	* gcc.target/aarch64/advsimd-intrinsics/vqrdmlah_lane.c: New.
	* gcc.target/aarch64/advsimd-intrinsics/vqrdmlsh_lane.c: New.

	gcc/
	Backport from trunk r231400.
	2015-12-08  Matthew Wahab  <matthew.wahab@arm.com>

	* config/aarch64/aarch64-options-extensions.def: Remove
	AARCH64_FL_RDMA from "fp" and "simd".  Remove "pan", "lor",
	"rdma".
	* config/aarch64/aarch64.h (AARCH64_FL_PAN): Remove.
	(AARCH64_FL_LOR): Remove.
	(AARCH64_FL_RDMA): Remove.
	(AARCH64_FL_V8_1): New.
	(AARCH64_FL_FOR_AARCH8_1): Replace AARCH64_FL_PAN, AARCH64_FL_LOR
	and AARCH64_FL_RDMA with AARCH64_FL_V8_1.
	(AARCH64_ISA_RDMA): Replace AARCH64_FL_RDMA with AARCH64_FL_V8_1.
	* doc/invoke.texi (AArch64 -march): Rewrite initial paragraph and
	section on -march=native.  Group descriptions of permitted
	architecture names together.  Expand description of
	-march=armv8.1-a.
	(AArch64 -mtune): Slightly rework section on -march=native.
	(AArch64 -mcpu): Slightly rework section on -march=native.
	(AArch64 Feature Modifiers): Remove "pan", "lor" and "rdma".
	State that -march=armv8.1-a enables "crc" and "lse".

2015-12-30  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r230754.
	2015-11-23  Richard Biener  <rguenth@gcc.gnu.org>
	    Jiong Wang  <jiong.wang@arm.com>

	PR tree-optimization/68317
	PR tree-optimization/68326
	* tree-vrp.c (adjust_range_with_scev): Call drop_tree_overflow if the
	final min and max are not infinity.

	gcc/testsuite/
	Backport from trunk r230754.
	2015-11-23  Richard Biener  <rguenther@suse.de>
	    Jiong Wang  <jiong.wang@arm.com>

	PR tree-optimization/68317
	PR tree-optimization/68326
	* gcc.dg/pr68317.c: New testcase.

2015-12-30  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r230730.
	2015-11-23  Kugan Vivekanandarajah  <kuganv@linaro.org>

	PR target/68390
	* config/arm/arm.c (arm_function_ok_for_sibcall): Get function type
	for indirect function call.

	gcc/testsuite/
	Backport from trunk r230730.
	2015-11-23  Kugan Vivekanandarajah  <kuganv@linaro.org>

	PR target/68390
	* gcc/testsuite/gcc.c-torture/execute/pr68390.c: New test.

2015-12-30  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r230666.
	2015-11-20  Evandro Menezes  <e.menezes@samsung.com>

	* config/aarch64/aarch64.md (predicated): Copy attribute from
	"arm.md".
	* config/arm/arm.md (predicated): Added description.

2015-12-30  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r230663.
	2015-11-20  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	PR target/68149
	* config/arm/arm.md (unaligned_loaddi): Delete.
	(unaligned_storedi): Likewise.
	* config/arm/arm.c (gen_movmem_ldrd_strd): Don't generate
	unaligned DImode memory ops.  Instead perform two back-to-back
	unaligned SImode ops.

2015-12-28  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r230548.
	2015-11-18  Martin Liska  <mliska@suse.cz>

	* config/arm/arm.c (arm_valid_target_attribute_p): Finalize
	options struct.

2015-12-17  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	* LINARO-VERSION: Bump version number, post snapshot.

2015-12-17  Yvan Roux  <yvan.roux@linaro.org>

	Make Linaro GCC Snapshot 5.3-2015.12.

	gcc/
	* LINARO-VERSION: Update.

2015-12-15  Yvan Roux  <yvan.roux@linaro.org>

	Merge branches/gcc-5-branch rev 231642.

2015-12-10  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r230142.
	2015-11-11  Charles Baylis  <charles.baylis@linaro.org>

	PR target/63870
	* config/arm/arm-builtins.c (enum arm_type_qualifiers): New enumerator
	qualifier_struct_load_store_lane_index.
	(builtin_arg): New enumerator NEON_ARG_STRUCT_LOAD_STORE_LANE_INDEX.
	(arm_expand_neon_args): New parameter. Remove ellipsis. Handle NEON
	argument qualifiers.
	(arm_expand_neon_builtin): Handle new NEON argument qualifier.
	* config/arm/arm.h (NEON_ENDIAN_LANE_N): New macro.

	gcc/
	Backport from trunk r230143.
	2015-11-11  Charles Baylis  <charles.baylis@linaro.org>

	PR target/63870
	* config/arm/arm-builtins.c: (arm_load1_qualifiers) Use
	qualifier_struct_load_store_lane_index.
	(arm_storestruct_lane_qualifiers) Likewise.
	* config/arm/neon.md: (neon_vld1_lane<mode>) Reverse lane numbers for
	big-endian.
	(neon_vst1_lane<mode>) Likewise.
	(neon_vld2_lane<mode>) Likewise.
	(neon_vst2_lane<mode>) Likewise.
	(neon_vld3_lane<mode>) Likewise.
	(neon_vst3_lane<mode>) Likewise.
	(neon_vld4_lane<mode>) Likewise.
	(neon_vst4_lane<mode>) Likewise.

	gcc/
	Backport from trunk r230144.
	2015-11-11  Charles Baylis  <charles.baylis@linaro.org>

	PR target/63870
	* config/arm/neon.md (neon_vld1_lane<mode>): Remove error for invalid
	lane number.
	(neon_vst1_lane<mode>): Likewise.
	(neon_vld2_lane<mode>): Likewise.
	(neon_vst2_lane<mode>): Likewise.
	(neon_vld3_lane<mode>): Likewise.
	(neon_vst3_lane<mode>): Likewise.
	(neon_vld4_lane<mode>): Likewise.
	(neon_vst4_lane<mode>): Likewise.

	gcc/
	Backport from trunk r230203.
	2015-11-12  Charles Baylis  <charles.baylis@linaro.org>

	* config/arm/neon.md: (neon_vld2_lane<mode>): Remove unused max
	variable.
	(neon_vst2_lane<mode>): Likewise.
	(neon_vld3_lane<mode>): Likewise.
	(neon_vst3_lane<mode>): Likewise.
	(neon_vld4_lane<mode>): Likewise.
	(neon_vst4_lane<mode>): Likewise.

	gcc/testsuite/
	Backport from trunk r231077.
	2015-11-30  Charles Baylis  <charles.baylis@linaro.org>

	PR target/63870
	* gcc.target/aarch64/advsimd-intrinsics/vld2_lane_f16_indices_1.c (f_vld2_lane_f16): Remove xfails for arm targets.
	* gcc.target/aarch64/advsimd-intrinsics/vld2_lane_f32_indices_1.c (f_vld2_lane_f32): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld2_lane_f64_indices_1.c (f_vld2_lane_f64): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld2_lane_p8_indices_1.c (f_vld2_lane_p8): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld2_lane_s16_indices_1.c (f_vld2_lane_s16): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld2_lane_s32_indices_1.c (f_vld2_lane_s32): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld2_lane_s64_indices_1.c (f_vld2_lane_s64): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld2_lane_s8_indices_1.c (f_vld2_lane_s8): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld2_lane_u16_indices_1.c (f_vld2_lane_u16): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld2_lane_u32_indices_1.c (f_vld2_lane_u32): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld2_lane_u64_indices_1.c (f_vld2_lane_u64): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld2_lane_u8_indices_1.c (f_vld2_lane_u8): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld2q_lane_f16_indices_1.c (f_vld2q_lane_f16): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld2q_lane_f32_indices_1.c (f_vld2q_lane_f32): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld2q_lane_f64_indices_1.c (f_vld2q_lane_f64): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld2q_lane_p8_indices_1.c (f_vld2q_lane_p8): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld2q_lane_s16_indices_1.c (f_vld2q_lane_s16): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld2q_lane_s32_indices_1.c (f_vld2q_lane_s32): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld2q_lane_s64_indices_1.c (f_vld2q_lane_s64): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld2q_lane_s8_indices_1.c (f_vld2q_lane_s8): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld2q_lane_u16_indices_1.c (f_vld2q_lane_u16): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld2q_lane_u32_indices_1.c (f_vld2q_lane_u32): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld2q_lane_u64_indices_1.c (f_vld2q_lane_u64): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld2q_lane_u8_indices_1.c (f_vld2q_lane_u8): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld3_lane_f16_indices_1.c (f_vld3_lane_f16): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld3_lane_f32_indices_1.c (f_vld3_lane_f32): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld3_lane_f64_indices_1.c (f_vld3_lane_f64): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld3_lane_p8_indices_1.c (f_vld3_lane_p8): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld3_lane_s16_indices_1.c (f_vld3_lane_s16): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld3_lane_s32_indices_1.c (f_vld3_lane_s32): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld3_lane_s64_indices_1.c (f_vld3_lane_s64): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld3_lane_s8_indices_1.c (f_vld3_lane_s8): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld3_lane_u16_indices_1.c (f_vld3_lane_u16): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld3_lane_u32_indices_1.c (f_vld3_lane_u32): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld3_lane_u64_indices_1.c (f_vld3_lane_u64): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld3_lane_u8_indices_1.c (f_vld3_lane_u8): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld3q_lane_f16_indices_1.c (f_vld3q_lane_f16): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld3q_lane_f32_indices_1.c (f_vld3q_lane_f32): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld3q_lane_f64_indices_1.c (f_vld3q_lane_f64): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld3q_lane_p8_indices_1.c (f_vld3q_lane_p8): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld3q_lane_s16_indices_1.c (f_vld3q_lane_s16): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld3q_lane_s32_indices_1.c (f_vld3q_lane_s32): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld3q_lane_s64_indices_1.c (f_vld3q_lane_s64): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld3q_lane_s8_indices_1.c (f_vld3q_lane_s8): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld3q_lane_u16_indices_1.c (f_vld3q_lane_u16): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld3q_lane_u32_indices_1.c (f_vld3q_lane_u32): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld3q_lane_u64_indices_1.c (f_vld3q_lane_u64): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld3q_lane_u8_indices_1.c (f_vld3q_lane_u8): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld4_lane_f16_indices_1.c (f_vld4_lane_f16): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld4_lane_f32_indices_1.c (f_vld4_lane_f32): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld4_lane_f64_indices_1.c (f_vld4_lane_f64): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld4_lane_p8_indices_1.c (f_vld4_lane_p8): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld4_lane_s16_indices_1.c (f_vld4_lane_s16): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld4_lane_s32_indices_1.c (f_vld4_lane_s32): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld4_lane_s64_indices_1.c (f_vld4_lane_s64): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld4_lane_s8_indices_1.c (f_vld4_lane_s8): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld4_lane_u16_indices_1.c (f_vld4_lane_u16): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld4_lane_u32_indices_1.c (f_vld4_lane_u32): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld4_lane_u64_indices_1.c (f_vld4_lane_u64): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld4_lane_u8_indices_1.c (f_vld4_lane_u8): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld4q_lane_f16_indices_1.c (f_vld4q_lane_f16): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld4q_lane_f32_indices_1.c (f_vld4q_lane_f32): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld4q_lane_f64_indices_1.c (f_vld4q_lane_f64): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld4q_lane_p8_indices_1.c (f_vld4q_lane_p8): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld4q_lane_s16_indices_1.c (f_vld4q_lane_s16): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld4q_lane_s32_indices_1.c (f_vld4q_lane_s32): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld4q_lane_s64_indices_1.c (f_vld4q_lane_s64): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld4q_lane_s8_indices_1.c (f_vld4q_lane_s8): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld4q_lane_u16_indices_1.c (f_vld4q_lane_u16): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld4q_lane_u32_indices_1.c (f_vld4q_lane_u32): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld4q_lane_u64_indices_1.c (f_vld4q_lane_u64): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vld4q_lane_u8_indices_1.c (f_vld4q_lane_u8): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst2_lane_f16_indices_1.c (f_vst2_lane_f16): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst2_lane_f32_indices_1.c (f_vst2_lane_f32): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst2_lane_f64_indices_1.c (f_vst2_lane_f64): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst2_lane_p8_indices_1.c (f_vst2_lane_p8): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst2_lane_s16_indices_1.c (f_vst2_lane_s16): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst2_lane_s32_indices_1.c (f_vst2_lane_s32): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst2_lane_s64_indices_1.c (f_vst2_lane_s64): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst2_lane_s8_indices_1.c (f_vst2_lane_s8): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst2_lane_u16_indices_1.c (f_vst2_lane_u16): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst2_lane_u32_indices_1.c (f_vst2_lane_u32): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst2_lane_u64_indices_1.c (f_vst2_lane_u64): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst2_lane_u8_indices_1.c (f_vst2_lane_u8): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst2q_lane_f16_indices_1.c (f_vst2q_lane_f16): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst2q_lane_f32_indices_1.c (f_vst2q_lane_f32): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst2q_lane_f64_indices_1.c (f_vst2q_lane_f64): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst2q_lane_p8_indices_1.c (f_vst2q_lane_p8): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst2q_lane_s16_indices_1.c (f_vst2q_lane_s16): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst2q_lane_s32_indices_1.c (f_vst2q_lane_s32): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst2q_lane_s64_indices_1.c (f_vst2q_lane_s64): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst2q_lane_s8_indices_1.c (f_vst2q_lane_s8): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst2q_lane_u16_indices_1.c (f_vst2q_lane_u16): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst2q_lane_u32_indices_1.c (f_vst2q_lane_u32): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst2q_lane_u64_indices_1.c (f_vst2q_lane_u64): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst2q_lane_u8_indices_1.c (f_vst2q_lane_u8): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst3_lane_f16_indices_1.c (f_vst3_lane_f16): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst3_lane_f32_indices_1.c (f_vst3_lane_f32): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst3_lane_f64_indices_1.c (f_vst3_lane_f64): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst3_lane_p8_indices_1.c (f_vst3_lane_p8): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst3_lane_s16_indices_1.c (f_vst3_lane_s16): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst3_lane_s32_indices_1.c (f_vst3_lane_s32): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst3_lane_s64_indices_1.c (f_vst3_lane_s64): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst3_lane_s8_indices_1.c (f_vst3_lane_s8): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst3_lane_u16_indices_1.c (f_vst3_lane_u16): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst3_lane_u32_indices_1.c (f_vst3_lane_u32): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst3_lane_u64_indices_1.c (f_vst3_lane_u64): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst3_lane_u8_indices_1.c (f_vst3_lane_u8): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst3q_lane_f16_indices_1.c (f_vst3q_lane_f16): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst3q_lane_f32_indices_1.c (f_vst3q_lane_f32): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst3q_lane_f64_indices_1.c (f_vst3q_lane_f64): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst3q_lane_p8_indices_1.c (f_vst3q_lane_p8): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst3q_lane_s16_indices_1.c (f_vst3q_lane_s16): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst3q_lane_s32_indices_1.c (f_vst3q_lane_s32): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst3q_lane_s64_indices_1.c (f_vst3q_lane_s64): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst3q_lane_s8_indices_1.c (f_vst3q_lane_s8): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst3q_lane_u16_indices_1.c (f_vst3q_lane_u16): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst3q_lane_u32_indices_1.c (f_vst3q_lane_u32): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst3q_lane_u64_indices_1.c (f_vst3q_lane_u64): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst3q_lane_u8_indices_1.c (f_vst3q_lane_u8): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst4_lane_f16_indices_1.c (f_vst4_lane_f16): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst4_lane_f32_indices_1.c (f_vst4_lane_f32): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst4_lane_f64_indices_1.c (f_vst4_lane_f64): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst4_lane_p8_indices_1.c (f_vst4_lane_p8): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst4_lane_s16_indices_1.c (f_vst4_lane_s16): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst4_lane_s32_indices_1.c (f_vst4_lane_s32): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst4_lane_s64_indices_1.c (f_vst4_lane_s64): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst4_lane_s8_indices_1.c (f_vst4_lane_s8): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst4_lane_u16_indices_1.c (f_vst4_lane_u16): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst4_lane_u32_indices_1.c (f_vst4_lane_u32): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst4_lane_u64_indices_1.c (f_vst4_lane_u64): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst4_lane_u8_indices_1.c (f_vst4_lane_u8): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst4q_lane_f16_indices_1.c (f_vst4q_lane_f16): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst4q_lane_f32_indices_1.c (f_vst4q_lane_f32): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst4q_lane_f64_indices_1.c (f_vst4q_lane_f64): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst4q_lane_p8_indices_1.c (f_vst4q_lane_p8): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst4q_lane_s16_indices_1.c (f_vst4q_lane_s16): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst4q_lane_s32_indices_1.c (f_vst4q_lane_s32): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst4q_lane_s64_indices_1.c (f_vst4q_lane_s64): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst4q_lane_s8_indices_1.c (f_vst4q_lane_s8): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst4q_lane_u16_indices_1.c (f_vst4q_lane_u16): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst4q_lane_u32_indices_1.c (f_vst4q_lane_u32): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst4q_lane_u64_indices_1.c (f_vst4q_lane_u64): Ditto.
	* gcc.target/aarch64/advsimd-intrinsics/vst4q_lane_u8_indices_1.c (f_vst4q_lane_u8): Ditto.

2015-12-09  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r231275.
	2015-12-04  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config/aarch64/aarch64.c (aarch64_override_options_internal):
	Do not alter target_flags due to TARGET_GENERAL_REGS_ONLY_P.
	* doc/invoke.texi (AArch64 options): Mention that -mgeneral-regs-only
	does not affect the assembler directives.

	gcc/testsuite/
	Backport from trunk r231275.
	2015-12-04  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* gcc.target/aarch64/mgeneral-regs_4.c: New test.

2015-12-07  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r230222.
	2015-11-12  Renlin Li  <renlin.li@arm.com>

	* config/arm/arm.md (addsi3_compare_op2): Make the order of
	assembly pattern consistent with constraint order.

2015-12-07  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r230409.
	2015-11-16  James Greenhalgh  <james.greenhalgh@arm.com>

	* config/aarch64/aarch64.c (cortexa57_branch_costs): New.
	(cortexa57_tunings): Use it.

2015-12-07  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r230452.
	2015-11-16  Thomas Preud'homme <thomas.preudhomme@arm.com>

	PR 56036
	* doc/invoke.texi (Optimize Options): Move @end table to the right
	place.

2015-12-07  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r230430.
	2015-11-16  Jim Wilson  <jim.wilson@linaro.org>

	* config/arm/t-aprofile (MULTILIB_MATCHES): Add lines for exynos-m1
	and qdf24xx and xgene1 to match -march=armv8-a.

2015-12-07  Yvan Roux  <yvan.roux@linaro.org>

	gcc/testsuite/
	Backport from trunk r230421.
	2015-11-16  Alan Lawrence  <alan.lawrence@arm.com>

	* gcc.target/aarch64/vclz.c: Correctly place INHIB_OPTIMIZATION.

2015-12-07  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r230326.
	2015-11-13  Segher Boessenkool  <segher@kernel.crashing.org>
	            Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* combine.c (subst): Don't substitute or simplify when
	handling register-wise widening multiply.
	(force_to_mode): Likewise.

	gcc/testsuite/
	Backport from trunk r230326.
	2015-11-13  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* gcc.target/aarch64/umaddl_combine_1.c: New test.

2015-12-07  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r230268.
	2015-11-12  Jim Wilson  <jim.wilson@linaro.org>

	* config/aarch64/aarch64-cores.def (qdf24xx): New.
	* config/aarch64/aarch64-tune.md: Regenerated.
	* config/arm/arm-cores.def (qdf24xx): New.
	* config/arm/arm-tables.opt, config/arm/arm-tune.md: Regenerated.
	* config/arm/bpabi.h (BE8_LINK_SPEC): Add qdf24xx support.
	* doc/invoke.texi (AArch64 Options/-mtune): Add "qdf24xx".
	(ARM Options/-mtune); Likewise.

2015-12-03  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r230158.
	2015-11-11  Jiong Wang  <jiong.wang@arm.com>
	    Jim Wilson  <wilson@gcc.gnu.org>

	PR target/67305
	* config/arm/arm.md (neon_vector_mem_operand): Return FALSE if strict
	be true and eliminable registers mentioned.

2015-12-03  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r230150.
	2015-11-11  Richard Biener  <rguenth@gcc.gnu.org>
	    Jiong Wang	    <jiong.wang@arm.com>

	PR tree-optimization/68234
	* tree-vrp.c (vrp_visit_phi_node): Extend SCEV check to those loop PHI
	node which estimiated to be VR_VARYING initially.

	gcc/testsuite/
	Backport from trunk r230150.
	2015-11-11  Richard Biener  <rguenth@gcc.gnu.org>
	    Jiong Wang	    <jiong.wang@arm.com>

	* gcc.dg/tree-ssa/pr68234.c: New testcase.

2015-12-03  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r230115.
	2015-11-10  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config/arm/arm.c (neon_valid_immediate): Remove integer
	CONST_DOUBLE handling.  It should never occur.

2015-12-02  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r230114.
	2015-11-10  Matthew Wahab  <matthew.wahab@arm.com>

	* config/aarch64/atomics.md (unspecv): Move to iterators.md.
	(ATOMIC_LDOP): Likewise.
	(atomic_ldop): Likewise.
	* config/aarch64/iterators.md (unspecv): Moved from atomics.md.
	(ATOMIC_LDOP): Likewise.
	(atomic_ldop): Likewise.

2015-12-02  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r230088.
	2015-11-10  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	PR rtl-optimization/68236
	* haifa-sched.c (autopref_multipass_dfa_lookahead_guard): Return 0
	if insn_queue doesn't exist.
	(haifa_sched_finish): Reset insn_queue to NULL.

2015-12-02  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r230030.
	2015-11-09  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config/aarch64/aarch64.c (aarch64_simd_valid_immediate):
	Remove integer CONST_DOUBLE handling.  It should never occur.

2015-12-02  Yvan Roux  <yvan.roux@linaro.org>

	gcc/testsuite/
	Backport from trunk r230010.
	2015-11-09  Thomas Preud'homme  <thomas.preudhomme@arm.com>

	* gcc.target/arm/thumb2-slow-flash-data.c: Add missing typespec for
	labelref and check use of constant pool by looking for .word and
	similar directives.

2015-12-02  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r229875.
	2015-11-06  Ramana Radhakrishnan  <ramana.radhakrishnan@arm.com>

	* config/arm/arm-ldmstm.ml: Rewrite to generate unified asm templates.
	* config/arm/arm.c (arm_asm_trampoline_template): Make unified asm safe.
	(arm_output_multireg_pop): Likewise.
	(output_move_double):  Likewise.
	(output_move_quad):  Likewise.
	(output_return_instruction): Likewise.
	(arm_print_operand): Remove support for %( and %. print modifiers.
	(arm_output_shift): Make unified asm.
	(arm_declare_function_name): Likewise.
	* config/arm/arm.h (TARGET_UNIFIED_ASM): Delete.
	(ASM_APP_OFF): Adjust.
	(ASM_OUTPUT_REG_PUSH): Undo special casing for TARGET_ARM.
	(ASM_OUTPUT_REG_POP): Likewise.
	* config/arm/arm.md: Adjust uses of %., %(, %)
	* config/arm/sync.md: Likewise.
	* config/arm/thumb2.md: Likewise.
	* config/arm/ldmstm.md: Regenerate.
	* config/arm/arm.opt (masm-unified-syntax): Do not special case Thumb.
	* doc/invoke.texi (masm-unified-syntax): Update documentation.

	gcc/testsuite/
	Backport from trunk r229875.
	2015-11-06  Ramana Radhakrishnan  <ramana.radhakrishnan@arm.com>

	* gcc.target/arm/combine-movs.c: Adjust for unified asm.
	* gcc.target/arm/interrupt-1.c: Likewise.
	* gcc.target/arm/interrupt-2.c: Likewise.
	* gcc.target/arm/unaligned-memcpy-4.c: Likewise.

	gcc/testsuite/
	Backport from trunk r230223.
	2015-11-12  Christian Bruel  <christian.bruel@st.com>

	* gcc.target/arm/mmx-1.c: Adjust for unified asm.

2015-12-02  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r229845.
	2015-11-06  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	PR target/68088
	* config/arm/aarch-common.c (aarch_accumulator_forwarding): Strip
	subregs from accumulator and make sure it's a register.

	gcc/testsuite/
	Backport from trunk r229845.
	2015-11-06  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	PR target/68088
	* gcc.dg/pr68088_1.c: New test.

2015-11-30  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r227748.
	2015-09-14  Ramana Radhakrishnan  <ramana.radhakrishnan@arm.com>

	    	PR target/63304
	    	* config/aarch64/aarch64.c (aarch64_expand_mov_immediate): Handle
	    	nopcrelative_literal_loads.
	    	(aarch64_classify_address): Likewise.
	    	(aarch64_constant_pool_reload_icode): Define.
	    	(aarch64_secondary_reload): Handle secondary reloads for
	    	literal pools.
	    	(aarch64_override_options): Handle nopcrelative_literal_loads.
	    	(aarch64_classify_symbol): Handle nopcrelative_literal_loads.
	    	* config/aarch64/aarch64.md (aarch64_reload_movcp<GPF_TF:mode><P:mode>):
	    	Define.
	    	(aarch64_reload_movcp<VALL:mode><P:mode>): Likewise.
	    	* config/aarch64/aarch64.opt (mpc-relative-literal-loads): New option.
	    	* config/aarch64/predicates.md (aarch64_constant_pool_symref): New
	    	predicate.
	    	* doc/invoke.texi (mpc-relative-literal-loads): Document.

	gcc/
	Backport from trunk r229160.
	2015-10-22  Ramana Radhakrishnan  <ramana.radhakrishnan@arm.com>

	PR target/63304
	* config/aarch64/aarch64.c (aarch64_nopcrelative_literal_loads): New.
	(aarch64_expand_mov_immediate): Use aarch64_nopcrelative_literal_loads.
	(aarch64_classify_address): Likewise.
	(aarch64_secondary_reload): Likewise.
	(aarch64_override_options_after_change_1): Adjust.
	* config/aarch64/aarch64.md (aarch64_reload_movcp<GPF_TF:mode><P:mode>):
	Use aarch64_nopcrelative_literal_loads.
	(aarch64_reload_movcp<VALL:mode><P:mode>): Likewise.
	* config/aarch64/aarch64-protos.h (aarch64_nopcrelative_literal_loads): Declare

	gcc/testsuite/
	Backport from trunk r229160.
	2015-10-22  Jiong Wang  <jiong.wang@arm.com>
	    Ramana Radhakrishnan  <ramana.radhakrishnan@arm.com>

	PR target/63304
	* gcc.target/aarch64/pr63304_1.c: New test.

	gcc/testsuite/
	Backport from trunk r229161.
	2015-10-22  Andre Vieira  <andre.simoesdiasvieira@arm.com>

	PR testsuite/67948
	* gcc.target/arm/xor-and.c: Adjust test to check for eor
	instead of orr.

2015-11-30  Yvan Roux  <yvan.roux@linaro.org>

	gcc/testsuite/
	Backport from trunk r228395.
	2015-10-02  Jiong Wang  <jiong.wang@arm.com>

	* gcc.target/aarch64/tlsle12_tiny_1.c: New testcase for tiny model.
	* gcc.target/aarch64/tlsle24_tiny_1.c: Likewise.
	* gcc.target/aarch64/tlsle_sizeadj_tiny_1.c: TLS size truncation test
	for tiny model.
	* gcc.target/aarch64/tlsle_sizeadj_small_1.c: TLS size truncation test
	for small model.

2015-11-26  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r226447.
	2015-07-31  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config/arm/arm.md (*if_neg_move): Convert to insn_and_split.
	Enable for TARGET_32BIT.
	(*if_move_neg): Likewise.

	gcc/
	Backport from trunk r227585.
	2015-09-09  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config/aarch64/aarch64.md (mod<mode>3): New define_expand.
	(*neg<mode>2_compare0): Rename to...
	(neg<mode>2_compare0): ... This.
	* config/aarch64/aarch64.c (aarch64_rtx_costs, MOD case):
	Move check for speed inside the if-then-elses.  Reflect
	CSNEG sequence in MOD by power of 2 case.

	gcc/
	Backport from trunk r227586.
	2015-09-09  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config/arm/arm.md (*subsi3_compare0): Rename to...
	(subsi3_compare0): ... This.
	(modsi3): New define_expand.
	* config/arm/arm.c (arm_new_rtx_costs, MOD case): Handle case
	when operand is power of 2.

	gcc/testsuite/
	Backport from trunk r227586.
	2015-09-09  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* gcc.target/aarch64/mod_2.x: New file.
	* gcc.target/aarch64/mod_256.x: Likewise.
	* gcc.target/arm/mod_2.c: New test.
	* gcc.target/arm/mod_256.c: Likewise.
	* gcc.target/aarch64/mod_2.c: Likewise.
	* gcc.target/aarch64/mod_256.c: Likewise.

2015-11-26  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r228482.
	2015-10-05 James Greenhalgh <james.greenhalgh@arm.com>
	   Jiong Wang  <jiong.wang@arm.com>

	* config/aarch64/aarch64.md (tlsie_tiny_sidi): Replace "<w>" with "w".

2015-11-26  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r228092.
	2015-09-24  Jiong Wang  <jiong.wang@arm.com>

	* config/aarch64/aarch64-protos.h (aarch64_symbol_context): Delete.
	* config/aarch64/aarch64.c (aarch64_expand_mov_immediate): Likewise.
	(aarch64_cannot_force_const_mem): Likewise.
	(aarch64_classify_address): Likewise.
	(aarch64_classify_symbolic_expression): Likewise.
	(aarch64_print_operand): Likewise.
	(aarch64_classify_symbol): Likewise.
	(aarch64_mov_operand_p): Likewise.
	* config/aarch64/predicates.md (aarch64_valid_symref): Likewise.
	(aarch64_mov_operand): Likewise.

2015-11-26  Yvan Roux  <yvan.roux@linaro.org>

	gcc/testsuite/
	Backport from trunk r227624.
	2015-09-10  Jiong Wang  <jiong.wang@arm.com>

	* gcc.target/aarch64/pic-small.c (dg-skip-if): Skip tiny and large code
	model.

2015-11-26  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r227294.
	2015-08-28  Jiong Wang  <jiong.wang@arm.com>

	* config/aarch64/aarch64-protos.h (aarch64_symbol_context): Rename
	SYMBOL_SMALL_GOTTPREL to SYMBOL_SMALL_TLSIE.
	(aarch64_symbol_type): Likewise.
	* config/aarch64/aarch64.c (aarch64_load_symref_appropriately):
	Likewise.
	(aarch64_expand_mov_immediate): Likewise.
	(aarch64_print_operand): Likewise.
	(aarch64_classify_tls_symbol): Likewise.

2015-11-26  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r227253.
	2015-08-27  Ramana Radhakrishnan  <ramana.radhakrishnan@arm.com>
	    Andre Vieira  <andre.simoesdiasvieira@arm.com>

	* config/aarch64/aarch64.md (*condjump): Handle functions > 1 MiB.
	(*cb<optab><mode>1): Likewise.
	(*tb<optab><mode>1): Likewise.
	(*cb<optab><mode>1): Likewise.
	* config/aarch64/iterators.md (inv_cb): New code attribute.
	(inv_tb): Likewise.
	* config/aarch64/aarch64.c (aarch64_gen_far_branch): New.
	* config/aarch64/aarch64-protos.h (aarch64_gen_far_branch): New.

	gcc/testsuite/
	Backport from trunk r227253.
	2015-08-27  Andre Vieira  <andre.simoesdiasvieira@arm.com>

	* gcc.target/aarch64/long_branch_1.c: New test.

2015-11-25  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r226309.
	2015-07-28  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config/aarch64/aarch64.c (aarch64_rtx_arith_op_extract_p):
	Handle simple SIGN_EXTEND or ZERO_EXTEND.
	(aarch64_rtx_costs): Properly strip extend or extract before
	passing down to rtx costs again.

2015-11-25  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r227212.
	2015-08-26  Jiong Wang  <jiong.wang@arm.com>

	* config/aarch64/aarch64.opt (mtls-size): New entry.
	* config/aarch64/aarch64.c (initialize_aarch64_tls_size): New function.
	(aarch64_override_options_internal): Call initialize_aarch64_tls_size.
	* doc/invoke.texi (AArch64 Options): Document -mtls-size.

	gcc/
	Backport from trunk r227213.
	2015-08-26  Jiong Wang  <jiong.wang@arm.com>

	* config/aarch64/aarch64-protos.h (aarch64_symbol_type): Rename
	SYMBOL_TLSLE to SYMBOL_TLSLE24.
	* config/aarch64/aarch64.c (aarch64_load_symref_appropriately):
	Likewise.
	(aarch64_expand_mov_immediate): Likewise.
	(aarch64_print_operand): Likewise.
	(aarch64_classify_symbol): Likewise.

	gcc/
	Backport from trunk r227215.
	2015-08-26  Marcus Shawcroft  <marcus.shawcroft@arm.com>
	    Jiong Wang  <jiong.wang@arm.com>

	* config/aarch64/aarch64.c (initialize_aarch64_tls_size): Set default
	tls size for tiny, small, large memory model.
	(aarch64_load_symref_appropriately): Support new symbol types.
	(aarch64_expand_mov_immediate): Likewise.
	(aarch64_print_operand): Likewise.
	(aarch64_classify_tls_symbol): Likewise.
	* config/aarch64/aarch64-protos.h (aarch64_symbol_context): Likewise.
	(aarch64_symbol_type): Likewise.
	* config/aarch64/aarch64.md (tlsle): Deleted.
	(tlsle12_<mode>): New define_insn.
	(tlsle24_<mode>): Likewise.
	(tlsle32_<mode>): Likewise.
	(tlsle48_<mode>): Likewise.
	* doc/sourcebuild.texi (AArch64-specific attributes): Document
	"aarch64_tlsle32".

	gcc/testsuite/
	Backport from trunk r227215.
	2015-08-26  Jiong Wang  <jiong.wang@arm.com>

	* lib/target-supports.exp (check_effective_target_aarch64_tlsle32):
	New test directive.
	* gcc.target/aarch64/tlsle_1.x: New test source.
	* gcc.target/aarch64/tlsle12_1.c: New testcase.
	* gcc.target/aarch64/tlsle24_1.c: Likewise.
	* gcc.target/aarch64/tlsle32_1.c: Likewise.

	gcc/testsuite/
	Backport from trunk r227216.
	2015-08-26  Jiong Wang  <jiong.wang@arm.com>

	* gcc.target/aarch64/tlsle_1.x: Rename to tls_1.x
	* gcc.target/aarch64/aarch64/tlsle12_1.c: Update source file name.
	* gcc.target/aarch64/aarch64/tlsle24_1.c: Likewise.
	* gcc.target/aarch64/aarch64/tlsle32_1.c: Likewise.

	gcc/
	Backport from trunk r227220.
	2015-08-26  Marcus Shawcroft  <marcus.shawcroft@arm.com>
	    Jiong Wang  <jiong.wang@arm.com>

	* config/aarch64/aarch64.md (UNSPEC_GOTTINYTLS): New UNSPEC.
	(tlsie_tiny_<mode>): New define_insn.
	(tlsie_tiny_sidi): Likewise.
	* config/aarch64/aarch64-protos.h (aarch64_symbol_type): Define
	SYMBOL_TINY_TLSIE.
	(aarch64_symbol_context): New comment for SYMBOL_TINY_TLSIE.
	* config/aarch64/aarch64.c (aarch64_load_symref_appropriately): Support
	SYMBOL_TINY_TLSIE.
	(aarch64_expand_mov_immediate): Likewise.
	(aarch64_print_operand): Likewise.
	(arch64_classify_tls_symbol): Likewise.

	gcc/testsuite/
	Backport from trunk r227220.
	2015-08-26  Jiong Wang  <jiong.wang@arm.com>

	* gcc.target/aarch64/tlsie_tiny_1.c: New testcase.

2015-11-25  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r223003.
	2015-05-11  Alexander Monakov  <amonakov@ispras.ru>

	* calls.c (prepare_call_address): Transform PLT call to GOT lookup and
	indirect call by forcing address into a pseudo with -fno-plt.
	* common.opt (flag_plt): New option.
	* doc/invoke.texi (Code Generation Options): Add -fno-plt.
	([-fno-plt]): Document.

	gcc/
	Backport from trunk r224138.
	2015-06-04  Sriraman Tallam  <tmsriram@google.com>

	* c-family/c-common.c (noplt): New attribute.
	(handle_noplt_attribute): New handler.
	* calls.c (prepare_call_address): Check for noplt
	attribute.
	* config/i386/i386.c (ix86_expand_call): Check
	for noplt attribute.
	(ix86_nopic_noplt_attribute_p): New function.
	(ix86_output_call_insn): Output indirect call for non-pic
	no plt calls.
	* doc/extend.texi (noplt): Document new attribute.
	* doc/invoke.texi: Document new attribute.

	gcc/testsuite/
	Backport from trunk r224138.
	2015-06-04  Sriraman Tallam  <tmsriram@google.com>

	* testsuite/gcc.target/i386/noplt-1.c: New test.
	* testsuite/gcc.target/i386/noplt-2.c: New test.
	* testsuite/gcc.target/i386/noplt-3.c: New test.
	* testsuite/gcc.target/i386/noplt-4.c: New test.

	gcc/testsuite/
	Backport from trunk r224578.
	2015-06-17  Uros Bizjak  <ubizjak@gmail.com>

	* gcc.target/i386/noplt-1.c (dg-do): Fix target selector.
	* gcc.target/i386/noplt-2.c (dg-do): Ditto.
	* gcc.target/i386/noplt-3.c (dg-do): Ditto.
	* gcc.target/i386/noplt-4.c (dg-do): ditto.

	gcc/
	Backport from trunk r226681.
	2015-08-06  Jiong Wang  <jiong.wang@arm.com>

	* config/aarch64/aarch64-protos.h (aarch64_is_noplt_call_p): New declaration.
	* config/aarch64/aarch64.c (aarch64_is_noplt_call_p): New function.
	* config/aarch64/aarch64.md (call_value_symbol): Check noplt scenarios.
	(call_symbol): Likewise.

	gcc/testsuite/
	Backport from trunk r226681.
	2015-08-06  Jiong Wang  <jiong.wang@arm.com>

	* gcc.target/aarch64/noplt_1.c: New testcase.
	* gcc.target/aarch64/noplt_2.c: Likewise.

	gcc/
	Backport from trunk r226682.
	2015-08-06  Jiong Wang  <jiong.wang@arm.com>

	* config/aarch64/constraints.md (Usf): Add the test of
	aarch64_is_noplt_call_p.

	gcc/testsuite/
	Backport from trunk r226682.
	2015-08-06  Jiong Wang  <jiong.wang@arm.com>

	* gcc.target/aarch64/noplt_3.c: New testcase.

	gcc/testsuite/
	Backport from trunk r226721.
	2015-08-07  Jiong Wang  <jiong.wang@arm.com>

	* gcc.target/aarch64/noplt_1.c: Check branch type instead of relocation
	modifers.
	* gcc.target/aarch64/noplt_2.c: Likewise.
	* gcc.target/aarch64/noplt_3.c: Likewise.

2015-11-25  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r227005.
	2015-08-19  Jiong Wang  <jiong.wang@arm.com>

	* config/aarch64/aarch64.c (aarch64_load_symref_appropriately): Replace
	whitespaces with tab.

2015-11-25  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r226815.
	2015-08-12  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config/aarch64/aarch64.c (initialize_aarch64_code_model): Break
	after -mcmodel=large -fPIC sorry.

	gcc/testsuite/
	Backport from trunk r226889.
	2015-08-14  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* gcc.target/aarch64/target_attr_5.c: Add static modifier to bar.
	* gcc.target/aarch64/target_attr_8.c: Likewise.
	* gcc.target/aarch64/target_attr_14.c: Likewise.

2015-11-24  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r228197.
	2015-09-28  James Greenhalgh  <james.greenhalgh@arm.com>

	* config/arm/types.md (type): Add rotate_imm.
	* config/aarch64/aarch64.md (*ror<mode>3_insn): Split out the
	ROR immediate case.
	(*rorsi3_insn_uxtw): Likewise.
	* config/aarch64/thunderx.md (thunderx_shift): Add rotate_imm.
	* config/arm/cortex-a53.md (cortex_a53_alu_shift): Add rotate_imm.
	* config/arm/cortex-a57.md (cortex_a53_alu): Add rotate_imm.

	gcc/
	Backport from trunk r228324, r228325.
	2015-10-01  James Greenhalgh  <james.greenhalgh@arm.com>

	* config/arm/aarch-common-protos.h
	(aarch_accumulator_forwarding): New.
	(aarch_forward_to_shift_is_not_shifted_reg): Likewise.
	* config/arm/aarch-common.c (aarch_accumulator_forwarding): New.
	(aarch_forward_to_shift_is_not_shifted_reg): Likewise.
	* config/arm/cortex-a53.md: Rewrite.

	gcc/
	Backport from trunk r228547.
	2015-10-07  Kugan Vivekanandarajah  <kuganv@linaro.org>

	* config/aarch64/iterators.md (vwcore): Add missing cases for
	 V4HF/V8HF modes.

	gcc/testsuite/
	Backport from trunk r228547.
	2015-10-07  Kugan Vivekanandarajah  <kuganv@linaro.org>

	* gcc.target/aarch64/get_lane_f16_1.c: New test.

2015-11-23  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r225013.
	2015-06-26  Jiong Wang  <jiong.wang@arm.com>

	* config/aarch64/aarch64-protos.h (aarch64_symbol_type): Rename
	SYMBOL_SMALL_GOT to SYMBOL_SMALL_GOT_4G.
	* config/aarch64/aarch64.c (aarch64_load_symref_appropriately): Ditto.
	(aarch64_expand_mov_immediate): Ditto.
	(aarch64_print_operand): Ditto.
	(aarch64_classify_symbol): Ditto.

	gcc/
	Backport from trunk r225017.
	2015-06-26  Jiong Wang  <jiong.wang@arm.com>

	* config/aarch64/aarch64-protos.h (aarch64_symbol_type): New type
	SYMBOL_SMALL_GOT_28K.
	* config/aarch64/aarch64.md: (ldr_got_small_<mode>): Support new GOT
	relocation modifiers.
	(unspec): New enum "UNSPEC_GOTMALLPIC28K.
	(ldr_got_small_28k_<mode>): New.
	(ldr_got_small_28k_sidi): New.
	* config/aarch64/iterators.md (got_modifier): New mode iterator.
	* config/aarch64/aarch64-otps.h (aarch64_code_model): New model.
	* config/aarch64/aarch64.c (aarch64_load_symref_appropriately): Support
	SYMBOL_SMALL_GOT_28K.
	(aarch64_rtx_costs): Add costs for new instruction sequences.
	(initialize_aarch64_code_model): Initialize new model.
	(aarch64_classify_symbol): Recognize new model and new symbol classification.
	(aarch64_asm_preferred_eh_data_format): Support new model.
	(aarch64_load_symref_appropriately): Generate new instruction
	sequences for -fpic.
	(TARGET_USE_PSEUDO_PIC_REG): New definition.
	(aarch64_use_pseudo_pic_reg): New function.

	gcc/testsuite/
	Backport from trunk r225017.
	2015-06-26  Jiong Wang  <jiong.wang@arm.com>

	* gcc.target/aarch64/pic-small.c: New testcase.

	gcc/
	Backport from trunk r225231.
	2015-07-01  Jiong Wang  <jiong.wang@arm.com>

	* configure.ac: Add check for aarch64 assembler -fpic relocation
	modifier support.
	* configure: Regenerate.
	* config.in: Regenerate.
	* config/aarch64/aarch64.c (initialize_aarch64_code_model): Fall back
	to -fPIC if not support of -fpic relocation modifier in assembler.

	gcc/
	Backport from trunk r225232.
	2015-07-01  Jiong Wang  <jiong.wang@arm.com>

	* doc/sourcebuild.texi (AArch64-specific attributes): New subsection.
	Document "aarch64_small_fpic".

	gcc/testsuite/
	Backport from trunk r225232.
	2015-07-01  Jiong Wang  <jiong.wang@arm.com>

	* lib/target-supports.exp (check_effective_target_aarch64_small_fpic): New function.
	* gcc.target/aarch64/pic-small.c: Restrict this test under
	check_effective_target_aarch64_small_fpic.

	gcc/
	Backport from trunk r225233.
	2015-07-01  Jiong Wang  <jiong.wang@arm.com>

	* doc/sourcebuild.texi (AArch64-specific attributes): Document
	"aarch64_tiny", "aarch64_small", "aarch64_large",
	"aarch64_little_endian", "aarch64_big_endian".

	gcc/
	Backport from trunk r225581.
	2015-07-08  Jiong Wang  <jiong.wang@arm.com>

	* config/aarch64/aarch64.c (aarch64_unspec_may_trap_p): New function.
	(TARGET_UNSPEC_MAY_TRAP_P): Define as aarch64_unspec_may_trap_p.

	gcc/
	Backport from trunk r225669.
	2015-07-10  Jiong Wang  <jiong.wang@arm.com>

	* config/aarch64/aarch64.c (aarch64_load_symref_appropriately): Mark mem
	as READONLY and NOTRAP for PIC symbol.

	gcc/testsuite/
	Backport from trunk r225669.
	2015-07-10  Jiong Wang  <jiong.wang@arm.com>

	* gcc.target/aarch64/got_mem_hoist_1.c: New test.

	gcc/testsuite/
	Backport from trunk r225999.
	2015-07-20  Jiong Wang  <jiong.wang@arm.com>

	 * gcc.target/aarch64/got_mem_hoist.c (dg-skip-if): Skip tiny and large
	model.

2015-11-20  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r229701.
	2015-11-03  Alan Lawrence  <alan.lawrence@arm.com>

	* config/aarch64/aarch64.md (*movhf_aarch64): Use
	aarch64_reg_or_fp_zero for second operand.

	gcc/testsuite/
	Backport from trunk r229701.
	2015-11-03  Alan Lawrence  <alan.lawrence@arm.com>

	* gcc.target/aarch64/fp16/set_zero_1.c: New.

2015-11-20  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r229583.
	2015-10-30  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config/arm/arm.c (cortex_a9_sched_adjust_cost): Use reg_set_p to
	check for dependencies.

2015-11-20  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r229572.
	2015-10-30  Evandro Menezes  <e.menezes@samsung.com>

	* config/aarch64/aarch64.md (*movhf_aarch64): Change the type of
	"mov %0.h[0], %1.h[0] to "neon_move".
	(*movtf_aarch64): Change the type of "fmov %s0, wzr" to "f_mcr".
	(*cmov<mode>_insn): Change the types of "mov %<w>0, {-1,1}" to
	"mov_imm".
	(*cmovsi_insn_uxtw): Likewise.

2015-11-20  Yvan Roux  <yvan.roux@linaro.org>

	libgcc/
	Backport from trunk r229529.
	2015-10-29  Christophe Lyon  <christophe.lyon@linaro.org>

	* config.host (arm*-*-eabi*, arm*-*-symbianelf*, arm*-*-rtems*):
	Include crtfastmath.o.

2015-11-20  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r229514.
	2015-10-29  Bin Cheng  <bin.cheng@arm.com>

	* tree-ssa-loop-ivopts.c (split_address_cost): Check depends_on.
	(get_computation_cost_at): Ditto.
	(determine_use_iv_cost_address): Pass NULL for arguments depends_on
	and inv_expr_id.

2015-11-20  Yvan Roux  <yvan.roux@linaro.org>

	gcc/c/
	Backport from trunk r229505.
	2015-10-26  Jim Wilson  <jim.wilson@linaro.org>

	PR debug/66068
	* c-typeck.c (c_build_qualified_type): Clear C_TYPE_INCOMPLETE_VARS
	after calling build_qualified_type.

	gcc/testsuite/
	Backport from trunk r229505.
	2015-10-26  Jim Wilson  <jim.wilson@linaro.org>

	PR debug/66068
	* gcc.dg/debug/pr66068.c: New test.

2015-11-20  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r229454.
	2015-10-27  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config/aarch64/aarch64.c (aarch64_output_simd_mov_immediate):
	Handle floating point inner modes properly.

2015-11-19  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r229431.
	2015-10-27  Evandro Menezes  <e.menezes@samsung.com>

	* config/aarch64/aarch64-protos.h (cpu_addrcost_table): Split member
	for register extension into sign and zero register extension.
	* config/aarch64/aarch64.c (generic_addrcost_table): Infer values
	for sign and zero register extension.
	(cortexa57_addrcost_table): Likewise.
	(xgene1_addrcost_table): Likewise.

2015-11-19  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r229402.
	2015-10-27  Bin Cheng  <bin.cheng@arm.com>

	* loop-invariant.c (struct def): New field can_prop_to_addr_uses.
	(inv_can_prop_to_addr_use): New function.
	(record_use): Call can_prop_to_addr_uses, set the new field.
	(get_inv_cost): Count cost if inv can't be propagated into its
	address uses.

2015-11-18  Yvan Roux  <yvan.roux@linaro.org>

	gcc/testsuite/
	Backport from trunk r229134.
	2015-10-21  Alan Lawrence  <alan.lawrence@arm.com>

	* gcc.dg/tree-ssa/sra-12.c: Enable test on all targets; add --param
	sra-max-scalarization-size-Ospeed.

2015-11-18  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r227369.
	2015-09-01  David Sherwood  <david.sherwood@arm.com>

	* genmodes.c: Add CONST_MODE_UNIT_SIZE modifier.

2015-11-18  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r226987.
	2015-08-18  Richard Sandiford  <richard.sandiford@arm.com>

	PR rtl-optimization/67218
	* simplify-rtx.c (exact_int_to_float_conversion_p): New function.
	(simplify_unary_operation_1): Use it.

	gcc/testsuite/
	Backport from trunk r226987.
	2015-08-18  Richard Sandiford  <richard.sandiford@arm.com>

	PR rtl-optimization/67218
	* gcc.c-torture/execute/ieee/pr67218.c,
	gcc.target/aarch64/fcvt_int_float_double1.c,
	gcc.target/aarch64/fcvt_int_float_double2.c,
	gcc.target/aarch64/fcvt_int_float_double3.c,
	gcc.target/aarch64/fcvt_int_float_double4.c,
	gcc.target/aarch64/fcvt_uint_float_double1.c,
	gcc.target/aarch64/fcvt_uint_float_double2.c,
	gcc.target/aarch64/fcvt_uint_float_double3.c,
	gcc.target/aarch64/fcvt_uint_float_double4.c: New tests.

2015-11-18  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r225537.
	2015-07-08  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config/arm/arm.c (arm_new_rtx_costs): Initialise cost to
	COSTS_N_INSNS (1) and increment it appropriately throughout the
	function.

2015-11-16  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r222767.
	2015-05-04  Uros Bizjak  <ubizjak@gmail.com>

	* config/i386/i386.h (TARGET_SUPPORTS_WIDE_INT): New define.
	* config/i386/i386.c (ix86_legitimate_constant_p): Handle TImode
	as CONST_WIDE_INT, not CONST_DOUBLE.
	(ix86_cannot_force_const_mem): Handle CONST_WIDE_INT.
	(output_pic_addr_const): Do not handle VOIDmode CONST_DOUBLEs.
	(ix86_find_base_term): Do not check for CONST_DOUBLE.
	(ix86_print_operand): Do not handle non-FPmode CONST_DOUBLEs.
	(ix86_build_signbit_mask): Rewrite using wide ints.
	(ix86_split_to_parts) [HOST_BITS_PER_WIDE_INT < 64]: Remove.
	(ix86_rtx_costs): Handle CONST_WIDE_INT.
	(find_constant): Ditto.
	* config/i386/i386.md (bts, btr, btc peepholes): Rewrite
	using gen_int_mode.
	* config/i386/predicates.md (x86_64_immediate_operand)
	<case CONST_INT>: Remove HOST_BITS_PER_WIDE_INT == 32 code.
	(x86_64_zext_immediate_operand): Remove CONST_DOUBLE handling.
	<case CONST_INT>: Remove HOST_BITS_PER_WIDE_INT == 32 code.
	(const0_operand): Also match const_wide_int.
	(constm1_operand): Ditto.
	(const1_operand): Ditto.

	gcc/
	Backport from trunk r226328.
	2015-07-28  David Sherwood  <david.sherwood@arm.com>

	* config/arm/arm.c (neon_element_bits, neon_valid_immediate): Call
	GET_MODE_INNER unconditionally.
	* config/spu/spu.c (arith_immediate_p): Likewise.
	* config/i386/i386.c (ix86_build_signbit_mask): Likewise.
	* expmed.c (synth_mult): Remove check for VOIDmode result from
	GET_MODE_INNER.
	(expand_mult_const): Likewise.
	* fold-const.c (fold_binary_loc): Replace call to element_precision
	with call to GET_MODE_PRECISION.
	* genmodes.c (emit_mode_inner_inline): Replace void_mode->name with
	m->name.
	(emit_mode_inner): Likewise.
	* lto-streamer-out.c (lto_write_mode_table): Update GET_MODE_INNER
	result check.
	* machmode.h (GET_MODE_UNIT_SIZE): Simplify.
	(GET_MODE_UNIT_PRECISION): Likewise.
	* rtlanal.c (subreg_get_info): Call GET_MODE_INNER unconditionally.
	* simplify-rtx.c (simplify_immed_subreg): Likewise.
	* stor-layout.c (bitwise_type_for_mode): Update assert.
	(element_precision): Remove.

	gcc/
	Backport from trunk r226403.
	2015-07-30  David Sherwood  <david.sherwood@arm.com>

	* config/aarch64/aarch64-simd.md (aarch64_ext<mode>): Replace call to
	GET_MODE_SIZE (GET_MODE_INNER (m)) with GET_MODE_UNIT_SIZE (m).
	* config/aarch64/aarch64.c (aarch64_simd_valid_immediate): Likewise.
	* config/arm/arm.c (neon_valid_immediate): Likewise.
	* config/i386/i386.c (classify_argument, ix86_expand_int_vcond)
	(expand_vec_perm_blend, expand_vec_perm_pshufb): Likewise.
	(expand_vec_perm_pshufb2, expand_vec_perm_vpshufb2_vpermq): Likewise.
	(expand_vec_perm_vpshufb2_vpermq): Likewise.
	(expand_vec_perm_vpshufb2_vpermq_even_odd): Likewise.
	(expand_vec_perm_vpshufb4_vpermq2): Likewise.
	* config/i386/sse.md
	(<extract_type>_vinsert<shuffletype><extract_suf>_mask): Likewise.
	(*ssse3_palignr<mode>_perm): Likewise.
	* config/rs6000/rs6000.c (rs6000_complex_function_value): Likewise.
	* config/spu/spu.c (arith_immediate_p): Likewise.
	* simplify-rtx.c (simplify_const_unary_operation): Likewise.
	(simplify_binary_operation_1, simplify_ternary_operation): Likewise.

	gcc/
	Backport from trunk r226936.
	2015-08-17  David Sherwood  <david.sherwood@arm.com>

	* config/arm/arm.c (neon_element_bits): Replace call to
	GET_MODE_BITSIZE (GET_MODE_INNER (m)) with GET_MODE_UNIT_BITSIZE (m).
	* config/arm/neon.md (neon_vget_lane<mode>): Likewise.
	(neon_vget_laneu<mode>, neon_vset_lane<mode>): Likewise
	(neon_vdup_lane<mode>): Likewise.
	* config/i386/i386.c (ix86_expand_int_vcond): Likewise.
	(ix86_expand_multi_arg_builtin, ix86_expand_reduc): Likewise.
	(expand_vec_perm_palignr, ix86_expand_sse2_abs): Likewise.
	* config/rs6000/rs6000.c (rs6000_do_expand_vec_perm): Likewise.
	* config/spu/spu.c (arith_immediate_p): Likewise.
	* expmed.c (store_bit_field_1, extract_bit_field_1): Likewise.
	* expr.c (expand_expr_real_2): Likewise.
	* optabs.c (shift_amt_for_vec_perm_mask): Likewise.
	* simplify-rtx.c (simplify_immed_subreg): Likewise.
	* tree-cfg.c (verify_gimple_assign_ternary): Likewise.
	* tree-vect-patterns.c (vect_recog_mixed_size_cond_pattern): Likewise.
	New variable.
	* fold-const.c (fold_binary_loc): Replace call to
	GET_MODE_PRECISION (GET_MODE_INNER (m)) with
	GET_MODE_UNIT_PRECISION (m).

	gcc/
	Backport from trunk r227013.
	2015-08-19  David Sherwood  <david.sherwood@arm.com>

	* genmodes.c (emit_mode_unit_size_inline): New function.
	(emit_mode_unit_precision_inline): New function.
	(emit_insn_modes_h): Emit new #define.  Emit new functions.
	(emit_mode_unit_size): New function.
	(emit_mode_unit_precision): New function.
	(emit_mode_adjustments): Add mode_unit_size adjustments.
	(emit_insn_modes_c): Emit new arrays.
	* machmode.h (GET_MODE_UNIT_SIZE, GET_MODE_UNIT_PRECISION): Update to
	use new inline methods.

2015-11-13  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	* LINARO-VERSION: Bump version number, post snapshot.

2015-11-13  Yvan Roux  <yvan.roux@linaro.org>

	Make Linaro GCC Snapshot 5.2-2015.11.

	gcc/
	* LINARO-VERSION: Update.

2015-11-12  Yvan Roux  <yvan.roux@linaro.org>

	Merge branches/gcc-5-branch rev 230068.

2015-11-12  Yvan Roux  <yvan.roux@linaro.org>

	gcc/testsuite/
	* gcc.dg/graphite/uns-block-1.c: Fix for cleanup-tree-dump
	removal.
	* gcc.dg/graphite/uns-interchange-12.c: Likewise.
	* gcc.dg/graphite/uns-interchange-14.c: Likewise.
	* gcc.dg/graphite/uns-interchange-15.c: Likewise.
	* gcc.dg/graphite/uns-interchange-9.c: Likewise.
	* gcc.dg/graphite/uns-interchange-mvt.c: Likewise.
	* gcc.dg/tree-ssa/vrp97.c: Likewise.

2015-11-09  Yvan Roux  <yvan.roux@linaro.org>

	gcc/testsuite/
	Backport from trunk r229080.
	2015-10-20  Alan Lawrence  <alan.lawrence@arm.com>

	* gcc.target/aarch64/vdiv_f.c: Use __builtin_nan.

2015-11-09  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r229094.
	2015-10-20  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config/aarch64/aarch64.c (aarch64_mode_valid_for_sched_fusion_p):
	New function.
	(fusion_load_store): Use it.
	* config/aarch64/aarch64-ldpstp.md: Add new peephole2s for
	ldp and stp in VD modes.
	* config/aarch64/aarch64-simd.md (load_pair<mode>, VD): New pattern.
	(store_pair<mode>, VD): Likewise.

	gcc/testsuite/
	Backport from trunk r229094.
	2015-10-20  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* gcc.target/aarch64/stp_vec_64_1.c: New test.
	* gcc.target/aarch64/ldp_vec_64_1.c: Likewise.

2015-11-05  Yvan Roux  <yvan.roux@linaro.org>

	gcc/testsuite/
	Backport from trunk r228963.
	2015-10-19  Richard Sandiford  <richard.sandiford@arm.com>

	* gcc.dg/builtins-20.c: Remove undefined behavior.

2015-11-05  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r228716.
	2015-10-12  Christophe Lyon  <christophe.lyon@linaro.org>

	* config/aarch64/aarch64-simd-builtins.def: Update builtins
	tables: add tbl3 and tbx4.
	* config/aarch64/aarch64-simd.md (aarch64_tbl3v8qi): New.
	(aarch64_tbx4v8qi): New.
	* config/aarch64/arm_neon.h (vtbl3_s8, vtbl3_u8, vtbl3_p8)
	(vtbl4_s8, vtbl4_u8, vtbl4_p8, vtbx4_s8, vtbx4_u8, vtbx4_p8):
	Rewrite using builtin functions.
	* config/aarch64/iterators.md (UNSPEC_TBX): New.

	gcc/testsuite/
	Backport from trunk r228762.
	2015-10-13  Christophe Lyon  <christophe.lyon@linaro.org>

	* gcc/testsuite/gcc.target/aarch64/table-intrinsics.c: Fix regexp
	after r228716 (Fix vtbl[34] and vtbx4).

2015-11-05  Yvan Roux  <yvan.roux@linaro.org>

	libstdc++-v3/
	Backport from trunk r228844.
	2015-10-15  Szabolcs Nagy  <szabolcs.nagy@arm.com>

	* testsuite/lib/libstdc++.exp (libstdc++-dg-test): Check for
	unsupported compiler output.

2015-11-05  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r228962.
	2015-10-19  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* sched-int.h (struct autopref_multipass_data_): Remove offset
	field.  Add min_offset, max_offset, multi_mem_insn_p fields.
	* haifa-sched.c (analyze_set_insn_for_autopref): New function.
	(autopref_multipass_init): Use it.  Handle PARALLEL sets.
	(autopref_rank_data): New function.
	(autopref_rank_for_schedule): Use it.
	(autopref_multipass_dfa_lookahead_guard_1): Likewise.

2015-11-05  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r228662.
	2015-10-09  Renlin Li  <renlin.li@arm.com>

	* config/arm/neon.md (neon_vuzp<mode>_insn): Add & modifier for
	operands[0] and operands[2].
	(neon_vtrn<mode>_insn): Likewise.
	(neon_vzip<mode>_insn): Likewise.

2015-11-04  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r228374.
	2015-10-02  James Greenhalgh  <james.greenhalgh@arm.com>

	* config/aarch64/aarch64-simd.md (*aarch64_combinez<mode>): Add
	alternatives for reads from memory and moves from general-purpose
	registers.
	(*aarch64_combinez_be<mode>): Likewise.

	gcc/testsuite/
	Backport from trunk r228374.
	2015-10-02  James Greenhalgh  <james.greenhalgh@arm.com>

	* gcc.target/aarch64/vect_combine_zeroes_1.c: New.

2015-11-04  Yvan Roux  <yvan.roux@linaro.org>

	gcc/testsuite/
	Backport from trunk r225732.
	2015-07-13  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* gcc.target/aarch64/adds3.c: Adjust for more aggressive
	if-conversion..
	* gcc.target/aarch64/adds1.c: Likewise.
	* gcc.target/aarch64/ands_1.c: Likewise.
	* gcc.target/aarch64/bics_1.c: Likewise.
	* gcc.target/aarch64/subs1.c: Likewise.
	* gcc.target/aarch64/subs3.c: Likewise.

2015-11-04  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r227776.
	2015-09-15  Bin Cheng  <bin.cheng@arm.com>

	* tree-ssa-loop-ivopts.c (get_shiftadd_cost): Strip
	unnecessary type conversion in op1.

2015-11-04  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r227028.
	2015-08-20  James Greenhalgh  <james.greenhalgh@arm.com>

	* common/config/aarch64/aarch64-common.c
	(AARCH64_CPU_NAME_LENGTH): Delete.
	(aarch64_option_extension): New.
	(all_extensions): Likewise.
	(processor_name_to_arch): Likewise.
	(arch_to_arch_name): Likewise.
	(all_cores): New.
	(all_architectures): Likewise.
	(aarch64_get_extension_string_for_isa_flags): Likewise.
	(aarch64_rewrite_selected_cpu): Change to rewrite CPU names to
	architecture names.
	* config/aarch64/aarch64-protos.h
	(aarch64_get_extension_string_for_isa_flags): New.
	* config/aarch64/aarch64.c (aarch64_print_extension): Delete.
	(aarch64_option_print): Get the string to print from
	aarch64_get_extension_string_for_isa_flags.
	(aarch64_declare_function_name): Likewise.
	* config/aarch64/aarch64.h (BIG_LITTLE_SPEC): Rename to...
	(MCPU_TO_MARCH_SPEC): This.
	(ASM_CPU_SPEC): Use it.
	(BIG_LITTLE_SPEC_FUNCTIONS): Rename to...
	(MCPU_TO_MARCH_SPEC_FUNCTIONS): ...This.
	(EXTRA_SPEC_FUNCTIONS): Use it.

2015-11-03  Yvan Roux  <yvan.roux@linaro.org>

	gcc/testsuite/
	Backport from trunk r226886.
	2015-08-14  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* gcc.target/aarch64/target_attr_1.c: Make test compile-only.

2015-11-03  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r226966.
	2015-08-18  Bin Cheng  <bin.cheng@arm.com>

	* tree-ssa-loop-niter.c (refine_value_range_using_guard): New.
	(determine_value_range): Call refine_value_range_using_guard for
	each loop initial condition to improve value range.

	gcc/testsuite/
	Backport from trunk r226966.
	2015-08-18  Bin Cheng  <bin.cheng@arm.com>

	* gcc.dg/tree-ssa/loop-bound-1.c: New test.
	* gcc.dg/tree-ssa/loop-bound-3.c: New test.
	* gcc.dg/tree-ssa/loop-bound-5.c: New test.

	gcc/
	Backport from trunk r227055.
	2015-08-21  Bin Cheng  <bin.cheng@arm.com>

	* tree-ssa-loop-niter.c (simplify_using_initial_conditions): Break
	loop if EXPR is simplified to const value.

2015-11-03  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r225859.
	2015-07-16  Bin Cheng  <bin.cheng@arm.com>

	* tree-ssa-loop-ivopts.c (add_candidate): Remove call to
	add_autoinc_candidates.
	(add_iv_candidate_for_biv): Rename to add_iv_candidate_for_biv.
	(add_iv_candidate_for_biv): Rename from add_iv_candidate_for_biv.
	(add_old_ivs_candidates): Rename to add_iv_candidate_for_bivs.
	(add_iv_candidate_for_bivs): Rename from add_old_ivs_candidates.
	Call new function.
	(add_iv_value_candidates): Rename to add_iv_candidate_for_use.
	(add_iv_candidate_for_use): Rename from add_iv_value_candidates.
	Remove parameter struct iv*.  Call add_autoinc_candidates here.
	(add_derived_ivs_candidates): Rename to add_iv_candidate_for_uses.
	(add_iv_candidate_for_uses): Rename from add_derived_ivs_candidates.
	Call new function.
	(find_iv_candidates): Call new functions.

2015-11-03  Yvan Roux  <yvan.roux@linaro.org>

	gcc/testsuite/
	Backport from trunk r225443.
	2015-07-06  Bin Cheng  <bin.cheng@arm.com>

	PR tree-optimization/66720
	* gcc.dg/vect/pr48052.c: Use dg-require-effective-target
	vect_int_mult.

2015-11-03  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r222970.
	2015-05-09  Marc Glisse  <marc.glisse@inria.fr>

	PR tree-optimization/64454
	* tree-vrp.c (extract_range_from_binary_expr_1) <TRUNC_MOD_EXPR>:
	Rewrite.

	gcc/testsuite/
	Backport from trunk r222970.
	2015-05-09  Marc Glisse  <marc.glisse@inria.fr>

	PR tree-optimization/64454
	* gcc.dg/tree-ssa/vrp97.c: New file.
	* gcc.dg/vect/slp-perm-7.c: Update.

	gcc/
	Backport from trunk r225311.
	2015-07-02  Alan Lawrence  <alan.lawrence@arm.com>

	* tree-pass.h (make_pass_ch_vect): New.
	* passes.def: Add pass_ch_vect just before pass_if_conversion.

	* tree-ssa-loop-ch.c (ch_base, pass_ch_vect, pass_data_ch_vect,
	pass_ch::process_loop_p, pass_ch_vect::process_loop_p,
	make_pass_ch_vect): New.
	(pass_ch): Extend ch_base.

	(pass_ch::execute): Move all but loop_optimizer_init/finalize to...
	(ch_base::copy_headers): ...here.

	gcc/testsuite/
	Backport from trunk r225311.
	2015-07-02  Alan Lawrence  <alan.lawrence@arm.com>

	* gcc.dg/vect/vect-strided-a-u16-i4.c (main1): Narrow scope of x,y,z,w.
	* gcc.dg/vect/vect-ifcvt-11.c: New testcase.

2015-11-03  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r224009.
	2015-06-02  Bin Cheng  <bin.cheng@arm.com>

	PR tree-optimization/52563
	PR tree-optimization/62173
	* tree-ssa-loop-ivopts.c (struct iv): New field.  Reorder fields.
	(alloc_iv, set_iv): New parameter.
	(determine_biv_step): Delete.
	(find_bivs): Inline original determine_biv_step.  Pass new
	argument to set_iv.
	(idx_find_step): Use no_overflow information for conversion.
	* tree-scalar-evolution.c (analyze_scalar_evolution_in_loop): Let
	resolve_mixers handle folded_casts.
	(instantiate_scev_name): Change bool parameter to bool pointer.
	(instantiate_scev_poly, instantiate_scev_binary): Ditto.
	(instantiate_array_ref, instantiate_scev_not): Ditto.
	(instantiate_scev_3, instantiate_scev_2): Ditto.
	(instantiate_scev_1, instantiate_scev_r): Ditto.
	(instantiate_scev_convert, ): Change parameter.  Pass argument
	to chrec_convert_aggressive.
	(instantiate_scev): Change argument.
	(resolve_mixers): New parameter and set it.
	(scev_const_prop): New argument.
	* tree-scalar-evolution.h (resolve_mixers): New parameter.
	* tree-chrec.c (convert_affine_scev): Call chrec_convert instead
	of chrec_conert_1.
	(chrec_convert): New parameter.  Move definition below.
	(chrec_convert_aggressive): New parameter and set it.  Call
	convert_affine_scev.
	* tree-chrec.h (chrec_convert): New parameter.
	(chrec_convert_aggressive): Ditto.

	gcc/testsuite/
	Backport from trunk r224009.
	2015-06-02  Bin Cheng  <bin.cheng@arm.com>

	PR tree-optimization/52563
	PR tree-optimization/62173
	* gcc.dg/tree-ssa/scev-3.c: Remove xfail.
	* gcc.dg/tree-ssa/scev-4.c: Ditto.

	gcc/
	Backport from trunk r224020.
	2015-06-02  Bin Cheng  <bin.cheng@arm.com>

	PR tree-optimization/48052
	* cfgloop.h (struct control_iv): New.
	(struct loop): New field control_ivs.
	* tree-ssa-loop-niter.c : Include "stor-layout.h".
	(number_of_iterations_lt): Set no_overflow information.
	(number_of_iterations_exit): Init control iv in niter struct.
	(record_control_iv): New.
	(estimate_numbers_of_iterations_loop): Call record_control_iv.
	(loop_exits_before_overflow): New.  Interface factored out of
	scev_probably_wraps_p.
	(scev_probably_wraps_p): Factor loop niter related code into
	loop_exits_before_overflow.
	(free_numbers_of_iterations_estimates_loop): Free control ivs.
	* tree-ssa-loop-niter.h (free_loop_control_ivs): New.

	gcc/testsuite/
	Backport from trunk r224020.
	2015-06-02  Bin Cheng  <bin.cheng@arm.com>

	PR tree-optimization/48052
	* gcc.dg/tree-ssa/scev-8.c: New.
	* gcc.dg/tree-ssa/scev-9.c: New.
	* gcc.dg/tree-ssa/scev-10.c: New.
	* gcc.dg/vect/pr48052.c: New.

	gcc/testsuite/
	Backport from trunk r224055.
	2015-06-03  Bin Cheng  <bin.cheng@arm.com>

	* gcc.dg/tree-ssa/pr65447.c: Increase searching number.

	2015-06-02  Kugan Vivekanandarajah  <kuganv@linaro.org>
	gcc/
	Backport from trunk r224058.
	2015-06-03  Bin Cheng  <bin.cheng@arm.com>

	* tree-ssa-loop-ivopts.c (dump_iv): New parameter.
	(dump_use, dump_cand, find_induction_variables): Pass new argument
	to dump_iv.
	(record_use): Preserve the ssa name information in IV.

	gcc/
	Backport from trunk r224769.
	2015-06-23  Bin Cheng  <bin.cheng@arm.com>

	PR tree-optimization/66449
	* tree-ssa-loop-niter.c (loop_exits_before_overflow): Use
	POINTER_PLUS_EXPR for pointers.

	gcc/testsuite/
	Backport from trunk r224769.
	2015-06-23  Bin Cheng  <bin.cheng@arm.com>

	PR tree-optimization/66449
	* gcc.dg/vect/pr66449.c: New test.

2015-11-02  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r229593.
	2015-10-30  Vladimir Makarov  <vmakarov@redhat.com>

	PR rtl-optimization/68106
	* lra-remat.c (input_regno_present_p): Process hard regs
	explicitly present in machine description insns.
	(call_used_input_regno_present_p): Ditto.
	(calculate_gen_cands): Ditto.
	(do_remat): Ditto.

	gcc/testsuite/
	Backport from trunk r229593.
	2015-10-30  Vladimir Makarov  <vmakarov@redhat.com>

	PR rtl-optimization/68106
	* gcc.target/aarch64/pr68106.c: New.

2015-11-02  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r223858.
	2015-05-29  Bernhard Reutner-Fischer  <aldot@gcc.gnu.org>

	* config/arm/neon-testgen.ml (emit_epilogue): Remove manual call
	to cleanup-saved-temps.
	* doc/sourcebuild.texi (Clean up generated test files): Expand
	introduction.
	(dg-keep-saved-temps): Document new proc.
	(cleanup-ipa-dump, cleanup-rtl-dump, cleanup-tree-dump,
	cleanup-saved-temps): Remove.

	gcc/testsuite/
	Backport from trunk r223858.
	2015-05-29  Bernhard Reutner-Fischer  <aldot@gcc.gnu.org>

	* lib/gcc-dg.exp (cleanup-ipa-dump, cleanup-rtl-dump,
	cleanup-tree-dump, cleanup-dump, cleanup-saved-temps): Remove.
	Adjust all callers.
	(schedule-cleanups, dg-keep-saved-temps): New proc.
	(gcc-dg-test-1): Schedule cleanups.
	* lib/profopt.exp (profopt-execute): Likewise.
	* g++.dg/cdce3.C: Adjust expected line numbers.
	* gcc.dg/cdce1.c: Likewise.
	* gcc.dg/cdce2.c: Likewise.
	* gcc.dg/strlenopt-22.c: Fix comment delimiter.
	* gcc.dg/strlenopt-24.c: Likewise.
	* gcc.dg/tree-ssa/vrp26.c: Likewise.
	* gcc.dg/tree-ssa/vrp28.c: Likewise.
	* obj-c++.dg/encode-2.mm: Likewise.

	libgomp/
	Backport from trunk r223858.
	2015-05-29  Bernhard Reutner-Fischer  <aldot@gcc.gnu.org>

	* testsuite/libgomp.graphite/bounds.c: Adjust for
	cleanup-tree-dump removal.
	* testsuite/libgomp.graphite/force-parallel-1.c: Likewise.
	* testsuite/libgomp.graphite/force-parallel-2.c: Likewise.
	* testsuite/libgomp.graphite/force-parallel-3.c: Likewise.
	* testsuite/libgomp.graphite/force-parallel-4.c: Likewise.
	* testsuite/libgomp.graphite/force-parallel-5.c: Likewise.
	* testsuite/libgomp.graphite/force-parallel-6.c: Likewise.
	* testsuite/libgomp.graphite/force-parallel-7.c: Likewise.
	* testsuite/libgomp.graphite/force-parallel-8.c: Likewise.
	* testsuite/libgomp.graphite/force-parallel-9.c: Likewise.
	* testsuite/libgomp.graphite/pr41118.c: Likewise.

	gcc/testsuite/
	Backport from trunk r223864.
	2015-05-29  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* gcc.target/aarch64/vdup_lane_2.c: Close comment on final line.

	gcc/testsuite/
	Backport from trunk r223876.
	2015-05-29  Christophe Lyon  <christophe.lyon@linaro.org>

	* gcc.target/arm/simd/vextp64_1.c: Close comment on final line.

2015-11-01  Yvan Roux  <yvan.roux@linaro.org>

	gcc/testsuite/
	Backport from trunk r228470.
	2015-10-05  Ramana Radhakrishnan  <ramana.radhakrishnan@arm.com>

	* gcc.target/aarch64/advsimd-intrinsics/vcvt_f16.c (TEST_MSG): Fix typo.
	(exec_vcvt): Add comments.

2015-11-01  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r228390.
	2015-10-02  Ramana Radhakrishnan  <ramana.radhakrishnan@arm.com>

	* config/aarch64/aarch64.c (aarch64_elf_asm_named_section): Delete.
	(TLS_SECTION_ASM_FLAG): Delete.

	gcc/
	Backport from trunk r228397.
	2015-10-02  Ramana Radhakrishnan  <ramana.radhakrishnan@arm.com>

	* config/aarch64/aarch64-elf.h (TARGET_ASM_NAMED_SECTION): Delete.

2015-11-01  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r228387.
	2015-10-02  Renlin Li  <renlin.li@arm.com>

	* config/aarch64/aarch64.md (csneg3_insn_uxtw): New pattern.

	gcc/testsuite/
	Backport from trunk r228387.
	2015-10-02  Renlin Li  <renlin.li@arm.com>

	* gcc.target/aarch64/csneg-1.c: Update.

2015-11-01  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r228384.
	2015-10-02  Renlin Li  <renlin.li@arm.com>

	PR target/66776
	* config/aarch64/aarch64.md (cmovdi_insn_uxtw): New pattern.

	gcc/testsuite/
	Backport from trunk r228384.
	2015-10-02  Renlin Li  <renlin.li@arm.com>

	PR target/66776
	* gcc.target/aarch64/pr66776.c: New.

2015-11-01  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r227946.
	2015-09-20  Wilco Dijkstra  <wdijkstr@arm.com>

	* config/aarch64/aarch64.c (aarch64_bitmask_imm): Reimplement using
	faster algorithm.

	gcc/
	Backport from trunk r227947.
	2015-09-20  Wilco Dijkstra  <wdijkstr@arm.com>

	* config/aarch64/aarch64.c (aarch64_internal_mov_immediate): Replace
	slow immediate matching loops with a faster algorithm.

	gcc/
	Backport from trunk r227948.
	2015-09-20  Wilco Dijkstra  <wdijkstr@arm.com>

	* config/aarch64/aarch64.c (aarch64_bitmasks): Remove.
	(AARCH64_NUM_BITMASKS): Remove.
	(aarch64_bitmasks_cmp): Remove.
	(aarch64_build_bitmask_table): Remove.

	gcc/
	Backport from trunk r227949.
	2015-09-20  Wilco Dijkstra  <wdijkstr@arm.com>

	* config/aarch64/aarch64.c (aarch64_internal_mov_immediate): Remove
	redundant immediate generation code.

	gcc/
	Backport from trunk r227950.
	2015-09-20  Wilco Dijkstra  <wdijkstr@arm.com>

	* config/aarch64/aarch64.c (aarch64_internal_mov_immediate): Cleanup
	immediate generation code.

2015-10-30  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r227363.
	2015-09-01  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config/aarch64/aarch64.c (aarch64_set_current_function):
	Re-layout any vector parameters have non-simd layout.
	* config/aarch64/aarch64-builtins.c (aarch64_relayout_simd_param):
	Delete.
	(aarch64_simd_expand_args): Delete call to the above.

	gcc/testsuite/
	Backport from trunk r227363.
	2015-09-01  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* gcc.target/aarch64/target_attr_crypto_ice_2.c: New test.

2015-10-30  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r227382.
	2015-09-01  Vladimir Makarov  <vmakarov@redhat.com>

	PR target/61578
	* lra-lives.c (process_bb_lives): Process move pseudos with the
	same value for copies and preferences
	* lra-constraints.c (match_reload): Create match reload pseudo
	with the same value from single dying input pseudo.

	gcc/
	Backport from trunk r228097.
	2015-09-24  Vladimir Makarov  <vmakarov@redhat.com>

	PR target/61578
	* ira-color.c (update_allocno_cost): Add parameter.
	(update_costs_from_allocno): Decrease conflict cost.  Pass the new
	parameter.

	gcc/
	Backport from trunk r228153.
	2015-09-25  Vladimir Makarov  <vmakarov@redhat.com>

	PR target/61578
	* lra-constarints.c (match_reload): Check presence of the input pseudo
	in the output pseudo.

	gcc/
	Backport from trunk r228396.
	2015-10-02  Vladimir Makarov  <vmakarov@redhat.com>

	PR rtl-optimization/67756
	* lra-constraints.c (match_reload): Add a new parameter.  Use it
	for creating a pseudo with the same value.
	(curr_insn_transform): Pass a new argument to match_reload.

	gcc/testsuite/
	Backport from trunk r228396.
	2015-10-02  Vladimir Makarov  <vmakarov@redhat.com>

	PR rtl-optimization/67756
	* gcc.target/arm/pr67756.c: New.

	gcc/testsuite/
	Backport from trunk r228445.
	2015-10-03  Bernd Edlinger  <bernd.edlinger@hotmail.de>

	* gcc.target/arm/pr67756.c: Fixed warnings.

2015-10-30  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r222268.
	2015-04-21  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* expmed.c: (synth_mult): Only assume overlapping
	shift with previous steps in alg_sub_t_m2 case.

	gcc/testsuite/
	Backport from trunk r222268.
	2015-04-21  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* gcc.target/aarch64/mult-synth_1.c: New test.
	* gcc.target/aarch64/mult-synth_2.c: Likewise.
	* gcc.target/aarch64/mult-synth_3.c: Likewise.
	* gcc.target/aarch64/mult-synth_4.c: Likewise.
	* gcc.target/aarch64/mult-synth_5.c: Likewise.
	* gcc.target/aarch64/mult-synth_6.c: Likewise.

2015-10-30  Yvan Roux  <yvan.roux@linaro.org>

	gcc/testsuite/
	Backport from trunk r229315.
	2015-10-26  Maxim Kuvyrkov  <maxim.kuvyrkov@linaro.org>

	* gfortran.dg/streamio_4.f90, gfortran.dg/streamio_5.f90,
	* gfortran.dg/streamio_6.f90, gfortran.dg/streamio_7.f90,
	* gfortran.dg/streamio_10.f90, gfortran.dg/streamio_12.f90: Add
	suffix to the temporary filename to make it unique per testcase.

	gcc/testsuite/
	Backport from trunk r229319.
	2015-10-26  Christophe Lyon  <christophe.lyon@linaro.org>

	* gfortran.dg/chmod_1.f90: Add suffix to the temporary filename to
	make it unique per testcase.
	* gfortran.dg/chmod_2.f90: Likewise.
	* gfortran.dg/chmod_3.f90: Likewise.
	* gfortran.dg/direct_io_8.f90: Likewise.
	* gfortran.dg/f2003_inquire_1.f03: Likewise.
	* gfortran.dg/f2003_io_1.f03: Likewise.
	* gfortran.dg/f2003_io_2.f03: Likewise.
	* gfortran.dg/f2003_io_8.f03: Likewise.
	* gfortran.dg/inquire_size.f90: Likewise.
	* gfortran.dg/namelist_66.f90: Likewise.
	* gfortran.dg/namelist_82.f90: Likewise.
	* gfortran.dg/namelist_87.f90: Likewise.
	* gfortran.dg/open_negative_unit_1.f90: Likewise.
	* gfortran.dg/open_new.f90: Likewise.
	* gfortran.dg/stat_1.f90: Likewise.
	* gfortran.dg/stat_2.f90: Likewise.
	* gfortran.dg/streamio_15.f90: Likewise.
	* gfortran.dg/unf_read_corrupted_1.f90: Likewise.

2015-10-30  Yvan Roux  <yvan.roux@linaro.org>

	gcc/testsuite/
	Backport from trunk r228280.
	2015-09-30  Christophe Lyon  <christophe.lyon@linaro.org>

	* g++.dg/cpp0x/stdint.C: Move dg-require-effective-target after
	dg-do.
	* g++.dg/gomp/tls-wrap4.C: Likewise.
	* gcc.dg/atomic-op-optimize.c: Likewise.
	* gcc.dg/pr54087.c: Likewise.
	* gcc.dg/tls/section-2.c: Likewise.
	* gcc.dg/vect/costmodel/ppc/costmodel-bb-slp-9a-pr63175.c:
	Likewise.
	* gcc.dg/vect/costmodel/ppc/costmodel-pr37194.c: Likewise.
	* gcc.dg/vect/trapv-vect-reduc-4.c: Likewise.
	* gcc.target/arm/divzero.c: Likewise.
	* gcc.target/arm/sibcall-2.c: Likewise.
	* gcc.target/arm/thumb1-Os-mult.c: Likewise.
	* gcc.target/arm/thumb1-load-64bit-constant-1.c: Likewise.
	* gcc.target/arm/thumb1-load-64bit-constant-2.c: Likewise.
	* gcc.target/arm/thumb1-load-64bit-constant-3.c: Likewise.
	* gcc.target/arm/volatile-bitfields-1.c: Likewise.
	* gcc.target/arm/volatile-bitfields-2.c: Likewise.
	* gcc.target/arm/volatile-bitfields-3.c: Likewise.
	* gcc.target/arm/volatile-bitfields-4.c: Likewise.
	* gfortran.dg/default_format_2.f90: Likewise.
	* gfortran.dg/default_format_denormal_2.f90: Likewise.

2015-10-29  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r228253.
	2015-09-29  Evandro Menezes  <e.menezes@samsung.com>

	* config/arm/types.md (neon_ldp, neon_ldp_q, neon_stp, neon_stp_q):
	Add new insn types for vector load and store pairs.
	* config/arm/cortex-a53.md (cortex_a53_f_load_2reg): Add insn
	types "neon_ldp{,_q}".
	* config/arm/cortex-a57.md (neon_load_c): Add insn types
	"neon_ldp{,_q}".
	(neon_store_complex): Add insn types "neon_stp{,_q}".
	* config/aarch64/aarch64-simd.md (aarch64_be_movoi): Add insn types
	"neon_{ldp,stp}_q".

2015-10-29  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r228116.
	2015-09-25  Richard Sandiford  <richard.sandiford@arm.com>

	* config/aarch64/aarch64-builtins.c (aarch64_expand_builtin): Force
	__builtin_aarch64_fp[sc]r arguments into a register.

	gcc/testsuite/
	Backport from trunk r228116.
	2015-09-25  Richard Sandiford  <richard.sandiford@arm.com>

	* gcc.target/aarch64/fpcr_fpsr_1.c: New file.

2015-10-29  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r228102.
	2015-09-24  Michael Collison  <michael.collison@linaro.org>

	PR other/57195
	* read-md.c (read_name): Allow mode iterators inside angle
	brackets in rtl expressions.

2015-10-29  Yvan Roux  <yvan.roux@linaro.org>

	gcc/testsuite/
	Backport from trunk r228082.
	2015-09-24  Richard Earnshaw  <rearnsha@arm.com>

	PR libgcc/67624
	* gcc.target/arm/fp16-inf.c: New test.

	libgcc/
	Backport from trunk r228082.
	2015-09-24  Richard Earnshaw  <rearnsha@arm.com>

	PR libgcc/67624
	* config/arm/fp16.c (__gnu_f2h_internal): Handle infinity correctly.

2015-10-29  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r228093.
	2015-09-24  Jiong Wang  <jiong.wang@arm.com>

	* config/aarch64/aarch64.c (aarch64_print_operand): Add "CONST" support.

2015-10-29  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r228044.
	2015-09-23  James Greenhalgh  <james.greenhalgh@arm.com>

	* config/aarch64/aarch64-simd.md
	(aarch64_float_truncate_hi_v4sf): Rewrite as an expand.
	(aarch64_float_truncate_hi_v4sf_le): New.
	(aarch64_float_truncate_hi_v4sf_be): Likewise.

	gcc/testsuite/
	Backport from trunk r228044.
	2015-09-23  James Greenhalgh  <james.greenhalgh@arm.com>

	* gcc.target/aarch64/advsimd-intrinsics/vcvt_high_1.c: New.

2015-10-29  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r227849.
	2015-09-17  James Greenhalgh  <james.greenhalgh@arm.com>

	* config/aarch64/aarch64.md (copysigndf3): New.
	(copysignsf3): Likewise.

	gcc/testsuite/
	Backport from trunk r227849.
	2015-09-17  James Greenhalgh  <james.greenhalgh@arm.com>

	* gcc.target/aarch64/copysign_1.c: New.
	* gcc.target/aarch64/copysign_2.c: New.

2015-10-29  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r227798.
	2015-09-15  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config/arm/arm.c (arm_gen_constant): Use HOST_WIDE_INT_M1U instead
	of -1 when shifting.  Change type of val to unsigned HOST_WIDE_INT.
	Update prototype.

2015-10-29  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r227781.
	2015-09-15  Alan Lawrence  <alan.lawrence@arm.com>

	* config/aarch64/aarch64-simd.md (vec_store_lanesoi_lane<mode>): Rename
	to...
	(aarch64_vec_store_lanesoi_lane<mode>): ...this.

	(vec_store_lanesci_lane<mode>): Rename to...
	(aarch64_vec_store_lanesci_lane<mode>): ...this.

	(vec_store_lanesxi_lane<mode>): Rename to...
	(aarch64_vec_store_lanesxi_lane<mode>): ...this.

	(aarch64_st2_lane<mode>, aarch64_st3_lane<mode>,
	aarch64_st4_lane<mode>): Follow renaming.

	gcc/
	Backport from trunk r227782.
	2015-09-15  Alan Lawrence  <alan.lawrence@arm.com>

	* config/aarch64/aarch64-simd.md
	(aarch64_ld2<mode>_dreg VD & DX, aarch64_st2<mode>_dreg VD & DX ):
	Change all TImode operands to BLKmode.
	(aarch64_ld3<mode>_dreg VD & DX, aarch64_st3<mode>_dreg VD & DX):
	Change all EImode operands to BLKmode.
	(aarch64_ld4<mode>_dreg VD & DX, aarch64_st4<mode>_dreg VD & DX):
	Change all OImode operands to BLKmode.

	(aarch64_ld<VSTRUCT:nregs><VDC:mode>): Generate MEM rtx with BLKmode
	and call set_mem_size.
	(aarch64_st<VSTRUCT:nregs><VDC:mode>): Likewise.

	* config/aarch64/iterators.md (VSTRUCT_DREG): Remove.

	gcc/
	Backport from trunk r227783.
	2015-09-08  Alan Lawrence  <alan.lawrence@arm.com>

	* config/aarch64/aarch64-simd.md (aarch64_simd_ld3r<mode>):
	Change operand mode from <V_THREE_ELEM> to BLK.
	(aarch64_vec_load_lanesci_lane<mode>): Likewise.
	(aarch64_vec_store_lanesci_lane<mode>): Likewise.
	(aarch64_ld3r<mode>): Generate MEM rtx with BLKmode, call set_mem_size.
	(aarch64_ld3_lane<mode>): Likewise.
	(aarch64_st3_lane<mode>): Likewise.
	* config/aarch64/iterators.md (V_THREE_ELEM): Remove.

	gcc/
	Backport from trunk r227787.
	2015-09-15  Alan Lawrence  <alan.lawrence@arm.com>

	* config/aarch64/aarch64.c (aarch64_simd_attr_length_rglist): Update
	comment.
	* config/aarch64/aarch64-builtins.c (ei_UP): Remove.
	(aarch64_simd_intEI_type_node): Likewise.
	(aarch64_simd_builtin_std_type): Remove EImode case.
	(aarch64_init_simd_builtin_types): Don't create/add intEI_type_node.
	* config/aarch64/aarch64-modes.def: Remove EImode.

	2015-09-15  Alan Lawrence  <alan.lawrence@arm.com>
	gcc/
	Backport from trunk r227789.
	2015-09-15  Alan Lawrence  <alan.lawrence@arm.com>

	* config/aarch64/aarch64-simd.md (aarch64_simd_ld4r<mode>):
	Change operand mode from <V_FOUR_ELEM> to BLK.
	(aarch64_vec_load_lanesxi_lane<mode>): Likewise.
	(aarch64_vec_store_lanesxi_lane<mode): Likewise.
	(aarch64_ld4r<mode>): Generate MEM rtx with BLKmode, call set_mem_size.
	(aarch64_ld4_lane<mode>): Likewise.
	(aarch64_st4_lane<mode>): Likewise.
	* config/aarch64/iterators.md (V_FOUR_ELEM): Remove.

	gcc/
	Backport from trunk r227790.
	2015-09-15  Alan Lawrence  <alan.lawrence@arm.com>

	* config/aarch64/aarch64-simd.md (aarch64_simd_ld2r<mode>):
	Change operand mode from <V_TWO_ELEM> to BLK.
	(aarch64_vec_load_lanesoi_lane<mode>): Likewise.
	(aarch64_vec_store_lanesoi_lane<mode): Likewise
	(aarch64_ld2r<mode>): Generate MEM rtx with BLKmode, call set_mem_size.
	(aarch64_ld2_lane<mode>): Likewise.
	(aarch64_st2_lane<VQ:mode>): Likewise.
	* config/aarch64/iterators.md (V_TWO_ELEM): Remove.

	gcc/
	Backport from trunk r227793.
	2015-09-15  Alan Lawrence  <alan.lawrence@arm.com>

	* config/aarch64/aarch64-simd.md (aarch64_ld2r<mode>,
	aarch64_ld3r<mode>, aarch64_ld4r<mode>): Combine together, making...
	(aarch64_simd_ld<VSTRUCT:nregs>r<VALLDIF:mode>): ...this.
	(aarch64_ld2_lane<mode>, aarch64_ld3_lane<mode>,
	aarch64_ld4_lane<mode>): Combine together, making...
	(aarch64_ld<VSTRUCT:nregs>_lane<VALLDIF:mode>): ...this.
	(aarch64_st2_lane<mode>, aarch64_st3_lane<mode>,
	aarch64_st4_lane<mode>): Combine together, making...
	(aarch64_st<VSTRUCT:nregs>_lane<VALLDIF:mode>): ...this.
	* config/aarch64/iterators.md (nregs): Add comment.

	gcc/
	Backport from trunk r227794.
	2015-09-15  Alan Lawrence  <alan.lawrence@arm.com>

	* config/aarch64/aarch64.h (AARCH64_VALID_SIMD_DREG_MODE): New.

	* config/aarch64/aarch64.c (aarch64_array_mode_supported_p): Add
	AARCH64_VALID_SIMD_DREG_MODE.

	gcc/testsuite/
	Backport from trunk r227794.
	2015-09-15  Alan Lawrence  <alan.lawrence@arm.com>

	* gcc.target/aarch64/vect_int32x2x4_1.c: New.

2015-10-29  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r227679.
	2015-09-10  Ramana Radhakrishnan  <ramana.radhakrishnan@arm.com>

	PR target/63304
	        * config/aarch64/aarch.md (mov<mode>:GPF_F16): Use GPF_TF_F16.
	        (movtf): Delete.
	        * config/aarch64/iterators.md (GPF_TF_F16): New.
	        (GPF_F16): Delete.

2015-10-29  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r227623.
	2015-09-10  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config/aarch64/aarch64.md (*and<mode>3nr_compare0): Use logics_imm
	type for second alternative.

2015-10-29  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r227629.
	2015-09-10  Jiong Wang  <jiong.wang@arm.com>

	PR rtl-optimization/67421
	* expr.c (expand_expr_real_2): Cost instrcution sequences when doing
	left wide shift tranformation.

2015-10-28  Yvan Roux  <yvan.roux@linaro.org>

	gcc/testsuite/
	Backport from trunk r227459.
	2015-09-03  Renlin Li  <renlin.li@arm.com>

	* gcc.target/aarch64/arm_align_max_pwr.c: Make it a compile test case,
	check the assembly.
	* gcc.target/aarch64/arm_align_max_stack_pwr.c: Likewise.

2015-10-28  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r227402.
	2015-09-02  Christophe Lyon  <christophe.lyon@linaro.org>

	PR target/59810
	PR target/63652
	PR target/63653
	* config/aarch64/aarch64-simd.md
	(aarch64_ld<VSTRUCT:nregs><VQ:mode>): Call
	gen_aarch64_simd_ld<VSTRUCT:nregs><VQ:mode>.
	(aarch64_st<VSTRUCT:nregs><VQ:mode>): Call
	gen_aarch64_simd_st<VSTRUCT:nregs><VQ:mode>.

2015-10-28  Yvan Roux  <yvan.roux@linaro.org>

	gcc/testsuite/
	Backport from trunk r227401.
	2015-09-02  Christophe Lyon  <christophe.lyon@linaro.org>

	* lib/target-supports.exp (clear_effective_target_cache): New.
	(check_cached_effective_target): Update et_prop_list.
	* lib/asan-dg.exp (asan_finish): Call clear_effective_target_cache.
	* g++.dg/compat/compat.exp: Likewise.
	* g++.dg/compat/struct-layout-1.exp: Likewise.
	* lib/asan-dg.exp: Likewise.
	* lib/atomic-dg.exp: Likewise.
	* lib/cilk-plus-dg.exp: Likewise.
	* lib/clearcap.exp: Likewise.
	* lib/mpx-dg.exp: Likewise.
	* lib/tsan-dg.exp: Likewise.
	* lib/ubsan-dg.exp: Likewise.

	gcc/testsuite/
	Backport from trunk r227492.
	2015-09-04  H.J. Lu  <hongjiu.lu@intel.com>

	PR testsuite/67450
	* lib/target-supports.exp (check_cached_effective_target):
	Apppend $prop to et_prop_list only if needed.

2015-10-28  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r227333.
	2015-08-30  Michael Collison  <michael.collison@linaro.org>

	PR other/67320
	* doc.md.texi: Rename [su]sum_widen to widen_[su]sum to reflect correct
	standard names

2015-10-28  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r226552.
	2015-08-04  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config/aarch64/aarch64.c (struct processor): Add ident field.
	Rename core sched_core.
	(all_cores): Handle above changes.
	(all_architectures): Likewise.
	(aarch64_parse_arch): Likewise.
	(aarch64_override_options): Likewise.

	gcc/
	Backport from trunk r226553.
	2015-08-04  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config/aarch64/aarch64.h (TARGET_CPU_CPP_BUILTINS): Define
	__ARM_ARCH_8A directly rather than with cpp_define_formatted.
	* config/aarch64/aarch64.c (struct processor): Add arch field.
	(all_architectures): Handle above, move above all_cores.
	(all_cores): Handle above.
	(aarch64_parse_arch): Handle above changes.
	* config/aarch64/aarch64-arches.def (armv8-a): Extend according to
	above.  Update comments.
	(armv8.1-a): Likewise.
	* config/aarch64/aarch64-cores.def: Update according to above.
	* config/aarch64/aarch64-opts.h (aarch64_arch): New enum.
	* config/aarch64/driver-aarch64.c (struct aarch64_arch): Rename to
	aarch64_arch_driver_info.

	gcc/
	Backport from trunk r226554.
	2015-08-04  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config/aarch64/aarch64.opt (aarch64_arch_string): Delete.
	(aarch64_cpu_string): Likewise.
	(aarch64_tune_string): Likewise.
	* config/aarch64/aarch64.c (aarch64_parse_opt_result): New enum.
	(aarch64_parse_extension): Return aarch64_parse_opt_result.
	Add extra argument to put result into.
	(aarch64_parse_arch): Likewise.  Do not set selected_cpu.
	(aarch64_parse_cpu): Add arguments to put results into. Return
	aarch64_parse_opt_result.
	(aarch64_parse_tune): Likewise.
	(aarch64_override_options_after_change_1): New function.
	(aarch64_override_options_internal): New function.
	(aarch64_validate_mcpu): Likewise.
	(aarch64_validate_march): Likewise.
	(aarch64_validate_mtune): Likewise.
	(aarch64_override_options): Update to reflect above changes.
	Move some logic into aarch64_override_options_internal.
	Initialize target_option_default_node and target_option_current_node.
	(aarch64_override_options_after_change): Move logic into
	aarch64_override_options_after_change_1 and call it with global_options.
	(initialize_aarch64_code_model): Take a gcc_options pointer and use the
	flag values from that.

	gcc/testsuite/
	Backport from trunk r226554.
	2015-08-04  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* gcc.target/aarch64/cpu-diagnostics-3.c: Update expected error
	message.

	gcc/
	Backport from trunk r226556.
	2015-08-04  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config/aarch64/aarch64.h (TARGET_FIX_ERR_A53_835769_DEFAULT): Always
	define to 0 or 1.
	(TARGET_FIX_ERR_A53_835769): New macro.
	* config/aarch64/aarch64.c (aarch64_override_options_internal): Remove
	handling of opts->x_aarch64_fix_a53_err835769.
	(aarch64_madd_needs_nop): Check for TARGET_FIX_ERR_A53_835769 rather
	than aarch64_fix_a53_err835769.
	* config/aarch64/aarch64-elf-raw.h: Update for above changes.
	* config/aarch64/aarch64-linux.h: Likewise.

	gcc/
	Backport from trunk r226557.
	2015-08-04  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config/aarch64/aarch64.opt (momit-leaf-frame-pointer): Initialize
	flag_omit_leaf_frame_pointer to 2.

	gcc/
	Backport from trunk r226558.
	2015-08-04  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config/aarch64/aarch64.opt (explicit_tune_core): New TargetVariable.
	(explicit_arch): Likewise.
	(x_aarch64_isa_flags): Likewise.
	(mgeneral-regs-only): Mark as Save.
	(mfix-cortex-a53-835769): Likewise.
	(mcmodel=): Likewise.
	(mstrict-align): Likewise.
	(momit-leaf-frame-pointer): Likewise.
	(mtls-dialect): Likewise.
	(master=): Likewise.
	* config/aarch64/aarch64.h (ASM_DECLARE_FUNCTION_NAME): Define.
	(aarch64_isa_flags): Remove extern declaration.
	* config/aarch64/aarch64.c (aarch64_validate_mcpu): Return a bool
	to indicate success or failure.
	(aarch64_validate_march): Likewise.
	(aarch64_validate_mtune): Likewise.
	(aarch64_isa_flags): Delete.
	(aarch64_override_options_internal): Access opts->x_aarch64_isa_flags
	instead of aarch64_isa_flags.
	(aarch64_get_tune_cpu): New function.
	(aarch64_get_arch): Likewise.
	(aarch64_override_options): Use above and set up explicit_tune_core
	and explicit_arch.
	(aarch64_print_extension): Move earlier in file.  Add isa_flags
	argument and use that instead of the global aarch64_isa_flags.
	(aarch64_option_save): New function.
	(aarch64_option_restore): Likewise.
	(aarch64_option_print): Likewise.
	(aarch64_declare_function_name): Likewise.
	(aarch64_start_file): Delete.
	(TARGET_ASM_FILE_START): Do not define.
	(TARGET_OPTION_RESTORE, TARGET_OPTION_PRINT): Define.
	* config/aarch64/aarch64-protos.h (aarch64_declare_function_name):
	Declare prototype.

	gcc/
	Backport from trunk r226559.
	2015-08-04  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config/aarch64/aarch64.h (SWITCHABLE_TARGET): Define.
	* config/aarch64/aarch64.c: Include target-globals.h
	(aarch64_previous_fndecl): New variable.
	(aarch64_set_current_function): New function.
	(TARGET_SET_CURRENT_FUNCTION): Define.

	gcc/
	Backport from trunk r226560.
	2015-08-04  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* common/config/aarch64/aarch64-common.c (aarch64_handle_option):
	Remove static.  Handle OPT_mgeneral_regs_only,
	OPT_mfix_cortex_a53_835769, OPT_mstrict_align,
	OPT_momit_leaf_frame_pointer.
	* config/aarch64/aarch64.c: Include opts.h and diagnostic.h
	(aarch64_attr_opt_type): New enum.
	(aarch64_attribute_info): New struct.
	(aarch64_handle_attr_arch): New function.
	(aarch64_handle_attr_cpu): Likewise.
	(aarch64_handle_attr_tune): Likewise.
	(aarch64_handle_attr_isa_flags): Likewise.
	(aarch64_attributes): New table.
	(aarch64_process_one_target_attr): New function.
	(num_occurences_in_str): Likewise.
	(aarch64_process_target_attr): Likewise.
	(aarch64_option_valid_attribute_p): Likewise.
	(TARGET_OPTION_VALID_ATTRIBUTE_P): Define.
	* config/aarch64/aarch64-protos.h: Include input.h
	(aarch64_handle_option): Declare prototype.

	gcc/
	Backport from trunk r226561.
	2015-08-04  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config/aarch64/aarch64.c (aarch64_tribools_ok_for_inlining_p):
	New function.
	(aarch64_can_inline_p): Likewise.
	(TARGET_CAN_INLINE_P): Define.

	gcc/
	Backport from trunk r226563.
	2015-08-04  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config.gcc (aarch64*-*-*): Specify c_target_objs and cxx_target_objs.
	* config/aarch64/aarch64.h (REGISTER_TARGET_PRAGMAS): Define.
	(TARGET_CPU_CPP_BUILTINS): Redefine to call aarch64_cpu_cpp_builtins.
	* config/aarch64/aarch64.c (aarch64_override_options_internal): Remove
	static keyword.
	(aarch64_reset_previous_fndecl): New function.
	(aarch64_handle_attr_isa_flags): Handle "+nothing" in the beginning of
	the string.
	* config/aarch64/aarch64-c.c: New file.
	* config/aarch64/arm_acle.h: Add pragma +crc+nofp at the top.
	Push and pop options at beginning and end.  Remove ifdef
	__ARM_FEATURE_CRC32.
	* config/aarch64/arm_neon.h: Remove #ifdef check on __ARM_NEON.
	Add pragma +nothing+simd and +nothing+crypto where appropriate.
	* config/aarch64/t-aarch64 (aarch64-c.o): New rule.
	* config/aarch64/aarch64-protos.h (aarch64_cpu_cpp_builtins):
	Define prototype.
	(aarch64_register_pragmas): Likewise.
	(aarch64_reset_previous_fndecl): Likewise.
	(aarch64_process_target_attr): Likewise.
	(aarch64_override_options_internal): Likewise.

	gcc/testsuite/
	Backport from trunk r226563.
	2015-08-04  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* gcc.target/aarch64/arm_neon-nosimd-error.c: Delete.

	gcc/
	Backport from trunk r226564.
	2015-08-04  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config/aarch64/aarch64.c (aarch64_option_valid_attribute_p):
	Initialize simd builtins if TARGET_SIMD.
	* config/aarch64/aarch64-builtins.c (aarch64_init_simd_builtins):
	Make sure that the builtins are initialized only once no matter how
	many times the function is called.
	(aarch64_init_builtins): Unconditionally initialize crc builtins.
	(aarch64_relayout_simd_param): New function.
	(aarch64_simd_expand_args): Use above during argument expansion.
	* config/aarch64/aarch64-c.c (aarch64_pragma_target_parse): Initialize
	simd builtins if TARGET_SIMD.
	* config/aarch64/aarch64-protos.h (aarch64_init_simd_builtins): New
	prototype.
	(aarch64_relayout_simd_types): Likewise.

	gcc/testsuite/
	Backport from trunk r226564.
	2015-08-04  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* gcc.target/aarch64/target_attr_crypto_ice_1.c: New test.

	gcc/testsuite/
	Backport from trunk r226565.
	2015-08-04  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* gcc.target/aarch64/pragma_cpp_predefs_1.c: New test.
	* gcc.target/aarch64/target_attr_1.c: Likewise.
	* gcc.target/aarch64/target_attr_2.c: Likewise.
	* gcc.target/aarch64/target_attr_3.c: Likewise.
	* gcc.target/aarch64/target_attr_4.c: Likewise.
	* gcc.target/aarch64/target_attr_5.c: Likewise.
	* gcc.target/aarch64/target_attr_6.c: Likewise.
	* gcc.target/aarch64/target_attr_7.c: Likewise.
	* gcc.target/aarch64/target_attr_8.c: Likewise.
	* gcc.target/aarch64/target_attr_9.c: Likewise.
	* gcc.target/aarch64/target_attr_10.c: Likewise.
	* gcc.target/aarch64/target_attr_11.c: Likewise.
	* gcc.target/aarch64/target_attr_12.c: Likewise.
	* gcc.target/aarch64/target_attr_13.c: Likewise.
	* gcc.target/aarch64/target_attr_14.c: Likewise.
	* gcc.target/aarch64/target_attr_15.c: Likewise.

	gcc/
	Backport from trunk r226566.
	2015-08-04  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* doc/extend.texi (AArch64 Function Attributes): New node.
	(AArch64 Pragmas): Likewise.

	gcc/
	Backport from trunk r226567.
	2015-08-04  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config/aarch64/aarch64.c (aarch64_option_valid_attribute_p):
	Exit early and use target_option_current_node if processing current
	pragma.

2015-10-28  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r227226.
	2015-08-26  Renlin Li  <renlin.li@arm.com>

	* config/aarch64/aarch64.md (*aarch64_bfi<GPI:mode><ALLX:mode>4): New.

	gcc/testsuite/
	Backport from trunk r227226.
	2015-08-26  Renlin Li  <renlin.li@arm.com>

	* gcc.target/aarch64/combine_bfi_1.c: New testcase.

2015-10-27  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r226606.
	2015-08-05  Kugan Vivekanandarajah  <kuganv@linaro.org>

	* cse.c (cse_insn): Restoring old behaviour for src_eqv
	 when dest and value in the REG_EQUAL are same and dest
	 is STRICT_LOW_PART.

2015-10-27  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r226869.
	2015-08-13  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* ifcvt.c (noce_try_store_flag_constants): Handle PLUS-immediate
	expressions in A and B.

	gcc/testsuite/
	Backport from trunk r226869.
	2015-08-13  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* gcc.target/aarch64/cinc_common_1.c: New test.

2015-10-27  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r226346.
	2015-07-29  Alan Lawrence  <alan.lawrence@arm.com>

	* config/aarch64/aarch64-builtins.c (aarch64_fp16_type_node): New.
	(aarch64_init_builtins): Make aarch64_fp16_type_node, use for __fp16.

	* config/aarch64/aarch64-modes.def: Add HFmode.

	* config/aarch64/aarch64.h (TARGET_CPU_CPP_BUILTINS): Define
	__ARM_FP16_FORMAT_IEEE and __ARM_FP16_ARGS. Set bit 1 of __ARM_FP.

	* config/aarch64/aarch64.c (aarch64_init_libfuncs,
	aarch64_promoted_type): New.

	(aarch64_float_const_representable_p): Disable HFmode.
	(aarch64_mangle_type): Mangle half-precision floats to "Dh".
	(TARGET_PROMOTED_TYPE): Define to aarch64_promoted_type.
	(TARGET_INIT_LIBFUNCS): Define to aarch64_init_libfuncs.

	* config/aarch64/aarch64.md (mov<mode>): Include HFmode using GPF_F16.
	(movhf_aarch64, extendhfsf2, extendhfdf2, truncsfhf2, truncdfhf2): New.

	* config/aarch64/iterators.md (GPF_F16): New.

	gcc/testsuite/
	Backport from trunk r226346.
	2015-07-29  Alan Lawrence  <alan.lawrence@arm.com>

	* gcc.target/aarch64/f16_movs_1.c: New test.

	gcc/testsuite/
	Backport from trunk r226350.
	2015-07-29  Alan Lawrence  <alan.lawrence@arm.com>

	* gcc.target/aarch64/fp16/fp16.exp: New.
	* gcc.target/aarch64/fp16/f16_convs_1.c: New.
	* gcc.target/aarch64/fp16/f16_convs_2.c: New.

	gcc/
	Backport from trunk r227033.
	2015-08-20  Alan Lawrence  <alan.lawrence@arm.com>

	* config/arm/arm-builtins.c (arm_init_simd_builtin_types): Move
	initialization of HFmode scalar type (float16_t) to...
	(arm_init_fp16_builtins): ... Here. Combine with __fp16 initialization
	code.

	(arm_init_builtins): Call arm_init_fp16_builtins earlier and always.

	* config/arm/arm_neon.h (vcvt_f16_f32, vcvt_f32_f16): Condition on
	having an -mfp16-format.

	gcc/testsuite/
	Backport from trunk r227033.
	2015-08-20  Alan Lawrence  <alan.lawrence@arm.com>

	* lib/target-supports.exp
	(check_effective_target_arm_neon_fp16_ok_nocache): Add flag variants
	with -mfp16-format=ieee.

	gcc/
	Backport from trunk r227535, r227558.
	2015-09-08  Alan Lawrence  <alan.lawrence@arm.com>

	* config/arm/arm_neon.h (float16_t, vget_lane_f16, vset_lane_f16,
	vcreate_f16, vld1_lane_f16, vld1_dup_f16, vreinterpret_p8_f16,
	vreinterpret_p16_f16, vreinterpret_f16_p8, vreinterpret_f16_p16,
	vreinterpret_f16_f32, vreinterpret_f16_p64, vreinterpret_f16_s64,
	vreinterpret_f16_u64, vreinterpret_f16_s8, vreinterpret_f16_s16,
	vreinterpret_f16_s32, vreinterpret_f16_u8, vreinterpret_f16_u16,
	vreinterpret_f16_u32, vreinterpret_f32_f16, vreinterpret_p64_f16,
	vreinterpret_s64_f16, vreinterpret_u64_f16, vreinterpret_s8_f16,
	vreinterpret_s16_f16, vreinterpret_s32_f16, vreinterpret_u8_f16,
	vreinterpret_u16_f16, vreinterpret_u32_f16): New.

	gcc/
	Backport from trunk r227536, r227558.
	2015-09-08  Alan Lawrence  <alan.lawrence@arm.com>

	* config/arm/arm.h (VALID_NEON_QREG_MODE): Add V8HFmode.

	* config/arm/arm.c (arm_vector_mode_supported_p): Support V8HFmode.

	* config/arm/arm-builtins.c (v8hf_UP): New.
	(arm_init_simd_builtin_types): Initialise Float16x8_t.

	* config/arm/arm-simd-builtin-types.def (Float16x8_t): New.

	* config/arm/arm_neon.h (float16x8_t): New typedef.

	gcc/
	Backport from trunk r227538, r227558.
	2015-09-08  Alan Lawrence  <alan.lawrence@arm.com>

	* config/arm/arm_neon.h (vgetq_lane_f16, vsetq_lane_f16, vld1q_lane_f16,
	vld1q_dup_f16, vreinterpretq_p8_f16, vreinterpretq_p16_f16,
	vreinterpretq_f16_p8, vreinterpretq_f16_p16, vreinterpretq_f16_f32,
	vreinterpretq_f16_p64, vreinterpretq_f16_p128, vreinterpretq_f16_s64,
	vreinterpretq_f16_u64, vreinterpretq_f16_s8, vreinterpretq_f16_s16,
	vreinterpretq_f16_s32, vreinterpretq_f16_u8, vreinterpretq_f16_u16,
	vreinterpretq_f16_u32, vreinterpretq_f32_f16, vreinterpretq_p64_f16,
	vreinterpretq_p128_f16, vreinterpretq_s64_f16, vreinterpretq_u64_f16,
	vreinterpretq_s8_f16, vreinterpretq_s16_f16, vreinterpretq_s32_f16,
	vreinterpretq_u8_f16, vreinterpretq_u16_f16, vreinterpretq_u32_f16):
	New.

	gcc/
	Backport from trunk r227541.
	2015-09-08  Alan Lawrence  <alan.lawrence@arm.com>

	* config/arm/arm-builtins.c (VAR11, VAR12): New.
	* config/arm/arm_neon_builtins.def (vcombine, vld2_dup, vld3_dup,
	vld4_dup): Add v4hf variant.
	(vget_high, vget_low): Add v8hf variant.
	(vld1, vst1, vst1_lane, vld2, vld2_lane, vst2, vst2_lane, vld3,
	vld3_lane, vst3, vst3_lane, vld4, vld4_lane, vst4, vst4_lane): Add
	v4hf and v8hf variants.

	* config/arm/iterators.md (VD_LANE, VD_RE, VQ2, VQ_HS): New.
	(VDX): Add V4HF.
	(V_DOUBLE): Add case for V4HF.
	(VQX): Add V8HF.
	(V_HALF): Add case for V8HF.
	(VDQX): Add V4HF, V8HF.
	(V_elem, V_two_elem, V_three_elem, V_four_elem, V_cmp_result,
	V_uf_sclr, V_sz_elem, V_mode_nunits, q): Add cases for V4HF & V8HF.

	* config/arm/neon.md (vec_set<mode>internal, vec_extract<mode>,
	neon_vget_lane<mode>_sext_internal, neon_vget_lane<mode>_zext_internal,
	vec_load_lanesoi<mode>, neon_vld2<mode>, vec_store_lanesoi<mode>,
	neon_vst2<mode>, vec_load_lanesci<mode>, neon_vld3<mode>,
	neon_vld3qa<mode>, neon_vld3qb<mode>, vec_store_lanesci<mode>,
	neon_vst3<mode>, neon_vst3qa<mode>, neon_vst3qb<mode>,
	vec_load_lanesxi<mode>, neon_vld4<mode>, neon_vld4qa<mode>,
	neon_vld4qb<mode>, vec_store_lanesxi<mode>, neon_vst4<mode>,
	neon_vst4qa<mode>, neon_vst4qb<mode>): Change VQ iterator to VQ2.

	(neon_vcreate, neon_vreinterpretv8qi<mode>,
	neon_vreinterpretv4hi<mode>, neon_vreinterpretv2si<mode>,
	neon_vreinterpretv2sf<mode>, neon_vreinterpretdi<mode>):
	Change VDX to VD_RE.

	(neon_vld2_lane<mode>, neon_vst2_lane<mode>, neon_vld3_lane<mode>,
	neon_vst3_lane<mode>, neon_vld4_lane<mode>, neon_vst4_lane<mode>):
	Change VD iterator to VD_LANE, and VMQ iterator to VQ_HS.

	* config/arm/arm_neon.h (float16x4x2_t, float16x8x2_t, float16x4x3_t,
	float16x8x3_t, float16x4x4_t, float16x8x4_t, vcombine_f16,
	vget_high_f16, vget_low_f16, vld1_f16, vld1q_f16, vst1_f16, vst1q_f16,
	vst1_lane_f16, vst1q_lane_f16, vld2_f16, vld2q_f16, vld2_lane_f16,
	vld2q_lane_f16, vld2_dup_f16, vst2_f16, vst2q_f16, vst2_lane_f16,
	vst2q_lane_f16, vld3_f16, vld3q_f16, vld3_lane_f16, vld3q_lane_f16,
	vld3_dup_f16, vst3_f16, vst3q_f16, vst3_lane_f16, vst3q_lane_f16,
	vld4_f16, vld4q_f16, vld4_lane_f16, vld4q_lane_f16, vld4_dup_f16,
	vst4_f16, vst4q_f16, vst4_lane_f16, vst4q_lane_f16): New.

	gcc/
	Backport from trunk r227542.
	2015-09-08  Alan Lawrence  <alan.lawrence@arm.com>

	* config/aarch64/aarch64.c (aarch64_vector_mode_supported_p): Support
	V4HFmode and V8HFmode.
	(aarch64_split_simd_move): Add case for V8HFmode.
	* config/aarch64/aarch64-builtins.c (v4hf_UP, v8hf_UP): Define.
	(aarch64_simd_builtin_std_type): Handle HFmode.
	(aarch64_init_simd_builtin_types): Include Float16x4_t and Float16x8_t.

	* config/aarch64/aarch64-simd.md (mov<mode>, aarch64_get_lane<mode>,
	aarch64_ld1<VALL:mode>, aarch64_st1<VALL:mode): Use VALL_F16 iterator.
	(aarch64_be_ld1<mode>, aarch64_be_st1<mode>): Use VALLDI_F16 iterator.

	* config/aarch64/aarch64-simd-builtin-types.def: Add Float16x4_t,
	Float16x8_t.

	* config/aarch64/aarch64-simd-builtins.def (ld1, st1): Use VALL_F16.
	* config/aarch64/arm_neon.h (float16x4_t, float16x8_t, float16_t):
	New typedefs.
	(vget_lane_f16, vgetq_lane_f16, vset_lane_f16, vsetq_lane_f16,
	vld1_f16, vld1q_f16, vst1_f16, vst1q_f16, vst1_lane_f16,
	vst1q_lane_f16): New.
	* config/aarch64/iterators.md (VD, VQ, VQ_NO2E): Add vectors of HFmode.
	(VALLDI_F16, VALL_F16): New.
	(Vmtype, VEL, VCONQ, VHALF, V_TWO_ELEM, V_THREE_ELEM, V_FOUR_ELEM, q):
	Add cases for V4HF and V8HF.
	(VDBL, VRL2, VRL3, VRL4): Add V4HF case.

	gcc/testsuite/
	Backport from trunk r227542.
	2015-09-08  Alan Lawrence  <alan.lawrence@arm.com>

	* g++.dg/abi/mangle-neon-aarch64.C: Add cases for float16x4_t and
	float16x8_t.
	* gcc.target/aarch64/vset_lane_1.c: Likewise.
	* gcc.target/aarch64/vld1-vst1_1.c: Likewise.
	* gcc.target/aarch64/vld1_lane.c: Likewise.

	gcc/
	Backport from trunk r227543.
	2015-09-08  Alan Lawrence  <alan.lawrence@arm.com>

	* config/aarch64/aarch64.c (aarch64_split_simd_combine): Add V4HFmode.
	* config/aarch64/aarch64-builtins.c (VAR13, VAR14): New.
	(aarch64_scalar_builtin_types, aarch64_init_simd_builtin_scalar_types):
	Add __builtin_aarch64_simd_hf.
	* config/aarch64/arm_neon.h (float16x4x2_t, float16x8x2_t,
	float16x4x3_t, float16x8x3_t, float16x4x4_t, float16x8x4_t,
	vcombine_f16, vst2_lane_f16, vst2q_lane_f16, vst3_lane_f16,
	vst3q_lane_f16, vst4_lane_f16, vst4q_lane_f16, vld2_f16, vld2q_f16,
	vld3_f16, vld3q_f16, vld4_f16, vld4q_f16, vld2_dup_f16, vld2q_dup_f16,
	vld3_dup_f16, vld3q_dup_f16, vld4_dup_f16, vld4q_dup_f16,
	vld2_lane_f16, vld2q_lane_f16, vld3_lane_f16, vld3q_lane_f16,
	vld4_lane_f16, vld4q_lane_f16, vst2_f16, vst2q_f16, vst3_f16,
	vst3q_f16, vst4_f16, vst4q_f16, vcreate_f16): New.

	* config/aarch64/iterators.md (VALLDIF, Vtype, Vetype, Vbtype,
	V_cmp_result, v_cmp_result): Add cases for V4HF and V8HF.
	(VDC, Vdbl): Add V4HF.

	gcc/testsuite/
	Backport from trunk r227543.
	2015-09-08  Alan Lawrence  <alan.lawrence@arm.com>

	* gcc.target/aarch64/vldN_1.c: Add float16x4_t and float16x8_t cases.
	* gcc.target/aarch64/vldN_dup_1.c: Likewise.
	* gcc.target/aarch64/vldN_lane_1.c: Likewise.
	(main): update orig_data to avoid float16 NaN on bigendian.

	gcc/
	Backport from trunk r227545.
	2015-09-08  Alan Lawrence  <alan.lawrence@arm.com>

	* config/aarch64/aarch64-simd.md (aarch64_float_truncate_lo_v2sf):
	Reparameterize to...
	(aarch64_float_truncate_lo_<mode>): ...this, for both V2SF and V4HF.
	(aarch64_float_truncate_hi_v4sf): Reparameterize to...
	(aarch64_float_truncate_hi_<Vdbl>): ...this, for both V4SF and V8HF.

	* config/aarch64/aarch64-simd-builtins.def (float_truncate_hi_): Add
	v8hf variant.
	(float_truncate_lo_): Use BUILTIN_VDF iterator.

	* config/aarch64/arm_neon.h (vcvt_f16_f32, vcvt_high_f16_f32): New.

	* config/aarch64/iterators.md (VDF, Vdtype): New.
	(VWIDE, Vmwtype): Add cases for V4HF and V2SF.

	gcc/
	Backport from trunk r227546.
	2015-09-08  Alan Lawrence  <alan.lawrence@arm.com>

	* config/aarch64/arm_neon.h (vreinterpret_p8_f16, vreinterpret_p16_f16,
	vreinterpret_f16_f64, vreinterpret_f16_s8, vreinterpret_f16_s16,
	vreinterpret_f16_s32, vreinterpret_f16_s64, vreinterpret_f16_f32,
	vreinterpret_f16_u8, vreinterpret_f16_u16, vreinterpret_f16_u32,
	vreinterpret_f16_u64, vreinterpret_f16_p8, vreinterpret_f16_p16,
	vreinterpretq_f16_f64, vreinterpretq_f16_s8, vreinterpretq_f16_s16,
	vreinterpretq_f16_s32, vreinterpretq_f16_s64, vreinterpretq_f16_f32,
	vreinterpretq_f16_u8, vreinterpretq_f16_u16, vreinterpretq_f16_u32,
	vreinterpretq_f16_u64, vreinterpretq_f16_p8, vreinterpretq_f16_p16,
	vreinterpret_f32_f16, vreinterpret_f64_f16, vreinterpret_s64_f16,
	vreinterpret_u64_f16, vreinterpretq_u64_f16, vreinterpret_s8_f16,
	vreinterpret_s16_f16, vreinterpret_s32_f16, vreinterpret_u8_f16,
	vreinterpret_u16_f16, vreinterpret_u32_f16, vreinterpretq_p8_f16,
	vreinterpretq_p16_f16, vreinterpretq_f32_f16, vreinterpretq_f64_f16,
	vreinterpretq_s64_f16, vreinterpretq_s8_f16, vreinterpretq_s16_f16,
	vreinterpretq_s32_f16, vreinterpretq_u8_f16, vreinterpretq_u16_f16,
	vreinterpretq_u32_f16, vget_low_f16, vget_high_f16, vld1_dup_f16,
	vld1q_dup_f16): New.

	gcc/testsuite/
	Backport from trunk r227546.
	2015-09-08  Alan Lawrence  <alan.lawrence@arm.com>

	* gcc.target/aarch64/vget_high_1.c: Add float16x8->float16x4 case.
	* gcc.target/aarch64/vget_low_1.c: Likewise.

	gcc/
	Backport from trunk r227550.
	2015-09-08  Alan Lawrence  <alan.lawrence@arm.com>

	* config/aarch64/aarch64-simd.md (aarch64_simd_dup<mode>,
	aarch64_dup_lane<mode>, aarch64_dup_lane_<vswap_width_name><mode>,
	aarch64_simd_vec_set<mode>, vec_set<mode>, vec_perm_const<mode>,
	vec_init<mode>, *aarch64_simd_ld1r<mode>, vec_extract<mode>): Add
	V4HF and V8HF variants to iterator.

	* config/aarch64/aarch64.c (aarch64_evpc_dup): Add V4HF and V8HF cases.

	* config/aarch64/iterators.md (VDQF_F16): New.
	(VSWAP_WIDTH, vswap_width_name): Add V4HF and V8HF cases.

	gcc/
	Backport from trunk r227551.
	2015-09-08  Alan Lawrence  <alan.lawrence@arm.com>

	* config/aarch64/aarch64-simd.md (aarch64_simd_vec_unpacks_lo_<mode>,
	aarch64_simd_vec_unpacks_hi_<mode>): New insn.
	(vec_unpacks_lo_v4sf, vec_unpacks_hi_v4sf): Delete insn.
	(vec_unpacks_lo_<mode>, vec_unpacks_hi_<mode>): New expand.
	(aarch64_float_extend_lo_v2df): Rename to...
	(aarch64_float_extend_lo_<Vwide>): this, using VDF and so adding V4SF.

	* config/aarch64/aarch64-simd-builtins.def (vec_unpacks_hi): Add v8hf.
	(float_extend_lo): Add v4sf.

	* config/aarch64/arm_neon.h (vcvt_f32_f16, vcvt_high_f32_f16): New.
	* config/aarch64/iterators.md (VQ_HSF): New iterator.
	(VWIDE, Vwtype, Vhalftype): Add V8HF, V4SF.
	(Vwide): New mode_attr.

	gcc/
	Backport from trunk r227552.
	2015-09-08  Alan Lawrence  <alan.lawrence@arm.com>

	* fold-const.c (native_interpret_real): Fix HFmode for bigendian where
	UNITS_PER_WORD >= 4.

	gcc/testsuite/
	Backport from trunk r227554.
	2015-09-08  Alan Lawrence  <alan.lawrence@arm.com>

	* gcc.target/aarch64/advsimd-intrinsics/advsimd-intrinsics.exp:
	Set additional_flags for neon-fp16 if supported, else fallback to neon.

	* gcc.target/aarch64/advsimd-intrinsics/arm-neon-ref.h
	(hfloat16_t): New.
	(result, expected, clean_results, DECL_VARIABLE_64BITS_VARIANTS,
	DECL_VARIABLE_128BITS_VARIANTS): Add float16x4_t and float16x8_t cases
	if supported.
	(CHECK_RESULTS): Redefine using CHECK_RESULTS_NAMED.
	(CHECK_RESULTS_NAMED): Move body to CHECK_RESULTS_NAMED_NO_FP16;
	redefine in terms of CHECK_RESULTS_NAMED_NO_FP16 with float16 variants
	when those are supported.
	(CHECK_RESULTS_NAMED_NO_FP16, CHECK_RESULTS_NO_FP16): New.
	(vdup_n_f16): New.

	* gcc.target/aarch64/advsimd-intrinsics/compute-ref-data.h (buffer,
	buffer_pad, buffer_dup, buffer_dup_pad): Add float16x4 and float16x8_t
	cases if supported.

	* gcc.target/aarch64/advsimd-intrinsics/vbsl.c (exec_vbsl):
	Use CHECK_RESULTS_NO_FP16 in place of CHECK_RESULTS.
	* gcc.target/aarch64/advsimd-intrinsics/vdup-vmov.c (exec_vdup_vmov):
	Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vdup_lane.c (exec_vdup_lane):
	Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vext.c (exec_vext): Likewise.

	* gcc.target/aarch64/advsimd-intrinsics/vcombine.c (expected):
	Add float16x8_t case.
	(main, exec_vcombine): test float16x4_t -> float16x8_t, if supported.
	* gcc.target/aarch64/advsimd-intrinsics/vcreate.c (expected,
	main, exec_vcreate): Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vget_high (expected,
	exec_vget_high): Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vget_low.c (expected,
	exec_vget_low): Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vld1.c (expected, exec_vld1):
	Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vld1_dup.c (expected,
	exec_vld1_dup): Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vld1_lane.c (expected,
	exec_vld1_lane): Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vldX.c (expected, exec_vldX):
	Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vldX_dup.c (expected,
	exec_vldX_dup): Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vldX_lane.c (expected,
	exec_vldX_lane): Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vset_lane.c (expected,
	exec_vset_lane): Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vst1_lane.c (expected,
	exec_vst1_lane): Likewise.

	gcc/testsuite/
	Backport from trunk r227555.
	2015-09-08  Alan Lawrence  <alan.lawrence@arm.com>

	* gcc.target/aarch64/advsimd-intrinsics/vcvt_f16.c: New.
	* lib/target-supports.exp
	(check_effective_target_arm_neon_fp16_hw): New.

	gcc/
	Backport from trunk r227556.
	2015-09-08  Alan Lawrence  <alan.lawrence@arm.com>

	* doc/sourcebuild.texi (arm_neon_fp16): Correct cross-reference.
	(arm_neon_fp16_ok): Document adding of -mfp16-format=ieee flag.
	(arm_neon_fp16_hw): New.

	gcc/testsuite/
	Backport from trunk r227557.
	2015-09-08  Alan Lawrence  <alan.lawrence@arm.com>

	PR target/63870
	* gcc.target/aarch64/advsimd-intrinsics/vld2_lane_f16_indices_1.c: New.
	* gcc.target/aarch64/advsimd-intrinsics/vld2q_lane_f16_indices_1.c: New.
	* gcc.target/aarch64/advsimd-intrinsics/vld3_lane_f16_indices_1.c: New.
	* gcc.target/aarch64/advsimd-intrinsics/vld3q_lane_f16_indices_1.c: New.
	* gcc.target/aarch64/advsimd-intrinsics/vld4_lane_f16_indices_1.c: New.
	* gcc.target/aarch64/advsimd-intrinsics/vld4q_lane_f16_indices_1.c: New.
	* gcc.target/aarch64/advsimd-intrinsics/vst2_lane_f16_indices_1.c: New.
	* gcc.target/aarch64/advsimd-intrinsics/vst2q_lane_f16_indices_1.c: New.
	* gcc.target/aarch64/advsimd-intrinsics/vst3_lane_f16_indices_1.c: New.
	* gcc.target/aarch64/advsimd-intrinsics/vst3q_lane_f16_indices_1.c: New.
	* gcc.target/aarch64/advsimd-intrinsics/vst4_lane_f16_indices_1.c: New.
	* gcc.target/aarch64/advsimd-intrinsics/vst4q_lane_f16_indices_1.c: New.

2015-10-27  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r227211.
	2015-08-26  Matthew Wahab  <matthew.wahab@arm.com>

	* gcc/config/arm/arm-cores.def: Add FL_FOR_ARCH flag for each
	ARM_CORE entry.  Fix some white-space.
	* gcc/config/arm/arm.c: Remove FL_FOR_ARCH derivation from
	ARM_CORE definition.

	gcc/
	Backport from trunk r227214.
	2015-08-26  Matthew Wahab  <matthew.wahab@arm.com>

	* config/arm/arm-protos.h (FL_NONE): New.
	(FL_ANY): New.
	(arm_feature_set): New.
	(ARM_FSET_MAKE): New.
	(ARM_FSET_MAKE_CPU1): New.
	(ARM_FSET_MAKE_CPU2): New.
	(ARM_FSET_CPU1): New.
	(ARM_FSET_CPU2): New.
	(ARM_FSET_EMPTY): New.
	(ARM_FSET_ANY): New.
	(ARM_FSET_HAS_CPU1): New.
	(ARM_FSET_HAS_CPU2): New.
	(ARM_FSET_HAS_CPU): New.
	(ARM_FSET_ADD_CPU1): New.
	(ARM_FSET_ADD_CPU2): New.
	(ARM_FSET_DEL_CPU1): New.
	(ARM_FSET_DEL_CPU2): New.
	(ARM_FSET_UNION): New.
	(ARM_FSET_INTER): New.
	(ARM_FSET_XOR): New.
	(ARM_FSET_EXCLUDE): New.
	(AFM_FSET_IS_EMPTY): New.
	(ARM_FSET_CPU_SUBSET): New.

	gcc/
	Backport from trunk r227217.
	2015-08-26  Matthew Wahab  <matthew.wahab@arm.com>

	* config/arm/arm-builtins.c (def_mbuiltin): Use ARM_FSET macro.
	(struct builtin_description): Change type of mask to unsigned
	long.
	* config/arm/arm-protos.h (insn_flags): Declare as type
	arm_feature_set.
	(tune_flags): Likewise.
	* config/arm/arm.c (feature_count): New.
	(insn_flags): Define as type arm_feature_set.
	(tune_flags): Likewise.
	(struct processors): Define field flags as type arm_feature_set.
	(all_cores): Update for change to struct processors.
	(all_architectures): Likewise.
	(arm_option_check_internal): Use arm_feature_set and ARM_FSET
	macros.
	(arm_option_override_internal): Likewise.
	(arm_option_override): Likewise.

	gcc/
	Backport from trunk r227218.
	2015-08-26  Matthew Wahab  <matthew.wahab@arm.com>

	* config/arm/arm-builtins.c (def_mbuiltin): Test all flags in a
	feature set.
	(struct builtin_description): Replace field mask with field
	features.
	(IWMMXT_BUILTIN): Use ARM_FSET macros for feature flags.
	(IWMMXT2_BUILTIN): Likewise.
	(IWMMXT2_BUILTIN2): Likewise.
	(FP_BUILTIN): Likewise.
	(CRC32_BUILTIN): Likewise.
	(CRYPTO_BUILTIN): Likewise.
	(iwmmx_mbuiltin): Likewise.
	(iwmmx2_mbuiltin): Likewise.
	(arm_init_iwmmxt_builtins): Likewise. Also, update for change to
	struct builtin_description.

	gcc/
	Backport from trunk r227219.
	2015-08-26  Matthew Wahab  <matthew.wahab@arm.com>

	* config/arm/arm-arches.def: Replace single value flags with
	an initializer built from ARM_FSET_MAKE_CPU1.
	* config/arm/arm-cores.def: Likewise.
	* config/arm/arm.c: (all_cores): Remove ARM_FSET_MAKE_CPU1
	derivation from the ARM_CORE macro definition, use the given value
	instead.
	(all_architectures): Remove ARM_FSET_MAKE_CPU1 derivation from the
	ARM_ARCH macro definition, use the given value instead.

2015-10-27  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r227117.
	2015-08-24  Andrew Pinski  <apinski@cavium.com>

	* config/aarch64/aarch64-tuning-flags.def: Remove all index to
	AARCH64_EXTRA_TUNING_OPTION.
	* config/aarch64/aarch64-protos.h (aarch64_extra_tuning_flags_index): New enum.
	(aarch64_extra_tuning_flags): Base the shifted value on the index instead
	of the argument to AARCH64_EXTRA_TUNING_OPTION.
	* config/aarch64/aarch64.c: Remove the last argument to
	AARCH64_EXTRA_TUNING_OPTION.

2015-10-27  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r227094.
	2015-08-22  Andrew Pinski  <apinski@cavium.com>

	* aarch64-fusion-pairs.def: Remove all index to AARCH64_FUSION_PAIR.
	* config/aarch64/aarch64-protos.h
	(aarch64_fusion_pairs_index): New enum.
	(aarch64_fusion_pairs): Base the shifted value on the index instead
	Rewrite AARCH64_FUSE_ALL to be based on the end index.
	of the argument to AARCH64_FUSION_PAIR.
	* config/aarch64/aarch64.c: Remove the last argument to
	AARCH64_FUSION_PAIR.

2015-10-27  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r227018.
	2015-08-19  Jiong Wang  <jiong.wang@arm.com>

	* expr.c (expand_expr_real_2): Check gimple statement during
	LSHIFT_EXPR expand.

	gcc/testsuite/
	Backport from trunk r227018.
	2015-08-19  Jiong Wang  <jiong.wang@arm.com>

	* gcc.dg/wide_shift_64_1.c: New testcase.
	* gcc.dg/wide_shift_128_1.c: Likewise.
	* gcc.target/aarch64/ashlti3_1.c: Likewise.

2015-10-27  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r227012.
	2015-08-19  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config/aarch64/aarch64.c (bit_count): Delete prototype
	and definition.
	(aarch64_print_operand): Use popcount_hwi instead of the above.

2015-10-27  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r227011.
	2015-08-19  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config/aarch64/aarch64-option-extensions.def: Delete obsolete
	comment.

2015-10-27  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r227002.
	2015-08-19  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config/arm/arm.c (bounds_check): Use %wd print format
	for HOST_WIDE_INT arguments.

2015-10-27  Yvan Roux  <yvan.roux@linaro.org>

	gcc/testsuite/
	Backport from trunk r226979.
	2015-08-18  Matthew Wahab  <matthew.wahab@arm.com>

	* gcc.target/aarch64/atomic-comp-swap-release-acquire.c: Adjust
	dg-options to disable LSE extensions.
	* gcc.target/aarch64/atomic-op-acq_rel.c: Likewise.
	* gcc.target/aarch64/atomic-op-acquire.c: Likewise.
	* gcc.target/aarch64/atomic-op-char.c: Likewise.
	* gcc.target/aarch64/atomic-op-consume.c: Likewise.
	* gcc.target/aarch64/atomic-op-imm.c: Likewise.
	* gcc.target/aarch64/atomic-op-int.c: Likewise.
	* gcc.target/aarch64/atomic-op-long.c: Likewise.
	* gcc.target/aarch64/atomic-op-relaxed.c: Likewise.
	* gcc.target/aarch64/atomic-op-seq_cst.c: Likewise.
	* gcc.target/aarch64/atomic-op-release.c: Likewise.
	* gcc.target/aarch64/atomic-op-short.c: Likewise.
	* gcc.target/aarch64/sync-comp-swap.c: Likewise.
	* gcc.target/aarch64/sync-op-acquire.c: Likewise.
	* gcc.target/aarch64/sync-op-full.c: Likewise.
	* gcc.target/aarch64/sync-op-release.c: Likewise.

2015-10-27  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r226935.
	2015-08-17  Mike Stump  <mikestump@comcast.net>

	* config/arm/arm.c (arm_block_move_unaligned_straight):
	Emit normal move instead of unaligned load when source or destination
	are appropriately aligned.

	gcc/testsuite/
	Backport from trunk r226935.
	2015-08-17 Mike Stump  <mikestump@comcast.net>
	           Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* gcc.target/arm/memcpy-aligned-1.c: New test.

2015-10-27  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r226885.
	2015-08-14  James Greenhalgh  <james.greenhalgh@arm.com>

	* config/arm/types.md (is_neon_type): Add missing types.

2015-10-27  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r226818.
	2015-08-12  Matthew Wahab  <matthew.wahab@arm.com>

	* config/arm/arm.h (arm_fpu_feature_set): New.
	(ARM_FPU_FSET_HAS): New.
	(FPU_FL_NONE): New.
	(FPU_FL_NEON): New.
	(FPU_FL_FP16): New.
	(FPU_FL_CRYPTO): New.

	gcc/
	Backport from trunk r226821.
	2015-08-12  Matthew Wahab  <matthew.wahab@arm.com>

	* config/arm/arm-fpus.def: Replace booleans with feature flags.
	Update comment.
	* config/arm/arm.c (ARM_FPU): Update macro.
	* config/arm/arm.h (TARGET_NEON_FP16): Update feature test.
	(TARGET_FP16): Likewise.
	(TARGET_CRYPTO): Likewise.
	(TARGET_NEON): Likewise.
	(struct arm_fpu_desc): Remove fields neon, fp16 and crypto.  Add
	field features.

2015-10-27  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r226574.
	2015-08-04  Christophe Lyon  <christophe.lyon@linaro.org>

	* config/arm/neon.md (neon_vget_lanev2di): Handle big-endian
	targets.

2015-10-27  Christophe Lyon  <christophe.lyon@linaro.org>

	gcc/
	Backport from trunk r225121.
	2015-06-29  Jiong Wang  <jiong.wang@arm.com>

	* config/arch64/aarch64.md (UNSPEC_TLSLE): New enumeration.
	* config/arch64/aarch64.md (tlsle_small): Rename to tlsle and use new
	unspec name.
	(tlsle_small_<mode>): Rename to tlsle_<mode> and use new unspec name.
	* config/arch64/aarch64-protos.h (arch64_symbol_type): Rename
	SYMBOL_SMALL_TPREL to SYMBOL_TLSLE.
	(aarch64_symbol_context): Ditto.
	* config/aarch64/aarch64.c (aarch64_load_symref_appropriately): Ditto
	and use new pattern name.
	(aarch64_expand_mov_immediate): Ditto.
	(aarch64_print_operand): Ditto.
	(aarch64_classify_tls_symbol): Ditto.

2015-10-27  Christophe Lyon  <christophe.lyon@linaro.org>

	gcc/testsuite/
	Backport from trunk r225538.
	2015-07-08  Renlin Li  <renlin.li@arm.com>

	* gcc.target/arm/unsigned-float.c: Different options for hf toolchain.

2015-10-26  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r226491.
	2015-08-03  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* ifcvt.c (noce_try_store_flag_constants): Make logic of the case
	when diff == STORE_FLAG_VALUE or diff == -STORE_FLAG_VALUE more
	explicit.  Prefer to add the flag whenever possible.
	(noce_process_if_block): Try noce_try_store_flag_constants before
	noce_try_cmove.

	gcc/testsuite/
	Backport from trunk r226491.
	2015-08-03  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* gcc.target/aarch64/csel_bfx_1.c: New test.
	* gcc.target/aarch64/csel_imms_inc_1.c: Likewise.

	gcc/
	Backport from trunk r226853.
	2015-08-13  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	PR rtl-optimization/67103
	* ifcvt.c (noce_try_store_flag_constants): Move
	x = (-(test != 0) & (b - a)) + a transformation to...
	(noce_try_cmove): ... Here.  Try it if normal conditional
	move fails.

2015-10-15  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	* LINARO-VERSION: Bump version number, post snapshot.

2015-10-15  Yvan Roux  <yvan.roux@linaro.org>

	Make Linaro GCC Snapshot 5.2-2015.10.

	gcc/
	* LINARO-VERSION: Update.

2015-10-15  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r228837.
	2015-10-15  Jiong Wang  <jiong.wang@arm.com>

	* config.gcc: Recognize "." in architecture base name for AArch64.

2015-10-15  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r224673.
	2015-06-19  Jim Wilson  <jim.wilson@linaro.org>

	* config/aarch64/aarch64.md (mov<mode>:GPF): Don't call force_reg if
	op1 is an fp zero.
	(movsf_aarch64): Change condition from register_operand to
	aarch64_reg_or_fp_zero for op1.  Change type for alternative 6 to
	load1.  Change type for alternative 7 to store1.
	(movdf_aarch64): Likewise.

	gcc/testsuite/
	Backport from trunk r224673.
	2015-06-19  Jim Wilson  <jim.wilson@linaro.org>

	* gcc.target/aarch64/fmovd-zero-mem.c: New.
	* gcc.target/aarch64/fmovd-zero-reg.c: New.
	* gcc.target/aarch64/fmovf-zero-mem.c: New.
	* gcc.target/aarch64/fmovf-zero-reg.c: New.
	* gcc.target/aarch64/fmovld-zero-mem.c: New.
	* gcc.target/aarch64/fmovld-zero-mem.c: New.
	* gcc.target/aarch64/fmovd-zero.c: Delete.
	* gcc.target/aarch64/fmovf-zero.c: Delete.

2015-10-15  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r226134.
	2015-07-23  Kugan Vivekanandarajah  <kuganv@linaro.org>

	* cse.c (cse_insn): Fix missing check for STRICT_LOW_PART and minor
	clean up.

	gcc/
	Backport from trunk r226135.
	2015-07-23  Kugan Vivekanandarajah  <kuganv@linaro.org>

	* config/arm/arm.c (arm_emit_movpair): Add REG_EQUAL notes to
	instruction.

	gcc/testsuite/
	Backport from trunk r226135.
	2015-07-23  Kugan Vivekanandarajah  <kuganv@linaro.org>

	* gcc.target/arm/reg_equal_test.c: New test.

2015-10-15  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r227407.
	2015-09-02  Charles Baylis  <charles.baylis@linaro.org>

	* cgraphunit.c (cgraph_node::create_wrapper): Set can_throw_external
	in new callgraph edge.

2015-10-15  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r226540.
	2015-08-04  Thomas Preud'homme  <thomas.preudhomme@arm.com>

	PR tree-optimization/67043
	* loop-invariant.c (move_invariant_reg): Recompute luids in loop
	preheader after hoisting invariant in it.
	(find_defs): Force recomputation of all luids.

	gcc/testsuite/
	Backport from trunk r226540.
	2015-08-04  Thomas Preud'homme  <thomas.preudhomme@arm.com>

	PR tree-optimization/67043
	* gcc.dg/pr67043.c: New test.

2015-10-14  Yvan Roux  <yvan.roux@linaro.org>

	gcc/testsuite/
	Backport from trunk r223507.
	2015-05-21  Sandra Loosemore  <sandra@codesourcery.com>

	* gcc.dg/vect/bb-slp-pr65935.c: Remove explicit "dg-do run".
	* gcc.dg/vect/pr59354.c: Likewise.
	* gcc.dg/vect/pr64252.c: Likewise.
	* gcc.dg/vect/pr64404.c: Likewise.
	* gcc.dg/vect/pr64493.c: Likewise.
	* gcc.dg/vect/pr64495.c: Likewise.
	* gcc.dg/vect/pr64844.c: Likewise.
	* gcc.dg/vect/pr65518.c: Likewise.
	* gcc.dg/vect/vect-aggressive-1.c: Likewise.

2015-10-14  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r226528.
	2015-08-03  Alexander Basov <coohpt@gmail.com>

	PR middle-end/64744
	PR middle-end/48470
	PR middle-end/43404
	* cfgexpand.c (expand_one_var): Add check if stack is going to
	be used in naked function.
	* expr.c (expand_expr_addr_expr_1): Remove excess checking
	whether expression should not reside in MEM.
	* function.c (use_register_for_decl): Do not use registers for
	non-register things (volatile, float, BLKMode) in naked functions.

	gcc/testsuite/
	Backport from trunk r226528.
	2015-08-03  Alexander Basov <coohpt@gmail.com>

	PR middle-end/64744
	PR middle-end/48470
	PR middle-end/43404
	* gcc.target/arm/pr43404.c : New testcase.
	* gcc.target/arm/pr48470.c : New testcase.
	* gcc.target/arm/pr64744-1.c : New testcase.
	* gcc.target/arm/pr64744-2.c : New testcase.

2015-10-14  Yvan Roux  <yvan.roux@linaro.org>

	./
	Backport from trunk r226408.
	2015-07-29  Alan Lawrence  <alan.lawrence@arm.com>

	* config/aarch64/iterators.md (VRL2, VRL3, VRL4): Remove values for
	128-bit vector modes.

2015-10-14  Yvan Roux  <yvan.roux@linaro.org>

	gcc/testsuite/
	Backport from trunk r226353.
	2015-07-29  Alan Lawrence  <alan.lawrence@arm.com>

	* gcc.target/aarch64/vld1_lane.c (main): Remove unused test data.
	(CHECK): Pass address of scalar, rather than array.

2015-10-14  Yvan Roux  <yvan.roux@linaro.org>

	gcc/testsuite/
	Backport from trunk r226352.
	2015-07-29  Alan Lawrence  <alan.lawrence@arm.com>

	* gcc.target/aarch64/vld1-vst1_1.c: Add missing float32x4_t case.

2015-10-14  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r226253.
	2015-07-27  Wilco Dijkstra  <wdijkstr@arm.com>

	* gcc/config/aarch64/aarch64.md (aarch64_lshr_sisd_or_int_<mode>3):
	Place integer variant first.
	(aarch64_ashr_sisd_or_int_<mode>3): Likewise.

2015-10-14  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r226247.
	2015-07-27  Wilco Dijkstra  <wdijkstr@arm.com>

	* config/aarch64/aarch64.md (aarch64_ashl_sisd_or_int_<mode>3):
	Place integer variant first.

2015-10-14  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r226251.
	2015-07-27  Alan Lawrence  <alan.lawrence@arm.com>

	PR/63870
	* config/arm/arm-builtins.c (enum arm_type_qualifiers):
	Add qualifier_lane_index.
	(arm_binop_imm_qualifiers, BINOP_IMM_QUALIFIERS): New.
	(arm_getlane_qualifiers): Use qualifier_lane_index.
	(arm_lanemac_qualifiers): Rename to...
	(arm_mac_n_qualifiers): ...this.
	(LANEMAC_QUALIFIERS): Rename to...
	(MAC_N_QUALIFIERS): ...this.
	(arm_mac_lane_qualifiers, MAC_LANE_QUALIFIERS): New.
	(arm_setlane_qualifiers): Use qualifier_lane_index.
	(arm_ternop_imm_qualifiers, TERNOP_IMM_QUALIFIERS): New.
	(enum builtin_arg): Add NEON_ARG_LANE_INDEX.
	(arm_expand_neon_args): Handle NEON_ARG_LANE_INDEX.
	(arm_expand_neon_builtin): Handle qualifier_lane_index.

	* config/arm/arm-protos.h (neon_lane_bounds): Add const_tree parameter.
	* config/arm/arm.c (bounds_check): Likewise, improve error message.
	(neon_lane_bounds, neon_const_bounds): Add arguments to bounds_check.
	* config/arm/arm_neon_builtins.def (vshrs_n, vshru_n, vrshrs_n,
	vrshru_n, vshrn_n, vrshrn_n, vqshrns_n, vqshrnu_n, vqrshrns_n,
	vqrshrnu_n, vqshrun_n, vqrshrun_n, vshl_n, vqshl_s_n, vqshl_u_n,
	vqshlu_n, vshlls_n, vshllu_n): Change qualifiers to BINOP_IMM.
	(vsras_n, vsrau_n, vrsras_n, vrsrau_n, vsri_n, vsli_n): Change
	qualifiers to TERNOP_IMM.
	(vdup_lane): Change qualifiers to GETLANE.
	(vmla_lane, vmlals_lane, vmlalu_lane, vqdmlal_lane, vmls_lane,
	vmlsls_lane, vmlslu_lane, vqdmlsl_lane): Change qualifiers to MAC_LANE.
	(vmla_n, vmlals_n, vmlalu_n, vqdmlal_n, vmls_n, vmlsls_n, vmlslu_n,
	vqdmlsl_n): Change qualifiers to MAC_N.

	* config/arm/neon.md (neon_vget_lane<mode>, neon_vget_laneu<mode>,
	neon_vget_lanedi, neon_vget_lanev2di, neon_vset_lane<mode>,
	neon_vset_lanedi, neon_vdup_lane<mode>, neon_vdup_lanedi,
	neon_vdup_lanev2di, neon_vmul_lane<mode>, neon_vmul_lane<mode>,
	neon_vmull<sup>_lane<mode>, neon_vqdmull_lane<mode>,
	neon_vq<r>dmulh_lane<mode>, neon_vq<r>dmulh_lane<mode>,
	neon_vmla_lane<mode>, neon_vmla_lane<mode>, neon_vmlal<sup>_lane<mode>,
	neon_vqdmlal_lane<mode>, neon_vmls_lane<mode>, neon_vmls_lane<mode>,
	neon_vmlsl<sup>_lane<mode>, neon_vqdmlsl_lane<mode>):
	Remove call to neon_lane_bounds.

	gcc/
	Backport from trunk r226252.
	2015-07-27  Alan Lawrence  <alan.lawrence@arm.com>

	PR/63870
	* config/arm/arm-builtins.c (enum arm_builtins):
	Add ARM_BUILTIN_NEON_BASE and ARM_BUILTIN_NEON_LANE_CHECK.
	(ARM_BUILTIN_NEON_BASE): Rename macro to....
	(ARM_BUILTIN_NEON_PATTERN_START): ...this.
	(arm_init_neon_builtins): Register __builtin_arm_lane_check.
	(arm_expand_neon_builtin): Handle ARM_BUILTIN_NEON_LANE_CHECK.

2015-10-14  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r226243.
	2015-07-27  Matthew Wahab  <matthew.wahab@arm.com>

	* config/arm/arm-arches.def: Add "armv6kz". Replace 6ZK with 6KZ
	and FL_FOR_ARCH6ZK with FL_FOR_ARCH6KZ.
	* config/arm/arm-c.c (arm_cpu_builtins): Emit "__ARM_ARCH_6ZK__"
	for armv6kz targets.
	* config/arm/arm-cores.def: Replace 6ZK with 6KZ.
	* config/arm/arm-protos.h (FL_ARCH6KZ): New.
	(FL_FOR_ARCH6ZK): Remove.
	(FL_FOR_ARCH6KZ): New.
	(arm_arch6zk): New declaration.
	* config/arm/arm-tables.opt: Regenerate.
	* config/arm/arm.c (arm_arch6kz): New.
	(arm_option_override): Set arm_arch6kz.
	* config/arm/arm.h (BASE_ARCH_6ZK): Rename to BASE_ARCH_6KZ.
	* config/arm/driver-arm.c: Add comment to "armv6zk" entry.
	        * doc/invoke.texi: Replace "armv6zk" with "armv6kz".

2015-10-14  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r226069.
	2015-07-22  James Greenhalgh  <james.greenhalgh@arm.com>

	* config/arm/cortex-a53 (cortex_53_advsimd): Rename to...
	(cortex_a53_advsimd): ...This.

2015-10-13  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r225996.
	2015-07-20  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* combine.c (combine_simplify_rtx): Move simplification step
	before various transformations/substitutions.

	gcc/
	Backport from trunk r225997.
	2015-07-20  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* simplify-rtx.c (simplify_unary_operation_1, NEG case):
	(neg (x ? (neg y) : y)) -> !x ? (neg y) : y.

	gcc/testsuite/
	Backport from trunk r225997.
	2015-07-20  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* gcc.target/aarch64/neg_abs_1.c: New test.

2015-10-13  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r225921.
	2015-07-17  Yvan Roux  <yvan.roux@linaro.org>
	    Matthias Klose  <doko@ubuntu.com>

	* configure.ac: Move AC_ARG_WITH checks for native-system-header-dir,
	build-sysroot, sysroot from the `Miscenalleous configure options' to
	the `Directories' section and strip trailing `/' from with_sysroot.
	(gcc_gxx_include_dir): Don't strip a `/' sysroot value.
	* configure: Regenerated.

2015-10-13  Yvan Roux  <yvan.roux@linaro.org>

	gcc/testsuite/
	Backport from trunk r225892.
	2015-07-16  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* gcc.target/arm/no-volatile-in-it.c: Skip if -mcpu is overriden.

2015-10-13  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r225830.
	2015-07-15  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config/aarch64/aarch64.md (*csinc2<mode>_insn): Use cinc mnemonic.

2015-10-13  Yvan Roux  <yvan.roux@linaro.org>

	gcc/testsuite/
	Backport from trunk r225814.
	2015-07-15  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* gcc.target/arm/scd42-1.c: Add -mfloat-abi=softfp and appropriate
	dg-skip-if.
	* gcc.target/arm/scd42-3.c: Likewise.

2015-10-13  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r225722.
	2015-07-12  Kugan Vivekanandarajah  <kuganv@linaro.org>

	PR middle-end/66726
	* tree-ssa-phiopt.c(factor_out_conditional_conversion): New function.
	tree_ssa_phiopt_worker): Call it.

	gcc/testsuite/
	Backport from trunk r225722.
	2015-07-12  Kugan Vivekanandarajah  <kuganv@linaro.org>
	    Jeff Law  <law@redhat.com>

	PR middle-end/66726
	* g++.dg/tree-ssa/pr66726.c: New test.
	* gcc.dg/tree-ssa/pr66726-2.c: New test.
	* gcc.dg/tree-ssa/pr66726.c: New test.

2015-10-13  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r225721.
	2015-07-12  Kugan Vivekanandarajah  <kuganv@linaro.org>

	* cse.c (cse_insn): Calculate src_eqv for ZERO_EXTRACT.
	* emit-rtl.c (set_for_reg_notes): Allow ZERO_EXTRACT to set
	REG_EQUAL note.

2015-10-13  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r225508.
	2015-07-07  Prathamesh Kulkarni  <prathamesh.kulkarni@linaro.org>

	* function.c (free_after_compilation): Clear PROP_cfg in f->curr_properties.

	gcc/testsuite/
	Backport from trunk r225508.
	2015-07-07  Prathamesh Kulkarni  <prathamesh.kulkarni@linaro.org>

	* gcc.dg/dx-test.c: New test-case.

2015-10-13  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r225384.
	2015-07-03  James Greenhalgh  <james.greenhalgh@arm.com>

	* doc/invoke.texi (moverride): Move to correct section.

2015-10-13  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r224075.
	2015-06-03  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* ifcvt (end_ifcvt_sequence): Fix typo in comment above.

2015-10-12  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r222995, r222996.
	2015-05-11  Christian Bruel  <christian.bruel@st.com>

	* config/arm/arm.c (arm_option_override): Reoganized and split into :
	(arm_option_params_internal); New function.
	(arm_option_check_internal): New function.
	(arm_option_override_internal): New function.
	(thumb_code, thumb1_code): Remove.
	* config/arm/arm.h (TREE_TARGET_THUMB, TREE_TARGET_THUMB1): New macros.
	(TREE_TARGET_THUM2, TREE_TARGET_ARM): Likewise.
	(thumb_code, thumb1_code): Remove.
	* config/arm/arm.md (is_thumb, is_thumb1): Check TARGET flag.

	gcc/
	Backport from trunk r222997.
	2015-05-11  Christian Bruel  <christian.bruel@st.com>

	* config/arm/arm-protos.h (arm_declare_function_name): Declare.
	(is_called_in_ARM_mode): Remove.
	* config/arm/arm.c (is_called_in_ARM_mode): Declare static bool.
	(arm_declare_function_name): Moved from from ARM_DECLARE_FUNCTION_NAME.
	* config/arm/arm.h (ARM_DECLARE_FUNCTION_NAME): Call
	 arm_declare_function_name.

	gcc/
	Backport from trunk r223000.
	2015-05-11  Christian Bruel  <christian.bruel@st.com>

	* config/arm/arm-protos.h (thumb_code, thumb1_code): Remove.
	* config/arm/vxworks.h (thumb_code): Replace with TARGET_THUMB.

	gcc/
	Backport from trunk r223698.
	2015-05-26  Christian Bruel  <christian.bruel@st.com>

	* c-common.h (builtin_define_with_int_value)
	(builtin_define_type_sizeof): Declare.
	* c-cppbuiltin.c (builtin_define_with_int_value)
	(builtin_define_type_sizeof): Externalize.
	(builtin_define_std): Cleanup declaration.
	* config/arm/arm-protos.h (arm_cpu_cpp_builtins): Declare.
	* config/arm/arm.h (TARGET_CPU_CPP_BUILTINS): Move macro defines into...
	* config/arm/arm-c.c (arm_cpu_cpp_builtins): New function.
	(builtin_define, builtin_assert): New macros.

	gcc/
	Backport from trunk r223699.
	2015-05-13  Christian Bruel  <christian.bruel@st.com>

	PR target/52144
	* config/arm/arm.c (arm_option_check_internal)
	(arm_option_params_internal): Check opts->target_flags to set macros.
	(TREE_TARGET_ARM, TREE_TARGET_THUMB)
	(TREE_TARGET_THUMB1, TREE_TARGET_THUMB2) Replace with...
	(TARGET_ARM_P, TARGET_THUMB_P, TARGET_THUMB1_P, TARGET_THUMB2_P)
	(builtin_define): Replaced with def_or_undef_macro.
	* config/arm/arm.h (TREE_TARGET_ARM, TREE_TARGET_THUMB)
	TREE_TARGET_THUMB1, TREE_TARGET_THUMB2) Redefine with...
	(TARGET_ARM_P, TARGET_THUMB_P, TARGET_THUMB1_P, TARGET_THUMB2_P)
	(TARGET_32BIT_P, TARGET_ARM_QBIT_P, TARGET_ARM_SAT_P, TARGET_IDIV_P)
	(TARGET_HAVE_LDREX_P, TARGET_HAVE_LDREXBH_P, TARGET_HAVE_LDREXD_P)
	(TARGET_ARM_FEATURE_LDREX_P)
	(TARGET_DSP_MULTIPLY_P, TARGET_INT_SIMD_P): New macros.
	(def_or_undef_macro): New function.

	gcc/
	Backport from trunk r223700.
	2015-05-26  Christian Bruel  <christian.bruel@st.com>

	* config/arm/arm-c.c (def_or_undef_macro): New function.
	(arm_cpu_cpp_builtins): Use def_or_undef_macro for macros definition.

	gcc/
	Backport from trunk r224314.
	2015-06-09  Christian Bruel  <christian.bruel@st.com>

	PR target/52144
	* config/arm/arm.opt (THUMB, arm_restrict_it, inline_asm_unified): Save.
	* config/arm/arm-protos.h (arm_valid_target_attribute_tree): Declare.
	(arm_reset_previous_fndecl, arm_change_mode_p): Likewise.
	* config/arm/arm.h (SWITCHABLE_TARGET): Define.
	* config/arm/arm.c (arm_reset_previous_fndecl): New functions.
	(arm_valid_target_attribute_tree, arm_change_mode_p): Likewise.
	(arm_valid_target_attribute_p): Likewise.
	(arm_set_current_function, arm_can_inline_p): Likewise.
	(arm_valid_target_attribute_rec): Likewise.
	(arm_previous_fndecl): New variable.
	(TARGET_SET_CURRENT_FUNCTION, TARGET_OPTION_VALID_ATTRIBUTE_P): Define.
	(TARGET_CAN_INLINE_P): Define.
	(arm_asm_trampoline_template): Emit mode.
	(arm_file_start): Don't set unified syntax.
	(arm_declare_function_name): Set unified syntax and mode.
	(arm_option_override): Init target_option_default_node.
	and target_option_current_node.
	* config/arm/arm.md (*call_value_symbol): Set mode when possible.
	(*call_symbol): Likewise.
	* doc/extend.texi: Document ARM/Thumb target attribute.
	* doc/invoke.texi: Likewise.

	gcc/testsuite/
	Backport from trunk r224314.
	2015-06-09  Christian Bruel  <christian.bruel@st.com>

	PR target/52144
	* gcc.target/arm/attr_arm.c: New test
	* gcc.target/arm/attr_arm-err.c: New test
	* gcc.target/arm/attr_thumb.c: New test
	* gcc.target/arm/attr_thumb-static.c: New test

	gcc/
	Backport from trunk r224365.
	2015-06-11  Christian Bruel  <christian.bruel@st.com>

	PR target/52144
	* config/arm/arm-c.c (arm_cpu_cpp_builtins): Conditionally define
	 macros in ...
	(arm_cpu_builtins): New function.
	(arm_pragma_target_parse): Call arm_cpu_builtins.
	* config/arm/arm-protos.h (arm_cpu_builtins): Declare.
	(arm_register_target_pragmas): Likewise.
	* config/arm/arm.h (REGISTER_TARGET_PRAGMAS):
	 Call arm_register_target_pragmas.
	* config/arm/arm-c.c (arm_register_target_pragmas): New function.
	(arm_pragma_target_parse): Likewise.

	gcc/testsuite/
	Backport from trunk r224365, r224366.
	2015-06-11  Christian Bruel  <christian.bruel@st.com>

	PR target/52144
	* gcc.target/arm/pragma_attribute.c: New test.

	gcc/
	Backport from trunk r224367.
	2015-06-11  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config/arm/arm.c (arm_option_params_internal): When optimising
	for speed set max_insns_skipped when arm_restrict_it.

	gcc/testsuite/
	Backport from trunk r224367.
	2015-06-11  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* gcc.target/arm/short-it-ifcvt-1.c: New test.
	* gcc.target/arm/short-it-ifcvt-2.c: Likewise.

	gcc/
	Backport from trunk r224638.
	2015-06-19  Christian Bruel  <christian.bruel@st.com>

	PR target/66541
	PR target/52144
	* config/arm/arm.c (arm_set_current_function): Handle
	explicit default options.

	gcc/testsuite/
	Backport from trunk r224504.
	2015-06-16  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* gcc.target/arm/attr_thumb.c: Add -mno-restrict-it to dg-options.

	gcc/testsuite/
	Backport from trunk r224509.
	2015-06-16  Christophe Lyon  <christophe.lyon@linaro.org>

	* gcc.target/arm/thumb-ifcvt.c: Add -mno-restrict-it to
	dg-options.

	gcc/
	Backport from trunk r224721.
	2015-06-22  Christian Bruel  <christian.bruel@st.com>

	* config/arm/arm.c (add_attribute, arm_insert_attributes): New functions
	(TARGET_INSERT_ATTRIBUTES): Define.
	(thumb_flipper): New var.
	* config/arm/arm.opt (-mflip-thumb): New switch.

	gcc/testsuite/
	Backport from trunk r224721.
	2015-06-22  Christian Bruel  <christian.bruel@st.com>

	PR target/52144
	* gcc.target/arm/flip-thumb.c: New test.

	gcc/
	Backport from trunk r225503.
	2015-07-07  Christian Bruel  <christian.bruel@st.com>

	PR target/52144
	* config/arm/elf.h (TARGET_ASM_FILE_START_APP_OFF): Delete.

	gcc/testsuite/
	Backport from trunk r225503.
	2015-07-07  Christian Bruel  <christian.bruel@st.com>

	PR target/52144
	* gcc.target/arm/flip-thumb.c: Fix scan.
	* gcc.target/arm/attr_thumb.c: Test for all targets. Fix scan.
	* gcc.target/arm/attr_arm.c: Test for all targets. Fix scan.
	* gcc.target/arm/attr_thumb-static.c: Test for all targets.
	Fix return value.

	gcc/testsuite/
	Backport from trunk r225665.
	2015-07-10  Christophe Lyon  <christophe.lyon@linaro.org>

	* gcc.target/arm/attr_thumb.c: Skip if Thumb is not supported.
	* gcc.target/arm/flip-thumb.c: Likewise.

	gcc/
	Backport from trunk r227795.
	2015-09-15  Christian Bruel  <christian.bruel@st.com>

	PR target/52144
	* config/arm/arm.c (arm_option_params_internal): Remove opts parameter.
	* config/arm/arm-c.c (arm_cpu_builtins): Declare static.
	Remove flags parameter.
	* config/arm/arm.h (TARGET_32BIT_P, TARGET_ARM_QBIT_P)
	(TARGET_ARM_SAT_P, TARGET_IDIV_P, TARGET_HAVE_LDREX_P)
	(TARGET_HAVE_LDREXBH_P, TARGET_HAVE_LDREXD_P, TARGET_DSP_MULTIPLY_P)
	(TARGET_ARM_FEATURE_LDREX_P, TARGET_INT_SIMD_P): Redefine macros with...
	(TARGET_ARM_SAT, TARGET_IDIV, TARGET_HAVE_LDREX)
	(TARGET_HAVE_LDREXBH, TARGET_HAVE_LDREXD, TARGET_ARM_FEATURE_LDREX)
	(TARGET_DSP_MULTIPLY, TARGET_INT_SIMD): Redefined macros.
	* gcc/config/arm/arm-protos.h (arm_cpu_builtins): Remove declaration.

	gcc/
	Backport from trunk r227796.
	2015-09-15  Christian Bruel  <christian.bruel@st.com>

	* config/arm/arm.c (TARGET_OPTION_PRINT): Define.
	(arm_option_print): New function.

	gcc/
	Backport from trunk r227880.
	2015-09-17  Christian Bruel  <christian.bruel@st.com>

	* config/arm/arm.md (*call_value_symbol): Fix operand for interworking.

	gcc/testsuite/
	Backport from trunk r227880.
	2015-09-17  Christian Bruel  <christian.bruel@st.com>

	* gcc.target/arm/attr_thumb-static2.c: New test.

	gcc/testsuite/
	Backport from trunk r228479.
	2015-10-05  Christian Bruel  <christian.bruel@st.com>

	* gcc.target/arm/attr_thumb-static2.c: Cleanup directives.

2015-10-12  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r225108.
	2015-06-29  Kugan Vivekanandarajah  <kuganv@linaro.org>

	PR middle-end/64130
	* tree-vrp.c (extract_range_from_binary_expr_1): For unsigned
	division, compute max and min when value ranges for dividend and
	divisor are available.

	gcc/testsuite/
	Backport from trunk r225108.
	2015-06-29  Kugan Vivekanandarajah  <kuganv@linaro.org>

	PR middle-end/64130
	* gcc.dg/tree-ssa/pr64130.c: New test.

2015-10-12  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r225106.
	2015-06-28  Chung-Lin Tang <cltang@codesourcery.com>
	    Sandra Loosemore <sandra@codesourcery.com>

	* regrename.h (regrename_do_replace): Change to return bool.
	* regrename.c (rename_chains): Check return value of
	regname_do_replace.
	(regrename_do_replace): Re-validate the modified insns and
	return bool status.
	* config/aarch64/cortex-a57-fma-steering.c (rename_single_chain):
	Update to match rename_chains changes.
	* config/c6x/c6x.c (try_rename_operands): Assert that
	regrename_do_replace returns true.

2015-10-10  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r225014.
	2015-06-26  James Greenhalgh  <james.greenhalgh@arm.com>

	* config/aarch64/aarch64-fusion-pairs.def: New.
	* config/aarch64/aarch64-protos.h (aarch64_fusion_pairs): New.
	* config/aarch64/aarch64.c (AARCH64_FUSE_NOTHING): Move to
	aarch64_fusion_pairs.
	(AARCH64_FUSE_MOV_MOVK): Likewise.
	(AARCH64_FUSE_ADRP_ADD): Likewise.
	(AARCH64_FUSE_MOVK_MOVK): Likewise.
	(AARCH64_FUSE_ADRP_LDR): Likewise.
	(AARCH64_FUSE_CMP_BRANCH): Likewise.

	gcc/
	Backport from trunk r225015.
	2015-06-26  James Greenhalgh  <james.greenhalgh@arm.com>

	* config/aarch64/aarch64.h (AARCH64_FL_USE_FMA_STEERING_PASS): Delete.
	(aarch64_tune_flags): Likewise.
	(AARCH64_TUNE_FMA_STEERING): Likewise.
	* config/aarch64/aarch64-cores.def (cortex-a57): Remove reference
	to AARCH64_FL_USE_FMA_STEERING_PASS.
	(cortex-a57.cortex-a53): Likewise.
	(cortex-a72): Use cortexa72_tunings.
	(cortex-a72.cortex-a53): Likewise.
	(exynos-m1): Likewise.
	* config/aarch64/aarch64-protos.h (tune_params): Add
	a field: extra_tuning_flags.
	* config/aarch64/aarch64-tuning-flags.def: New.
	* config/aarch64/aarch64-protos.h (AARCH64_EXTRA_TUNING_OPTION): New.
	(aarch64_extra_tuning_flags): Likewise.
	(aarch64_tune_params): Declare here.
	* config/aarch64/aarch64.c (generic_tunings): Set extra_tuning_flags.
	(cortexa53_tunings): Likewise.
	(cortexa57_tunings): Likewise.
	(thunderx_tunings): Likewise.
	(xgene1_tunings): Likewise.
	(cortexa72_tunings): New.
	* config/aarch64/cortex-a57-fma-steering.c: Include aarch64-protos.h.
	 (gate): Check against aarch64_tune_params.
	* config/aarch64/t-aarch64 (cortex-a57-fma-steering.o): Depend on
	aarch64-protos.h.

	gcc/
	Backport from trunk r225016.
	2015-06-26  James Greenhalgh  <james.greenhalgh@arm.com>

	* config/aarch64/aarch64-protos.h (tune_params): Remove
	const from members.
	(aarch64_tune_params): Remove const, change to no longer be
	a pointer.
	* config/aarch64/aarch64.c (aarch64_tune_params): Remove const,
	change to no longer be a pointer, initialize to generic_tunings.
	(aarch64_min_divisions_for_recip_mul): Change dereference of
	aarch64_tune_params to member access.
	(aarch64_reassociation_width): Likewise.
	(aarch64_rtx_mult_cost): Likewise.
	(aarch64_address_cost): Likewise.
	(aarch64_branch_cost): Likewise.
	(aarch64_rtx_costs): Likewise.
	(aarch64_register_move_cost): Likewise.
	(aarch64_memory_move_cost): Likewise.
	(aarch64_sched_issue_rate): Likewise.
	(aarch64_builtin_vectorization_cost): Likewise.
	(aarch64_override_options): Take a copy of the selected tuning
	struct in to aarch64_tune_params, rather than just setting
	a pointer, change dereferences of aarch64_tune_params to member
	accesses.
	(aarch64_override_options_after_change): Change dereferences of
	aarch64_tune_params to member access.
	(aarch64_macro_fusion_p): Likewise.
	(aarch_macro_fusion_pair_p): Likewise.
	* config/aarch64/cortex-a57-fma-steering.c (gate): Likewise.

	gcc/
	Backport from trunk r225018.
	2015-06-26  James Greenhalgh  <james.greenhalgh@arm.com>

	* config/aarch64/aarch64.opt: (override): New.
	* doc/invoke.texi (override): Document.
	* config/aarch64/aarch64.c (aarch64_flag_desc): New
	(aarch64_fusible_pairs): Likewise.
	(aarch64_tuning_flags): Likewise.
	(aarch64_tuning_override_function): Likewise.
	(aarch64_tuning_override_functions): Likewise.
	(aarch64_parse_one_option_token): Likewise.
	(aarch64_parse_boolean_options): Likewise.
	(aarch64_parse_fuse_string): Likewise.
	(aarch64_parse_tune_string): Likewise.
	(aarch64_parse_one_override_token): Likewise.
	(aarch64_parse_override_string): Likewise.
	(aarch64_override_options): Parse the -override string if it
	is present.

2015-10-10  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r226059.
	2015-07-22  Charles Baylis  <charles.baylis@linaro.org>

	PR target/63870
	* config/aarch64/aarch64-builtins.c (enum aarch64_type_qualifiers):
	Add qualifier_struct_load_store_lane_index.
	(aarch64_types_loadstruct_lane_qualifiers): Use
	qualifier_struct_load_store_lane_index for lane index argument for
	last argument.
	(aarch64_types_storestruct_lane_qualifiers): Ditto.
	(builtin_simd_arg): Add SIMD_ARG_STRUCT_LOAD_STORE_LANE_INDEX.
	(aarch64_simd_expand_args): Add new argument describing mode of
	builtin. Check lane bounds for arguments with
	SIMD_ARG_STRUCT_LOAD_STORE_LANE_INDEX.
	(aarch64_simd_expand_builtin): Emit error for incorrect lane indices
	if marked with SIMD_ARG_STRUCT_LOAD_STORE_LANE_INDEX.
	(aarch64_simd_expand_builtin): Handle arguments with
	qualifier_struct_load_store_lane_index. Pass machine mode of builtin to
	aarch64_simd_expand_args.
	* config/aarch64/aarch64-simd-builtins.def: Declare ld[234]_lane and
	vst[234]_lane with BUILTIN_VALLDIF.
	* config/aarch64/aarch64-simd.md:
	(aarch64_vec_load_lanesoi_lane<mode>): Use VALLDIF iterator. Perform
	endianness reversal on lane index.
	(aarch64_vec_load_lanesci_lane<mode>): Ditto.
	(aarch64_vec_load_lanesxi_lane<mode>): Ditto.
	(vec_store_lanesoi_lane<mode>): Use VALLDIF iterator.
	(vec_store_lanesci_lane<mode>): Ditto.
	(vec_store_lanesxi_lane<mode>): Ditto.
	(aarch64_ld2_lane<mode>): Use VALLDIF iterator. Remove endianness
	reversal of lane index.
	(aarch64_ld3_lane<mode>): Ditto.
	(aarch64_ld4_lane<mode>): Ditto.
	(aarch64_st2_lane<mode>): Ditto.
	(aarch64_st3_lane<mode>): Ditto.
	(aarch64_st4_lane<mode>): Ditto.
	* config/aarch64/arm_neon.h (__LD2_LANE_FUNC): Rename mode parameter
	to qmode. Add new mode parameter. Update uses.
	(__LD3_LANE_FUNC): Ditto.
	(__LD4_LANE_FUNC): Ditto.
	(__ST2_LANE_FUNC): Ditto.
	(__ST3_LANE_FUNC): Ditto.
	(__ST4_LANE_FUNC): Ditto.

	gcc/testsuite/
	Backport from trunk r226059.
	2015-07-22  Charles Baylis  <charles.baylis@linaro.org>

	* gcc.target/aarch64/advsimd-intrinsics/vld2_lane_f32_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld2_lane_f64_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld2_lane_p8_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld2_lane_s16_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld2_lane_s32_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld2_lane_s64_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld2_lane_s8_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld2_lane_u16_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld2_lane_u32_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld2_lane_u64_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld2_lane_u8_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld2q_lane_f32_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld2q_lane_f64_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld2q_lane_p8_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld2q_lane_s16_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld2q_lane_s32_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld2q_lane_s64_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld2q_lane_s8_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld2q_lane_u16_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld2q_lane_u32_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld2q_lane_u64_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld2q_lane_u8_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld3_lane_f32_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld3_lane_f64_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld3_lane_p8_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld3_lane_s16_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld3_lane_s32_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld3_lane_s64_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld3_lane_s8_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld3_lane_u16_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld3_lane_u32_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld3_lane_u64_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld3_lane_u8_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld3q_lane_f32_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld3q_lane_f64_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld3q_lane_p8_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld3q_lane_s16_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld3q_lane_s32_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld3q_lane_s64_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld3q_lane_s8_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld3q_lane_u16_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld3q_lane_u32_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld3q_lane_u64_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld3q_lane_u8_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld4_lane_f32_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld4_lane_f64_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld4_lane_p8_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld4_lane_s16_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld4_lane_s32_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld4_lane_s64_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld4_lane_s8_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld4_lane_u16_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld4_lane_u32_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld4_lane_u64_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld4_lane_u8_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld4q_lane_f32_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld4q_lane_f64_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld4q_lane_p8_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld4q_lane_s16_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld4q_lane_s32_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld4q_lane_s64_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld4q_lane_s8_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld4q_lane_u16_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld4q_lane_u32_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld4q_lane_u64_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vld4q_lane_u8_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst2_lane_f32_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst2_lane_f64_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst2_lane_p8_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst2_lane_s16_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst2_lane_s32_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst2_lane_s64_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst2_lane_s8_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst2_lane_u16_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst2_lane_u32_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst2_lane_u64_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst2_lane_u8_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst2q_lane_f32_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst2q_lane_f64_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst2q_lane_p8_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst2q_lane_s16_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst2q_lane_s32_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst2q_lane_s64_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst2q_lane_s8_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst2q_lane_u16_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst2q_lane_u32_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst2q_lane_u64_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst2q_lane_u8_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst3_lane_f32_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst3_lane_f64_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst3_lane_p8_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst3_lane_s16_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst3_lane_s32_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst3_lane_s64_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst3_lane_s8_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst3_lane_u16_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst3_lane_u32_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst3_lane_u64_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst3_lane_u8_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst3q_lane_f32_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst3q_lane_f64_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst3q_lane_p8_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst3q_lane_s16_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst3q_lane_s32_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst3q_lane_s64_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst3q_lane_s8_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst3q_lane_u16_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst3q_lane_u32_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst3q_lane_u64_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst3q_lane_u8_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst4_lane_f32_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst4_lane_f64_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst4_lane_p8_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst4_lane_s16_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst4_lane_s32_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst4_lane_s64_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst4_lane_s8_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst4_lane_u16_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst4_lane_u32_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst4_lane_u64_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst4_lane_u8_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst4q_lane_f32_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst4q_lane_f64_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst4q_lane_p8_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst4q_lane_s16_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst4q_lane_s32_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst4q_lane_s64_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst4q_lane_s8_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst4q_lane_u16_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst4q_lane_u32_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst4q_lane_u64_indices_1.c: New
	test.
	* gcc.target/aarch64/advsimd-intrinsics/vst4q_lane_u8_indices_1.c: New
	test.

	gcc/
	Backport from trunk r226061.
	2015-07-22  Charles Baylis  <charles.baylis@linaro.org>

	* config/aarch64/aarch64-simd.md (vec_store_lanesoi_lane<mode>): Fix
	typo in attribute.

2015-10-10  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r224997.
	2015-06-26  Ramana Radhakrishnan  <ramana.radhakrishnan@arm.com>

	* config/arm/arm.c (arm_output_multireg_pop): Fix use of
	TARGET_UNIFIED_ASM.

2015-10-10  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r224932.
	2015-06-25  Ramana Radhakrishnan  <ramana.radhakrishnan@arm.com>

	PR target/29693
	* config/arm/arm.c (arm_dbx_register_number): Return
	DWARF_FRAME_REGISTERS by default.

2015-10-10  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r224908.
	2015-06-24  Alan Lawrence  <alan.lawrence@arm.com>

	* config/aarch64/aarch64-protos.h (aarch64_err_no_fpadvsimd): New.

	* config/aarch64/aarch64.md (mov<mode>/GPF, movtf): Use
	aarch64_err_no_fpadvsimd.

	* config/aarch64/aarch64.c (aarch64_err_no_fpadvsimd): New.
	(aarch64_layout_arg, aarch64_init_cumulative_args): Use
	aarch64_err_no_fpadvsimd if !TARGET_FLOAT and we need FP regs.
	(aarch64_expand_builtin_va_start, aarch64_setup_incoming_varargs):
	Turn error into assert, test TARGET_FLOAT.
	(aarch64_gimplify_va_arg_expr): Use aarch64_err_no_fpadvsimd, test
	TARGET_FLOAT.

	gcc/testsuite/
	Backport from trunk r224908.
	2015-06-24  Alan Lawrence  <alan.lawrence@arm.com>

	* gcc.target/aarch64/mgeneral-regs_1.c: New file.
	* gcc.target/aarch64/mgeneral-regs_2.c: New file.
	* gcc.target/aarch64/nofp_1.c: New file.

	gcc/
	Backport from trunk r224909.
	2015-06-24  Alan Lawrence  <alan.lawrence@arm.com>

	* doc/invoke.texi: Clarify AArch64 feature modifiers (no)fp, (no)simd
	and (no)crypto.

	gcc/
	Backport from trunk r224910.
	2015-06-24  Alan Lawrence  <alan.lawrence@arm.com>

	* config/aarch64/aarch64.md (<optab><fcvt_target><GPF:mode>2):
	Condition on TARGET_FLOAT.

	gcc/testsuite/
	Backport from trunk r224910.
	2015-06-24  Alan Lawrence  <alan.lawrence@arm.com>

	* gcc.target/aarch64/mgeneral-regs_3.c: New.

2015-10-10  Yvan Roux  <yvan.roux@linaro.org>

	gcc/testsuite/
	Backport from trunk r224899.
	2015-06-24  Ramana Radhakrishnan  <ramana.radhakrishnan@arm.com>

	* gcc.target/arm/fixed_float_conversion.c: Skip for inappropriate
	multilibs.
	* gcc.target/arm/memset-inline-10.c: Likewise.
	* gcc.target/arm/pr58784.c: Likewise.
	* gcc.target/arm/pr59985.C: Likewise.
	* gcc.target/arm/vfp-1.c: Likewise and test only for the non fma cases.

2015-10-10  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r224898.
	2015-06-24 Renlin Li <renlin.li@arm.com>

	* config/aarch64/aarch64.h(TARGET_CPU_CPP_BUILTINS): Add
	__ARM_ALIGN_MAX_PWR, __ARM_ALIGN_MAX_STACK_PWR.

	gcc/testsuite/
	Backport from trunk r224898.
	2015-06-24  Renlin Li  <renlin.li@arm.com>

	* gcc.target/aarch64/arm_align_max_pwr.c: New.
	* gcc.target/aarch64/arm_align_max_stack_pwr.c: New.

2015-10-10  Yvan Roux  <yvan.roux@linaro.org>

	gcc/testsuite/
	Backport from trunk r224512.
	2015-06-16  James Greenhalgh  <james.greenhalgh@arm.com>

	* gcc.target/arm/pr65647.c: Do not override -mfloat-abi directives
	passed by the testsuite driver.

2015-10-10  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r224506.
	2015-06-16  James Greenhalgh  <james.greenhalgh@arm.com>

	* config/arm/arm-protos.h (struct tune_params): Rename
	log_op_non_sc to log_op_non_short_circuit, and rename enum
	values to expand SC to SHORT_CIRCUIT.
	* config/arm/arm.c (arm_slowmul_tune): Expand LOG_OP_NON_SC
	to LOG_OP_NON_SHORT_CIRCUIT.
	(arm_fastmul_tune):Likewise
	(arm_strongarm_tune): Likewise.
	(arm_xscale_tune): Likewise.
	(arm_9e_tune): Likewise.
	(arm_marvell_pj4_tune): Likewise.
	(arm_v6t2_tune): Likewise.
	(arm_cortex_tune): Likewise.
	(arm_cortex_a8_tune): Likewise.
	(arm_cortex_a7_tune): Likewise.
	(arm_cortex_a15_tune): Likewise.
	(arm_cortex_a53_tune): Likewise.
	(arm_cortex_a57_tune): Likewise.
	(arm_xgene1_tune): Likewise.
	(arm_cortex_a5_tune): Likewise.
	(arm_cortex_a9_tune): Likewise.
	(arm_cortex_a12_tune): Likewise.
	(arm_v7m_tune): Likewise.
	(arm_cortex_m7_tune): Likewise.
	(arm_v6m_tune): Likewise.
	(arm_fa726te_tune): Likewise.

2015-10-10  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r224493.
	2015-06-15  Jim Wilson  <jim.wilson@linaro.org>

	* config/aarch64/aarch64.md (mov<mode>_aarch64): Change alternative 2
	to use neon_move instead of mov_imm.
	(movdi_aarch64): Change alternative 14 to use neon_move not fmov.
	(movtf_aarch64): Change alternative 4 to use neon_move_q not fconstd.

	* config/aarch64/aarch64.c (aarch64_valid_floating_const): Move
	aarch64_float_const_zero_rtx_p check before TFmode check.
	* config/aarch64/aarch64.md (movtf): Don't call force_reg if op1 is
	an fp zero.
	(movtf_aarch64): Separate ?rY alternative into two.  Adjust assembly
	code and attributes to match.  Change condition from register_operand
	to aarch64_reg_or_fp_zero for op1.  Change type for ldp from
	neon_load1_2reg to load2.  Change type for stp from neon_store1_2reg
	to store2.

2015-10-10  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r224476.
	2015-06-14  Shiva Chen  <shiva0217@gmail.com>

	* aarch64.c (aarch64_simd_lane_bounds): Change %ld to %wd for
	HOST_WIDE_INT parameter.

2015-10-10  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r224317.
	2015-06-10  Ramana Radhakrishnan  <ramana.radhakrishnan@arm.com>

	* config/arm/sync.md (*memory_barrier): Use dmb ish instead of
	dmb sy. Adjust tabs.

2015-10-10  Yvan Roux  <yvan.roux@linaro.org>

	gcc/testsuite/
	Backport from trunk r224280.
	2015-06-09  James Greenhalgh  <james.greenhalgh@arm.com>

	* g++.dg/ext/pr57735.C: Do not override -mfloat-abi directives
	passed by the testsuite driver.

2015-10-10  Yvan Roux  <yvan.roux@linaro.org>

	gcc/testsuite/
	Backport from trunk r224149.
	2015-06-05  Kugan Vivekanandarajah  <kuganv@linaro.org>

	* gcc.target/arm/neon-reload-class.c: Remove movw and movt.

2015-10-10  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r224148.
	2015-06-05  James Greenhalgh  <james.greenhalgh@arm.com>

	* builtins.c (expand_builtin_atomic_compare_exchange): Call
	emit_cmp_and_jump_insns with the mode of target.

2015-10-10  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r224116.
	2015-06-04  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config/aarch64/aarch64.c (aarch64_override_options): Unconditionally
	register fma steering pass.
	* config/aarch64/cortex-a57-fma-steering.c (gate): Add gating on
	AARCH64_TUNE_FMA_STEERING.

2015-10-10  Yvan Roux  <yvan.roux@linaro.org>

	gcc/c/
	Backport from trunk r224083.
	2015-06-03  Prathamesh Kulkarni  <prathamesh.kulkarni@linaro.org>

	* c-decl.c (warn_cxx_compat_finish_struct): New parameters code, record_loc.
	Warn for empty struct.
	(finish_struct): Pass TREE_CODE(t) and loc to warn_cxx_compat_finish_struct.

	gcc/testsuite/
	Backport from trunk r224083.
	2015-06-03  Prathamesh Kulkarni  <prathamesh.kulkarni@linaro.org>

	* gcc.dg/Wcxx-compat-22.c: New testcase.
	* c-c++-common/Wsizeof-pointer-memaccess1.c: Pass -Wno-c++-compat.
	* c-c++-common/Wsizeof-pointer-memaccess2.c: Likewise.
	* c-c++-common/pr58346-1.c: Likewise.
	* c-c++-common/transparent-union-1.c: Likewise.

2015-10-08  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r224048.
	2015-06-03  Kugan Vivekanandarajah  <kuganv@linaro.org>
	    Zhenqiang Chen  <zhenqiang.chen@linaro.org>

	PR target/65768
	* cprop.c (try_replace_reg): Check cost of constants before propagating.

	gcc/testsuite/
	Backport from trunk r224048.
	2015-06-01  Kugan Vivekanandarajah  <kuganv@linaro.org>

	PR target/65768
	* gcc.target/arm/maskdata.c: Remove -fno-gcse.

2015-10-08  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r224519.
	2015-06-16  Matthew Wahab  <matthew.wahab@arm.com>

	* config/aarch64/aarch64-arches.def: Add "armv8.1-a".
	* config/aarch64/aarch64-options-extensions.def: Update "fP",
	"simd" and "crypto".  Add "lse", "pan", "lor" and "rdma".
	* gcc/config/aarch64/aarch64.h (AARCH64_FL_LSE): New.
	(AARCH64_FL_PAN): New.
	(AARCH64_FL_LOR): New.
	(AARCH64_FL_RDMA): New.
	(AARCH64_FL_FOR_ARCH8_1): New.
	* doc/invoke.texi (AArch64 Options): Add "armv8.1-a" to
	-march. Add "lse", "pan", "lor", "rdma" to feature modifiers.

	gcc/
	Backport from trunk r225118.
	2015-06-29  Matthew Wahab  <matthew.wahab@arm.com>

	* doc/invoke.texi (Aarch64 Options, -march): Split out arch and
	feature description, split out the native option, add a link to
	the feature documentation, rearrange and slightly rewrite text.
	(Aarch64 options, -mcpu): Likewise.
	(Aarch64 options, Feature Modifiers): Add an anchor.  Mention
	+rdma implies Adv. SIMD.

	gcc/
	Backport from trunk r226857.
	2015-08-13  Matthew Wahab  <matthew.wahab@arm.com>

	* config/aarch64/aarch64.h (AARCH64_ISA_LSE): New.
	(TARGET_LSE): New.

	gcc/
	Backport from trunk r226858.
	2015-08-13  Matthew Wahab  <matthew.wahab@arm.com>

	* config/aarch64/aarch64-protos.h
	(aarch64_gen_atomic_cas): Declare.
	* config/aarch64/aarch64.c (aarch64_expand_compare_and_swap):
	Choose appropriate instruction pattern for the target.
	(aarch64_gen_atomic_cas): New.
	* config/aarch64/atomics.md (UNSPECV_ATOMIC_CAS): New.
	(atomic_compare_and_swap<mode>_1): Rename to
	aarch64_compare_and_swap<mode>.  Fix some indentation.
	(aarch64_compare_and_swap<mode>_lse): New.
	(aarch64_atomic_cas<mode>): New.

	gcc/testsuite/
	Backport from trunk r226859.
	2015-08-13  Matthew Wahab  <matthew.wahab@arm.com>

	* gcc.target/aarch64/atomic-inst-cas.c: New.
	* gcc.target/aarch64/atomic-inst-ops.inc: New.

	gcc/
	Backport from trunk r227998.
	2015-09-22  Matthew Wahab  <matthew.wahab@arm.com>

	* config/aarch64/aarch64-protos.h (aarch64_gen_atomic_ldop):
	Declare.
	* config/aarch64/aarch64.c (aarch64_emit_atomic_swap): New.
	(aarch64_gen_atomic_ldop): New.
	(aarch64_split_atomic_op): Fix whitespace and add a comment.
	* config/aarch64/atomics.md (UNSPECV_ATOMIC_SWP): New.
	(aarch64_compare_and_swap<mode>_lse): Fix some whitespace.
	(atomic_exchange<mode>): Replace with an expander.
	(aarch64_atomic_exchange<mode>): New.
	(aarch64_atomic_exchange<mode>_lse): New.
	(aarch64_atomic_<atomic_optab><mode>): Fix some whitespace.
	(aarch64_atomic_swp<mode>): New.

	gcc/testsuite/
	Backport from trunk r227998.
	2015-09-22  Matthew Wahab  <matthew.wahab@arm.com>

	* gcc.target/aarch64/atomic-inst-ops.inc: (TEST_MODEL): New.
	(TEST_ONE): New.
	        * gcc.target/aarch64/atomic-inst-swap.c: New.

	gcc/
	Backport from trunk r227999.
	2015-09-22  Matthew Wahab  <matthew.wahab@arm.com>

	* config/aarch64/aarch64.md
	(<LOGICAL:optab>_one_cmpl_<SHIFT:optab><mode>3): Make a named
	pattern.

	gcc/
	Backport from trunk r228000.
	2015-09-22  Matthew Wahab  <matthew.wahab@arm.com>

	* config/aarch64/aarch64/atomics.md (UNSPECV_ATOMIC_LDOP): New.
	(UNSPECV_ATOMIC_LDOP_OR): New.
	(UNSPECV_ATOMIC_LDOP_BIC): New.
	(UNSPECV_ATOMIC_LDOP_XOR): New.
	(UNSPECV_ATOMIC_LDOP_PLUS): New.
	(ATOMIC_LDOP): New.
	(atomic_ldop): New.
	(aarch64_atomic_load<atomic_ldop><mode>): New.

	gcc/
	Backport from trunk r228001.
	2015-09-22  Matthew Wahab  <matthew.wahab@arm.com>

	* config/aarch64/aarch64-protos.h
	(aarch64_atomic_ldop_supported_p): Declare.
	* config/aarch64/aarch64.c (aarch64_atomic_ldop_supported_p): New.
	(enum aarch64_atomic_load_op_code): New.
	(aarch64_emit_atomic_load_op): New.
	(aarch64_gen_atomic_ldop): Update to support load-operate
	patterns.
	* config/aarch64/atomics.md (atomic_<atomic_optab><mode>): Change
	to an expander.
	(aarch64_atomic_<atomic_optab><mode>): New.
	(aarch64_atomic_<atomic_optab><mode>_lse): New.
	(atomic_fetch_<atomic_optab><mode>): Change to an expander.
	(aarch64_atomic_fetch_<atomic_optab><mode>): New.
	(aarch64_atomic_fetch_<atomic_optab><mode>_lse): New.

	gcc/testsuite/
	Backport from trunk r228001.
	2015-09-22  Matthew Wahab  <matthew.wahab@arm.com>

	* gcc.target/aarch64/atomic-inst-ldadd.c: New.
	* gcc.target/aarch64/atomic-inst-ldlogic.c: New.

	gcc/
	Backport from trunk r228002.
	2015-09-22  Matthew Wahab  <matthew.wahab@arm.com>

	* config/aarch64/aarch64-protos.h (aarch64_gen_atomic_ldop):
	Adjust declaration.
	* config/aarch64/aarch64.c (aarch64_emit_bic): New.
	(aarch64_gen_atomic_ldop): Adjust comment.  Add parameter
	out_result.  Update to support update-fetch operations.
	* config/aarch64/atomics.md (aarch64_atomic_exchange<mode>_lse):
	Adjust for change to aarch64_gen_atomic_ldop.
	(aarch64_atomic_<atomic_optab><mode>_lse): Likewise.
	(aarch64_atomic_fetch_<atomic_optab><mode>_lse): Likewise.
	(atomic_<atomic_optab>_fetch<mode>): Change to an expander.
	(aarch64_atomic_<atomic_optab>_fetch<mode>): New.
	(aarch64_atomic_<atomic_optab>_fetch<mode>_lse): New.

	gcc/testsuite/
	Backport from trunk r228002.
	2015-09-22  Matthew Wahab  <matthew.wahab@arm.com>

	* gcc.target/aarch64/atomic-inst-ldadd.c: Add tests for
	update-fetch operations.
	* gcc.target/aarch64/atomic-inst-ldlogic.c: Likewise.

2015-10-07  Yvan Roux  <yvan.roux@linaro.org>

	gcc/testsuite/
	Backport from trunk r225374.
	2015-07-03  Christophe Lyon  <christophe.lyon@linaro.org>

	* gcc.target/aarch64/advsimd-intrinsics/vget_lane.c: New testcase.

2015-10-07  Yvan Roux  <yvan.roux@linaro.org>

	gcc/testsuite/
	Backport from trunk r222752.
	2015-05-03  Christophe Lyon  <christophe.lyon@linaro.org>

	* gcc.target/aarch64/advsimd-intrinsics/binary_op.inc: Call CHECK
	for each supported variant instead of CHECK_RESULTS.
	* gcc.target/aarch64/advsimd-intrinsics/binary_sat_op.inc: Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/unary_op.inc: Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vXXXl.inc: Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vXXXw.inc: Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vsXi_n.inc: Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vshuffle.inc: Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vaba.c: Remove dummy
	expected results for unsupported variants.  Call CHECK for each
	supported variant instead of CHECK_RESULTS.
	* gcc.target/aarch64/advsimd-intrinsics/vabal.c: Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vabd.c: Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vabdl.c: Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vcls.c: Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vclz.c: Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vcnt.c: Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vcombine.c: Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vcreate.c: Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vget_high.c: Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vget_low.c: Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vldX.c: Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vldX_dup.c: Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vldX_lane.c: Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vmul.c: Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vshl.c: Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vsli_n.c: Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vsri_n.c: Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vabs.c: Remove dummy
	expected results for unsupported variants.
	* gcc.target/aarch64/advsimd-intrinsics/vadd.c: Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vaddl.c: Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vaddw.c: Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vand.c: Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vbic.c: Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vcage.c: Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vcagt.c: Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vcale.c: Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vcalt.c: Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vceq.c: Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vcge.c: Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vcgt.c: Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vcle.c: Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vclt.c: Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/veor.c: Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vneg.c: Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vorn.c: Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vorr.c: Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vqabs.c: Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vqadd.c: Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vqneg.c: Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vqsub.c: Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vsub.c: Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vsubl.c: Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vsubw.c: Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vtrn.c: Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vuzp.c: Likewise.
	* gcc.target/aarch64/advsimd-intrinsics/vzip.c: Likewise.

	gcc/testsuite/
	Backport from trunk r224650.
	2015-06-19  Christophe Lyon  <christophe.lyon@linaro.org>

	* gcc.target/aarch64/advsimd-intrinsics/arm-neon-ref.h
	(_ARM_FPSCR): Add FZ field.
	(clean_results): Force FZ=1 on AArch64.
	* gcc.target/aarch64/advsimd-intrinsics/vrecpe.c: New file.

	gcc/testsuite/
	Backport from trunk r224651.
	2015-06-19  Christophe Lyon  <christophe.lyon@linaro.org>

	* gcc.target/aarch64/advsimd-intrinsics/vrecps.c: New file.

	gcc/testsuite/
	Backport from trunk r224652.
	2015-06-19  Christophe Lyon  <christophe.lyon@linaro.org>

	* gcc.target/aarch64/advsimd-intrinsics/vreinterpret.c: New file.

	gcc/testsuite/
	Backport from trunk r224653.
	2015-06-19  Christophe Lyon  <christophe.lyon@linaro.org>

	* gcc.target/aarch64/advsimd-intrinsics/vrev.c: New file.

	gcc/testsuite/
	Backport from trunk r224654.
	2015-06-19  Christophe Lyon  <christophe.lyon@linaro.org>

	* gcc.target/aarch64/advsimd-intrinsics/vrshl.c: New file.

	gcc/testsuite/
	Backport from trunk r224655.
	2015-06-19  Christophe Lyon  <christophe.lyon@linaro.org>

	* gcc.target/aarch64/advsimd-intrinsics/vshr_n.c: New file.

	gcc/testsuite/
	Backport from trunk r224656.
	2015-06-19  Christophe Lyon  <christophe.lyon@linaro.org>

	* gcc.target/aarch64/advsimd-intrinsics/vrshr_n.c: New file.

	gcc/testsuite/
	Backport from trunk r224657.
	2015-06-19  Christophe Lyon  <christophe.lyon@linaro.org>

	* gcc.target/aarch64/advsimd-intrinsics/vrshrn_n.c: New file.

	gcc/testsuite/
	Backport from trunk r224658.
	2015-06-19  Christophe Lyon  <christophe.lyon@linaro.org>

	* gcc.target/aarch64/advsimd-intrinsics/vrsqrte.c: New file.

	gcc/testsuite/
	Backport from trunk r224659.
	2015-06-19  Christophe Lyon  <christophe.lyon@linaro.org>

	* gcc.target/aarch64/advsimd-intrinsics/vrsqrts.c: New file.

	gcc/testsuite/
	Backport from trunk r224660.
	2015-06-19  Christophe Lyon  <christophe.lyon@linaro.org>

	* gcc.target/aarch64/advsimd-intrinsics/vrsra_n.c: New file.

	gcc/testsuite/
	Backport from trunk r224661.
	2015-06-19  Christophe Lyon  <christophe.lyon@linaro.org>

	* gcc.target/aarch64/advsimd-intrinsics/vset_lane.c: New file.

	gcc/testsuite/
	Backport from trunk r224662.
	2015-06-19  Christophe Lyon  <christophe.lyon@linaro.org>

	* gcc.target/aarch64/advsimd-intrinsics/vshll_n.c: New file.

	gcc/testsuite/
	Backport from trunk r224663.
	2015-06-19  Christophe Lyon  <christophe.lyon@linaro.org>

	* gcc.target/aarch64/advsimd-intrinsics/vshl_n.c: New file.

	gcc/testsuite/
	Backport from trunk r224664.
	2015-06-19  Christophe Lyon  <christophe.lyon@linaro.org>

	* gcc.target/aarch64/advsimd-intrinsics/vshrn_n.c: New file.

	gcc/testsuite/
	Backport from trunk r224665.
	2015-06-19  Christophe Lyon  <christophe.lyon@linaro.org>

	* gcc.target/aarch64/advsimd-intrinsics/vsra_n.c: New file.

	gcc/testsuite/
	Backport from trunk r224666.
	2015-06-19  Christophe Lyon  <christophe.lyon@linaro.org>

	* gcc.target/aarch64/advsimd-intrinsics/vst1_lane.c: New file.

	gcc/testsuite/
	Backport from trunk r224667.
	2015-06-19  Christophe Lyon  <christophe.lyon@linaro.org>

	* gcc.target/aarch64/advsimd-intrinsics/vstX_lane.c: New file.

	gcc/testsuite/
	Backport from trunk r224668.
	2015-06-19  Christophe Lyon  <christophe.lyon@linaro.org>

	* gcc.target/aarch64/advsimd-intrinsics/vtbX.c: New file.

	gcc/testsuite/
	Backport from trunk r224669.
	2015-06-19  Christophe Lyon  <christophe.lyon@linaro.org>

	* gcc.target/aarch64/advsimd-intrinsics/vtst.c: New file.

2015-10-07  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r223197.
	2015-05-14  Wilco Dijkstra  <wdijkstr@arm.com>

	* config/aarch64/aarch64.md (absdi2): Optimize abs expansion.
	(csneg3<mode>_insn): Enable expansion of pattern.

	gcc/testsuite/
	Backport from trunk r223197.
	2015-05-14  Wilco Dijkstra  <wdijkstr@arm.com>

	* gcc.target/aarch64/abs_1.c (abs64): Update test for new abs expansion.
	(abs64_in_dreg): Likewise.

2015-10-07  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r223235.
	2015-05-16  Kugan Vivekanandarajah  <kuganv@linaro.org>
	    Zhenqiang Chen  <zhenqiang.chen@linaro.org>

	PR target/65768
	* config/arm/arm.h (DONT_EARLY_SPLIT_CONSTANT): New macro.
	* config/arm/arm.md (subsi3, andsi3, iorsi3, xorsi3, movsi): Keep some
	 large constants in register instead of splitting them.

	gcc/testsuite/
	Backport from trunk r223235.
	2015-05-16  Kugan Vivekanandarajah  <kuganv@linaro.org>
	    Zhenqiang Chen  <zhenqiang.chen@linaro.org>

	PR target/65768
	* gcc.target/arm/maskdata.c: New test.

2015-10-07  Yvan Roux  <yvan.roux@linaro.org>

	gcc/c/
	Backport from trunk r224033.
	2015-06-02  Prathamesh Kulkarni  <prathamesh.kulkarni@linaro.org>

	PR c/49551
	* c-decl.c (merge_decls): Merge DECL_COMMON.

	gcc/testsuite/
	Backport from trunk r224033.
	2015-06-02  Prathamesh Kulkarni  <prathamesh.kulkarni@linaro.org>

	PR c/49551
	* gcc.dg/pr49551.c: New testcase.

2015-10-07  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r223938.
	2015-06-01  James Greenhalgh  <james.greenhalgh@arm.com>

	* config/aarch64/aarch64-protos.h (tune_params): Rename
	fuseable_ops to fusible_ops.
	* config/aarch64/aarch64.c (generic_tunings): Rename
	fuseable_ops to fusible_ops.
	(cortexa53_tunings): Likewise.
	(cortexa57_tunings): Likewise.
	(thunderx_tunings): Likewise.
	(xgene1_tunings): Likewise.
	(aarch64_macro_fusion_p): Likewise.
	(aarch64_macro_fusion_pair_p): Likewise.

	gcc/
	Backport from trunk r223939.
	2015-06-01  James Greenhalgh  <james.greenhalgh@arm.com>

	* gcc/config/arm/arm-protos.h (tune_params): Rename fuseable_ops
	to fusible_ops.
	* gcc/config/arm/arm.c (arm_print_tune_info): Likewise.
	(arm_macro_fusion_p): Likewise.
	(arm_macro_fusion_pair_p): Likewise.

	gcc/
	Backport from trunk r223940.
	2015-06-01  James Greenhalgh  <james.greenhalgh@arm.com>

	* sched-deps.c (sched_analyze_2): Replace fuseable with fusible
	in comment.

2015-10-07  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r223922.
	2015-06-01  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config/aarch64/aarch64.md
	(*<LOGICAL:optab>_one_cmpl_<SHIFT:optab><mode>3): Change type to
	logic_shift_imm.

2015-10-07  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r223795.
	2015-05-28  Thomas Preud'homme  <thomas.preudhomme@arm.com>

	PR rtl-optimization/66168
	* loop-invariant.c (move_invariant_reg): Pass dest rather than reg to
	can_move_invariant_reg.

	gcc/testsuite/
	Backport from trunk r223795.
	2015-05-28  Thomas Preud'homme  <thomas.preudhomme@arm.com>

	PR rtl-optimization/66168
	* gcc.c-torture/compile/pr66168.c: New test.

2015-10-06  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r223214.
	2015-05-15  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config/aarch64/aarch64.h (AARCH64_TUNE_SLOWMUL): Delete.
	(AARCH64_FL_SLOWMUL): Delete.
	(AARCH64_FL_CRC): Redefine to 1<<3.
	(AARCH64_FL_USE_FMA_STEERING_PASS): Redefine to 1<<4.

2015-10-06  Yvan Roux  <yvan.roux@linaro.org>

	Merge branches/gcc-5-branch rev 228499.

2015-10-05  Christophe Lyon  <christophe.lyon@linaro.org>

	gcc/
	Backport from trunk r222512.
	2015-04-28  Thomas Preud'homme  <thomas.preudhomme@arm.com>

	PR target/63503
	* config.gcc: Add cortex-a57-fma-steering.o to extra_objs for
	aarch64-*-*.
	* config/aarch64/t-aarch64: Add a rule for cortex-a57-fma-steering.o.
	* config/aarch64/aarch64.h (AARCH64_FL_USE_FMA_STEERING_PASS): Define.
	(AARCH64_TUNE_FMA_STEERING): Likewise.
	* config/aarch64/aarch64-cores.def: Set
	AARCH64_FL_USE_FMA_STEERING_PASS for cores with dynamic steering of
	FMUL/FMADD instructions.
	* config/aarch64/aarch64.c (aarch64_register_fma_steering): Declare.
	(aarch64_override_options): Include cortex-a57-fma-steering.h.  Call
	aarch64_register_fma_steering () if AARCH64_TUNE_FMA_STEERING is true.
	* config/aarch64/cortex-a57-fma-steering.h: New file.
	* config/aarch64/cortex-a57-fma-steering.c: Likewise.

2015-10-05  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r223609.
	2015-05-23  Prathamesh Kulkarni  <prathamesh.kulkarni@linaro.org>

	* genmatch.c (parser::parse_operator_list): Check for CPP_CLOSE_PAREN
	after end of id-list.

	gcc/
	Backport from trunk r223610, r223611.
	2015-05-23  Prathamesh Kulkarni  <prathamesh.kulkarni@linaro.org>

	* genmatch.c (parser::parse_for): Reject iterator if used as
	operator-list.

	gcc/
	Backport from trunk r223612.
	2015-05-23  Prathamesh Kulkarni  <prathamesh.kulkarni@linaro.org>

	* genmatch.c (parser::parse_operation): Reject expanding operator-list
	inside 'for'.

2015-10-05  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r223485.
	2015-05-21  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* doc/sourcebuild.texi (7.2.3.9 Other hardware attributes):
	Document sqrt_insn.

	gcc/testsuite/
	Backport from trunk r223485.
	2015-05-21  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* lib/target-supports.exp (check_effective_target_sqrt_insn): New check.
	* gcc.dg/pow-sqrt-synth-1.c: New test.
	* gcc.target/aarch64/pow-sqrt-synth-1.c: Delete.

2015-09-22  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r222758.
	2015-05-03  Sandra Loosemore  <sandra@codesourcery.com>

	* doc/extend.texi (Variable Attributes, Type Attributes):  Move
	sections up in file, to immediately after the Function Attributes
	section.

2015-09-17  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	* LINARO-VERSION: Bump version number, post snapshot.

2015-09-17  Yvan Roux  <yvan.roux@linaro.org>

	Make Linaro GCC Snapshot 5.2-2015.09.

	gcc/
	* LINARO-VERSION: Update.

2015-09-16  Yvan Roux  <yvan.roux@linaro.org>

	Merge branches/gcc-5-branch rev 227732.

2015-09-10  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r223597.
	2015-05-22  Jim Wilson  <jim.wilson@linaro.org>

	* Makefile.in (check_gcc_parallelize): Delete.
	(lang_checks_parallelized): Update comment.

	gcc/c/
	Backport from trunk r223597.
	2015-05-22  Jim Wilson  <jim.wilson@linaro.org>

	* Make-lang.in (check_gcc_pallelize): Define.

	gcc/cp/
	Backport from trunk r223597.
	2015-05-22  Jim Wilson  <jim.wilson@linaro.org>

	* Make-lang.in (check_g++_parallelize): Update comment.

	gcc/fortran/
	Backport from trunk r223597.
	2015-05-22  Jim Wilson  <jim.wilson@linaro.org>

	* Make-lang.in (check_gfortran_parallelize): Update comment.

2015-09-10  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r223439.
	2015-05-20  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config/aarch64/aarch64.c (aarch64_class_max_nregs):
	Use UNITS_PER_VREG and UNITS_PER_WORD instead of their direct
	values.

2015-09-09  Yvan Roux  <yvan.roux@linaro.org>

	gcc/testsuite/
	Backport from trunk r223508.
	2015-05-21  Sandra Loosemore  <sandra@codesourcery.com>

	* gcc.target/arm/simd/simd.exp: Skip all tests if no arm_neon_ok
	effective target support.  If no arm_neon_hw support, do not attempt
	to execute the tests; only compile them.
	* gcc.target/arm/simd/vextf32_1.c: Remove explicit "dg-do run"
	and "dg-require-effective-target arm_neon_ok".
	* gcc.target/arm/simd/vextp16_1.c: Likewise.
	* gcc.target/arm/simd/vextp64_1.c: Likewise.
	* gcc.target/arm/simd/vextp8_1.c: Likewise.
	* gcc.target/arm/simd/vextQf32_1.c: Likewise.
	* gcc.target/arm/simd/vextQp16_1.c: Likewise.
	* gcc.target/arm/simd/vextQp64_1.c: Likewise.
	* gcc.target/arm/simd/vextQp8_1.c: Likewise.
	* gcc.target/arm/simd/vextQs16_1.c: Likewise.
	* gcc.target/arm/simd/vextQs32_1.c: Likewise.
	* gcc.target/arm/simd/vextQs64_1.c: Likewise.
	* gcc.target/arm/simd/vextQs8_1.c: Likewise.
	* gcc.target/arm/simd/vextQu16_1.c: Likewise.
	* gcc.target/arm/simd/vextQu32_1.c: Likewise.
	* gcc.target/arm/simd/vextQu64_1.c: Likewise.
	* gcc.target/arm/simd/vextQu8_1.c: Likewise.
	* gcc.target/arm/simd/vexts16_1.c: Likewise.
	* gcc.target/arm/simd/vexts32_1.c: Likewise.
	* gcc.target/arm/simd/vexts64_1.c: Likewise.
	* gcc.target/arm/simd/vexts8_1.c: Likewise.
	* gcc.target/arm/simd/vextu16_1.c: Likewise.
	* gcc.target/arm/simd/vextu32_1.c: Likewise.
	* gcc.target/arm/simd/vextu64_1.c: Likewise.
	* gcc.target/arm/simd/vextu8_1.c: Likewise.
	* gcc.target/arm/simd/vrev16p8_1.c: Likewise.
	* gcc.target/arm/simd/vrev16qp8_1.c: Likewise.
	* gcc.target/arm/simd/vrev16qs8_1.c: Likewise.
	* gcc.target/arm/simd/vrev16qu8_1.c: Likewise.
	* gcc.target/arm/simd/vrev16s8_1.c: Likewise.
	* gcc.target/arm/simd/vrev16u8_1.c: Likewise.
	* gcc.target/arm/simd/vrev32p16_1.c: Likewise.
	* gcc.target/arm/simd/vrev32p8_1.c: Likewise.
	* gcc.target/arm/simd/vrev32qp16_1.c: Likewise.
	* gcc.target/arm/simd/vrev32qp8_1.c: Likewise.
	* gcc.target/arm/simd/vrev32qs16_1.c: Likewise.
	* gcc.target/arm/simd/vrev32qs8_1.c: Likewise.
	* gcc.target/arm/simd/vrev32qu16_1.c: Likewise.
	* gcc.target/arm/simd/vrev32qu8_1.c: Likewise.
	* gcc.target/arm/simd/vrev32s16_1.c: Likewise.
	* gcc.target/arm/simd/vrev32s8_1.c: Likewise.
	* gcc.target/arm/simd/vrev32u16_1.c: Likewise.
	* gcc.target/arm/simd/vrev32u8_1.c: Likewise.
	* gcc.target/arm/simd/vrev64f32_1.c: Likewise.
	* gcc.target/arm/simd/vrev64p16_1.c: Likewise.
	* gcc.target/arm/simd/vrev64p8_1.c: Likewise.
	* gcc.target/arm/simd/vrev64qf32_1.c: Likewise.
	* gcc.target/arm/simd/vrev64qp16_1.c: Likewise.
	* gcc.target/arm/simd/vrev64qp8_1.c: Likewise.
	* gcc.target/arm/simd/vrev64qs16_1.c: Likewise.
	* gcc.target/arm/simd/vrev64qs32_1.c: Likewise.
	* gcc.target/arm/simd/vrev64qs8_1.c: Likewise.
	* gcc.target/arm/simd/vrev64qu16_1.c: Likewise.
	* gcc.target/arm/simd/vrev64qu32_1.c: Likewise.
	* gcc.target/arm/simd/vrev64qu8_1.c: Likewise.
	* gcc.target/arm/simd/vrev64s16_1.c: Likewise.
	* gcc.target/arm/simd/vrev64s32_1.c: Likewise.
	* gcc.target/arm/simd/vrev64s8_1.c: Likewise.
	* gcc.target/arm/simd/vrev64u16_1.c: Likewise.
	* gcc.target/arm/simd/vrev64u32_1.c: Likewise.
	* gcc.target/arm/simd/vrev64u8_1.c: Likewise.
	* gcc.target/arm/simd/vtrnf32_1.c: Likewise.
	* gcc.target/arm/simd/vtrnp16_1.c: Likewise.
	* gcc.target/arm/simd/vtrnp8_1.c: Likewise.
	* gcc.target/arm/simd/vtrnqf32_1.c: Likewise.
	* gcc.target/arm/simd/vtrnqp16_1.c: Likewise.
	* gcc.target/arm/simd/vtrnqp8_1.c: Likewise.
	* gcc.target/arm/simd/vtrnqs16_1.c: Likewise.
	* gcc.target/arm/simd/vtrnqs32_1.c: Likewise.
	* gcc.target/arm/simd/vtrnqs8_1.c: Likewise.
	* gcc.target/arm/simd/vtrnqu16_1.c: Likewise.
	* gcc.target/arm/simd/vtrnqu32_1.c: Likewise.
	* gcc.target/arm/simd/vtrnqu8_1.c: Likewise.
	* gcc.target/arm/simd/vtrns16_1.c: Likewise.
	* gcc.target/arm/simd/vtrns32_1.c: Likewise.
	* gcc.target/arm/simd/vtrns8_1.c: Likewise.
	* gcc.target/arm/simd/vtrnu16_1.c: Likewise.
	* gcc.target/arm/simd/vtrnu32_1.c: Likewise.
	* gcc.target/arm/simd/vtrnu8_1.c: Likewise.
	* gcc.target/arm/simd/vuzpf32_1.c: Likewise.
	* gcc.target/arm/simd/vuzpp16_1.c: Likewise.
	* gcc.target/arm/simd/vuzpp8_1.c: Likewise.
	* gcc.target/arm/simd/vuzpqf32_1.c: Likewise.
	* gcc.target/arm/simd/vuzpqp16_1.c: Likewise.
	* gcc.target/arm/simd/vuzpqp8_1.c: Likewise.
	* gcc.target/arm/simd/vuzpqs16_1.c: Likewise.
	* gcc.target/arm/simd/vuzpqs32_1.c: Likewise.
	* gcc.target/arm/simd/vuzpqs8_1.c: Likewise.
	* gcc.target/arm/simd/vuzpqu16_1.c: Likewise.
	* gcc.target/arm/simd/vuzpqu32_1.c: Likewise.
	* gcc.target/arm/simd/vuzpqu8_1.c: Likewise.
	* gcc.target/arm/simd/vuzps16_1.c: Likewise.
	* gcc.target/arm/simd/vuzps32_1.c: Likewise.
	* gcc.target/arm/simd/vuzps8_1.c: Likewise.
	* gcc.target/arm/simd/vuzpu16_1.c: Likewise.
	* gcc.target/arm/simd/vuzpu32_1.c: Likewise.
	* gcc.target/arm/simd/vuzpu8_1.c: Likewise.
	* gcc.target/arm/simd/vzipf32_1.c: Likewise.
	* gcc.target/arm/simd/vzipp16_1.c: Likewise.
	* gcc.target/arm/simd/vzipp8_1.c: Likewise.
	* gcc.target/arm/simd/vzipqf32_1.c: Likewise.
	* gcc.target/arm/simd/vzipqp16_1.c: Likewise.
	* gcc.target/arm/simd/vzipqp8_1.c: Likewise.
	* gcc.target/arm/simd/vzipqs16_1.c: Likewise.
	* gcc.target/arm/simd/vzipqs32_1.c: Likewise.
	* gcc.target/arm/simd/vzipqs8_1.c: Likewise.
	* gcc.target/arm/simd/vzipqu16_1.c: Likewise.
	* gcc.target/arm/simd/vzipqu32_1.c: Likewise.
	* gcc.target/arm/simd/vzipqu8_1.c: Likewise.
	* gcc.target/arm/simd/vzips16_1.c: Likewise.
	* gcc.target/arm/simd/vzips32_1.c: Likewise.
	* gcc.target/arm/simd/vzips8_1.c: Likewise.
	* gcc.target/arm/simd/vzipu16_1.c: Likewise.
	* gcc.target/arm/simd/vzipu32_1.c: Likewise.
	* gcc.target/arm/simd/vzipu8_1.c: Likewise.

2015-09-09  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r222457.
	2015-04-27  Thomas Preud'homme  <thomas.preudhomme@arm.com>

	* combine.c (sign_extend_short_imm): New.
	(set_nonzero_bits_and_sign_copies): Use above new function for sign
	extension of src short immediate.
	(reg_nonzero_bits_for_combine): Likewise for tem.

	gcc/
	Backport from trunk r223034.
	2015-05-12  Thomas Preud'homme  <thomas.preudhomme@arm.com>

	* combine.c i(set_nonzero_bits_and_sign_copies): Split code updating
	rsp->sign_bit_copies and rsp->nonzero_bits into ...
	(update_rsp_from_reg_equal): This.  Also use REG_EQUAL note on src if
	present to get more accurate information about the number of sign bit
	copies and non zero bits.

2015-09-08  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r222528.
	2015-04-28  Yvan Roux  <yvan.roux@linaro.org>

	* config/arm/arm.md (*arm_movt): Fix type attribute.
	(*cmpsi_shiftsi): Likewise.
	(*cmpsi_shiftsi_swp): Likewise.
	(*movsicc_insn): Likewise.
	(*cond_move): Likewise.
	(*if_plus_move): Likewise.
	(*if_move_plus): Likewise.
	(*if_arith_move): Likewise.
	(*if_move_arith): Likewise.
	(*if_shift_move): Likewise.
	(*if_move_shift): Likewise.
	(*arm_movtas_ze): Likewise.
	* config/arm/thumb2.md (*thumb2_movsicc_insn): Fix alternative
	redundancy and type attribute.
	(*thumb2_movsi_insn): Fix type attribute.
	(*thumb2_addsi_short): Likewise.
	(thumb2_addsi3_compare0): Likewise.
	(*thumb2_addsi3_compare0_scratch): Merge alternatives and fix
	attributes accordingly.

	gcc/
	Backport from trunk r222572.
	2015-04-29  Yvan Roux  <yvan.roux@linaro.org>

	PR target/65924
	* config/arm/thumb2.md (*thumb2_addsi3_compare0_scratch): Fix operand
	number in type attribute expression.

	gcc/testsuite/
	Backport from trunk r222572.
	2015-04-29  Yvan Roux  <yvan.roux@linaro.org>

	PR target/65924
	* gcc.target/arm/pr65924.c: New test.

	gcc/testsuite/
	Backport from trunk r222798.
	2015-05-05  Yvan Roux  <yvan.roux@linaro.org>

	* gcc.target/arm/pr65067.c: Require Thumb2 effective target.
	* gcc.target/arm/pr65924.c: Likewise.

2015-09-07  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r222857.
	2015-05-06  Sandra Loosemore  <sandra@codesourcery.com>
	    Chris Jones  <chrisj@nvidia.com>
	    Joshua Conner  <jconner@nvidia.com>

	* config/arm/unknown-elf.h (STARTFILE_SPEC): Add conditional
	linking of crtfastmath.o.
	* config/arm/linux-eabi.h (STARTFILE_SPEC): Likewise.

	libgcc/
	Backport from trunk r222857.
	2015-05-06  Sandra Loosemore  <sandra@codesourcery.com>
	    Chris Jones  <chrisj@nvidia.com>
	    Joshua Conner  <jconner@nvidia.com>

	* config.host (arm*-*-linux*): Add support for crtfastmath.o.
	(arm*-*-uclinux*): Likewise.
	(arm*-*-eabi* | arm*-*-rtems*): Likewise.
	* config/arm/crtfastmath.c: New file.

2015-09-07  Yvan Roux  <yvan.roux@linaro.org>

	gcc/testsuite/
	Backport from trunk r223580.
	2015-05-22  Sandra Loosemore  <sandra@codesourcery.com>

	* gcc.target/aarch64/advsimd-intrinsics/advsimd-intrinsics.exp:
	Set dg-do-what-default to compile only on ARM targets without
	arm_neon_hw execution support.  Remove redundant c-torture-execute
	in loop over test cases.

	gcc/testsuite/
	Backport from trunk r223928.
	2015-06-01  Alan Lawrence  <alan.lawrence@arm.com>

	* gcc.target/aarch64/advsimd-intrinsics/advsimd-intrinsics.exp: Pass
	wildcard to gcc-dg-runtest; remove loop and unnecessary initialization.

	gcc/testsuite/
	Backport from trunk r224119.
	2015-06-04  Sandra Loosemore  <sandra@codesourcery.com>

	* gcc.target/aarch64/advsimd-intrinsics/advsimd-intrinsics.exp:
	Move set of dg-do-what-default after early return.

	gcc/testsuite/
	Backport from trunk r224507.
	2015-06-16  James Greenhalgh  <james.greenhalgh@arm.com>

	* gcc.target/aarch64/advsimd-intrinsics/advsimd-intrinsics.exp:
	Reinstate calls to torture-init and torture-finalize.

2015-09-07  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r223577.
	2015-05-22  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	PR target/65491
	* config/aarch64/aarch64.c (aarch64_short_vector_p): Move above
	aarch64_composite_type_p.  Remove check for aarch64_composite_type_p.
	(aarch64_composite_type_p): Return false if given type and mode are
	for a short vector.

	gcc/testsuite/
	Backport from trunk r223577.
	2015-05-22  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	PR target/65491
	* gcc.target/aarch64/pr65491_1.c: New test.
	* gcc.target/aarch64/aapcs64/type-def.h (vlf1_t): New typedef.
	* gcc.target/aarch64/aapcs64/func-ret-1.c: Add test for vlf1_t.

2015-09-07  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r223432.
	2015-05-20  Kugan Vivekanandarajah  <kuganv@linaro.org>
	    Jim Wilson  <jim.wilson@linaro.org>

	* config/arm/aarch-common-protos.h (struct mem_cost_table): Added
	new  fields loadv and storev.
	* config/aarch64/aarch64-cost-tables.h (thunderx_extra_costs):
	Initialize loadv and storev.
	* config/arm/aarch-cost-tables.h (generic_extra_costs): Likewise.
	(cortexa53_extra_costs): Likewise.
	(cortexa57_extra_costs): Likewise.
	(xgene1_extra_costs): Likewise.
	* config/aarch64/aarch64.c (aarch64_rtx_costs): Update vector
	rtx_costs.

	2015-05-20  Kugan Vivekanandarajah  <kuganv@linaro.org>

	* config/arm/arm.c (cortexa9_extra_costs): Initialize loadv and
	 storev.
	(cortexa8_extra_costs): Likewise.
	(cortexa5_extra_costs): Likewise.
	(cortexa7_extra_costs): Likewise.
	(cortexa12_extra_costs): Likewise.
	(cortexa15_extra_costs): Likewise.
	(v7m_extra_costs): Likewise.

2015-09-07  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r223558.
	2015-05-22  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config/arm/arm.c (arm_new_rtx_costs): Handle UNSPEC_VOLATILE.
	(arm_unspec_cost): Allow UNSPEC_VOLATILE.  Do not recurse inside
	unknown unspecs.

2015-09-03  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r223523.
	2015-05-22  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config/aarch64/arm_neon.h (vaeseq_u8): Add __extension__ and
	__always_inline__ attribute.
	(vaesdq_u8): Likewise.
	(vaesmcq_u8): Likewise.
	(vaesimcq_u8): Likewise.
	(vsha1cq_u32): Likewise.
	(vsha1mq_u32): Likewise.
	(vsha1pq_u32): Likewise.
	(vsha1h_u32): Likewise.
	(vsha1su0q_u32): Likewise.
	(vsha1su1q_u32): Likewise.
	(vsha256hq_u32): Likewise.
	(vsha256h2q_u32): Likewise.
	(vsha256su0q_u32): Likewise.
	(vsha256su1q_u32): Likewise.
	(vmull_p64): Likewise.
	(vmull_high_p64): Likewise.

2015-09-01  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r223433.
	2015-05-20  Bin Cheng  <bin.cheng@arm.com>

	PR tree-optimization/65447
	* tree-ssa-loop-ivopts.c (struct iv_use): New fields.
	(dump_use, dump_uses): Support to dump sub use.
	(record_use): New parameters to support sub use.  Remove call to
	dump_use.
	(record_sub_use, record_group_use): New functions.
	(compute_max_addr_offset, split_all_small_groups): New functions.
	(group_address_uses, rewrite_use_address): New functions.
	(strip_offset): New declaration.
	(find_interesting_uses_address): Call record_group_use.
	(add_candidate): New assertion.
	(infinite_cost_p): Move definition forward.
	(add_costs): Check INFTY cost and return immediately.
	(get_computation_cost_at): Clear setup cost and dependent bitmap
	for sub uses.
	(determine_use_iv_cost_address): Compute cost for sub uses.
	(rewrite_use_address_1): Rename from old rewrite_use_address.
	(free_loop_data): Free sub uses.
	(tree_ssa_iv_optimize_loop): Call group_address_uses.

	gcc/testsuite/
	Backport from trunk r223433.
	2015-05-20  Bin Cheng  <bin.cheng@arm.com>

	PR tree-optimization/65447
	* gcc.dg/tree-ssa/pr65447.c: New test.

	gcc/
	Backport from trunk r225159.
	2015-06-30  Bin Cheng  <bin.cheng@arm.com>

	* tree-ssa-loop-ivopts.c (record_sub_use): Don't reset ssa_name
	field in struct iv.

2015-09-01  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r222627.
	2015-04-30  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config/aarch64/aarch64.c (aarch64_rtx_mult_cost): Handle MNEG
	and [SU]MNEGL patterns.

2015-09-01  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r223113.
	2015-05-13  Thomas Preud'homme  <thomas.preudhomme@arm.com>

	PR rtl-optimization/64616
	* loop-invariant.c (can_move_invariant_reg): New.
	(move_invariant_reg): Call above new function to decide whether
	instruction can just be moved, skipping creation of temporary
	register.

	gcc/testsuite/
	Backport from trunk r223113.
	2015-05-13  Thomas Preud'homme  <thomas.preudhomme@arm.com>

	PR rtl-optimization/64616
	* gcc.dg/loop-8.c: New test.
	* gcc.dg/loop-9.c: New test.

2015-08-28  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r222907.
	2015-05-08  Alan Lawrence  <alan.lawrence@arm.com>

	* optabs.c (vector_compare_rtx): Handle RTL operands having VOIDmode.

	gcc/
	Backport from trunk r222908.
	2015-05-08  Alan Lawrence  <alan.lawrence@arm.com>

	* config/aarch64/aarch64-simd.md (aarch64_vcond_internal<mode><mode>,
	vcond<mode><mode>, vcondu<mode><mode>): Add DImode variant.

	gcc/
	Backport from trunk r222909.
	2015-05-08  Alan Lawrence  <alan.lawrence@arm.com>

	* config/aarch64/arm_neon.h (vceq_s64, vceq_u64, vceqz_s64, vceqz_u64,
	vcge_s64, vcge_u64, vcgez_s64, vcgt_s64, vcgt_u64, vcgtz_s64, vcle_s64,
	vcle_u64, vclez_s64, vclt_s64, vclt_u64, vcltz_s64, vtst_s64,
	vtst_u64): Rewrite using gcc vector extensions.

	gcc/testsuite/
	Backport from trunk r222909.
	2015-05-08  Alan Lawrence  <alan.lawrence@arm.com>

	* gcc.target/aarch64/singleton_intrinsics_1.c: Generalize regex to
	allow cmlt or sshr.

2015-08-28  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r223167.
	2015-05-13  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* params.def (PARAM_MAX_POW_SQRT_DEPTH): New param.
	* tree-ssa-math-opts.c: Include params.h
	(pow_synth_sqrt_info): New struct.
	(representable_as_half_series_p): New function.
	(get_fn_chain): Likewise.
	(print_nested_fn): Likewise.
	(dump_fractional_sqrt_sequence): Likewise.
	(dump_integer_part): Likewise.
	(expand_pow_as_sqrts): Likewise.
	(gimple_expand_builtin_pow): Use above to attempt to expand
	pow as series of square roots.  Removed now unused variables.

	gcc/testsuite/
	Backport from trunk r223167.
	2015-05-13  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* gcc.target/aarch64/pow-sqrt-synth-1.c: New test.
	* gcc.dg/pow-sqrt.x: New file.
	* gcc.dg/pow-sqrt-1.c: New test.
	* gcc.dg/pow-sqrt-2.c: Likewise.
	* gcc.dg/pow-sqrt-3.c: Likewise.

2015-08-27  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r223402.
	2015-05-19  David Sherwood  <david.sherwood@arm.com>

	* loop-invariant.c (create_new_invariant): Don't calculate address cost
	if mode is not a scalar integer.
	(get_inv_cost): Increase computational cost for unused invariants.

	gcc/testsuite/
	Backport from trunk r223402.
	2015-05-19  David Sherwood  <david.sherwood@arm.com>

	* gcc.dg/loop-invariant.c: New testcase.

2015-08-27  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r222624, r222625.
	2015-04-30  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config/aarch64/aarch64.c (aarch64_shift_p): New function.
	(aarch64_rtx_mult_cost): Update comment to reflect that it also handles
	combined arithmetic-shift ops.  Properly handle all shift and extend
	operations that can occur in combination with PLUS/MINUS.
	Rename maybe_fma to compound_p.
	(aarch64_rtx_costs): Use aarch64_shift_p when costing compound
	arithmetic and shift operations.

2015-08-27  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r222677.
	2015-05-01  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config/aarch64/aarch64.c (aarch64_rtx_costs): Handle FLOAT and
	UNSIGNED_FLOAT.

2015-08-27  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r222637.
	2015-04-30  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config/aarch64/aarch64.md
	(*eor_one_cmpl_<SHIFT:optab><mode>3_alt): New pattern.
	(*eor_one_cmpl_<SHIFT:optab>sidi3_alt_ze): Likewise.
	* config/aarch64/aarch64.c (aarch64_rtx_costs): Handle MVN-shift
	appropriately.  Handle alternative EON form.

2015-08-27  Yvan Roux  <yvan.roux@linaro.org>

	gcc/testsuite/
	Backport from trunk r223372.
	2015-05-19  Christophe Lyon  <christophe.lyon@linaro.org>

	* gcc.target/aarch64/advsimd-intrinsics/vqmovn.c: New file.

	gcc/testsuite/
	Backport from trunk r223373.
	2015-05-19  Christophe Lyon  <christophe.lyon@linaro.org>

	* gcc.target/aarch64/advsimd-intrinsics/vqmovun.c: New file.

	gcc/testsuite/
	Backport from trunk r223374.
	2015-05-19  Christophe Lyon  <christophe.lyon@linaro.org>

	* gcc.target/aarch64/advsimd-intrinsics/vqrdmulh.c: New file.

	gcc/testsuite/
	Backport from trunk r223375.
	2015-05-19  Christophe Lyon  <christophe.lyon@linaro.org>

	* gcc.target/aarch64/advsimd-intrinsics/vqrdmulh_lane.c: New file.

	gcc/testsuite/
	Backport from trunk r223376.
	2015-05-19  Christophe Lyon  <christophe.lyon@linaro.org>

	* gcc.target/aarch64/advsimd-intrinsics/vqrdmulh_n.c: New file.

	gcc/testsuite/
	Backport from trunk r223377.
	2015-05-19  Christophe Lyon  <christophe.lyon@linaro.org>

	* gcc.target/aarch64/advsimd-intrinsics/vqrshl.c: New file.

	gcc/testsuite/
	Backport from trunk r223379.
	2015-05-19  Christophe Lyon  <christophe.lyon@linaro.org>

	* gcc.target/aarch64/advsimd-intrinsics/vqrshrn_n.c: New file.

	gcc/testsuite/
	Backport from trunk r223380.
	2015-05-19  Christophe Lyon  <christophe.lyon@linaro.org>

	* gcc.target/aarch64/advsimd-intrinsics/vqrshrun_n.c: New file.

	gcc/testsuite/
	Backport from trunk r223381.
	2015-05-19  Christophe Lyon  <christophe.lyon@linaro.org>

	* gcc.target/aarch64/advsimd-intrinsics/vqshl.c: New file.

	gcc/testsuite/
	Backport from trunk r223382.
	2015-05-19  Christophe Lyon  <christophe.lyon@linaro.org>

	* gcc.target/aarch64/advsimd-intrinsics/vqshl_n.c: New file.

	gcc/testsuite/
	Backport from trunk r223384.
	2015-05-19  Christophe Lyon  <christophe.lyon@linaro.org>

	* gcc.target/aarch64/advsimd-intrinsics/vqshlu_n.c: New file.

	gcc/testsuite/
	Backport from trunk r223385.
	2015-05-19  Christophe Lyon  <christophe.lyon@linaro.org>

	* gcc.target/aarch64/advsimd-intrinsics/vqshrn_n.c: New file.

	gcc/testsuite/
	Backport from trunk r223386.
	2015-05-19  Christophe Lyon  <christophe.lyon@linaro.org>

	* gcc.target/aarch64/advsimd-intrinsics/vqshrun_n.c: New file.

2015-08-27  Yvan Roux  <yvan.roux@linaro.org>

	libstdc++-v3/
	Backport from trunk r223361.
	2015-05-17  Ramana Radhakrishnan  <ramana.radhakrishnan@arm.com>

	* configure.host: Define cpu_defines_dir for ARM.
	* config/cpu/arm/cpu_defines.h: New file.

2015-08-27  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r223295.
	2015-05-18  Alex Velenko  <Alex.Velenko@arm.com>

	* config/arm/arm.md (andsi_not_shiftsi_si_scc): New pattern.
	(andsi_not_shiftsi_si_scc_no_reuse): New pattern.

	gcc/testsuite/
	Backport from trunk r223295.
	2015-05-18  Alex Velenko <Alex.Velenko@arm.com>

	* gcc.target/arm/bics_1.c : New testcase.
	* gcc.target/arm/bics_2.c : New testcase.
	* gcc.target/arm/bics_3.c : New testcase.
	* gcc.target/arm/bics_4.c : New testcase.

2015-08-27  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r223281.
	2015-05-17  Jim Wilson  <jim.wilson@linaro.org>

	* doc/invoke.texi (ARM Options, mtune): Add generic-armv7-a,
	cortex-a17, and cortex-a17.cortex-a7.

2015-08-27  Yvan Roux  <yvan.roux@linaro.org>

	libgcc/
	Backport from trunk r223220.
	2015-05-15  Martin Galvan  <martin.galvan@tallertechnologies.com>

	        * config/arm/lib1funcs.S (CFI_START_FUNCTION, CFI_END_FUNCTION):
	        New macros.
	        * config/arm/ieee754-df.S: Add CFI directives.
	        * config/arm/ieee754-sf.S: Add CFI directives.

2015-08-27  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r223090.
	2015-05-12  Richard Earnshaw  <rearnsha@arm.com>

	* arm-protos.h (arm_sched_autopref): Delete.
	(tune_params): Re-organize, use enums for flag values.
	(FUSE_OPS): New macro.
	* arm.c (ARM_PREFETCH_NOT_BENEFICIAL): Update.
	(ARM_PREFETCH_BENEFICIAL): Likewise.
	(ARM_FUSE_NOTHING, ARM_FUSE_MOVW_MOVT): Delete.
	(arm_slowmul_tune, arm_fastmul_tune, arm_strongarm_tune)
	(arm_xscale_tune, arm_9e_tune, arm_marvell_pj4_tune)
	(arm_v6t2_tune, arm_cortex_tune, arm_cortex_a8_tune)
	(arm_cortex_a7_tune, arm_cortex_a15_tune, arm_cortex_a53_tune)
	(arm_cortex_a57_tune,  arm_xgene1_tune, arm_cortex_a5_tune)
	(arm_cortex_a9_tune, arm_cortex_a12_tune, arm_v7m_tune)
	(arm_cortex_m7_tune, arm_v6m_tune, arm_fa726te_tune): Use new
	format.
	(arm_option_override, thumb2_reorg, arm_print_tune_info)
	(aarch_macro_fusion_pair_p): Update uses of current_tune.
	* arm.h (LOGCIAL_OP_NON_SHORT_CIRCUIT): Likewise.

	gcc/
	Backport from trunk r223212.
	2015-05-15  Ramana Radhakrishnan  <ramana.radhakrishnan@arm.com>

	* config/arm/arm.h (LOGICAL_OP_NON_SHORT_CIRCUIT): Add appropriate
	casting.

	* arm.h (LOGICAL_OP_NON_SHORT_CIRCUIT): Likewise.
	missing/
	Backport from trunk r223213.

2015-08-27  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r222999.
	2015-05-11  Richard Sandiford  <richard.sandiford@arm.com>

	PR rtl-optimization/66076
	* rtlanal.c (generic_subrtx_iterator <T>::add_single_to_queue):
	Don't grow the heap array if it is already big enough from a
	previous iteration.

	gcc/testsuite/
	Backport from trunk r222999.
	2015-05-11  Richard Sandiford  <richard.sandiford@arm.com>

	PR rtl-optimization/66076
	* gcc.dg/torture/pr66076.c: New test.

2015-08-27  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r222923.
	2015-05-08  Jim Wilson  <jim.wilson@linaro.org>

	* doc/install.texi (--enable-languages): Add missing jit and lto info.
	Add ^ to grep command.
	* doc/match-and-simplify.texi (GIMPLE API): Add missing fourth tree
	arg to last gimple_simplify declaration.  Add missing gimple_build
	declaration for built-in function case with four tree args.

2015-08-27  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r222874.
	2015-05-07  Venkataramanan Kumar  <venkataramanan.kumar@amd.com>

	* combine.c (make_compound_operation): Remove checks for PLUS/MINUS
	rtx type.

	gcc/
	Backport from trunk r223703.
	2015-05-26  Venkataramanan Kumar  <venkataramanan.kumar@amd.com>

	PR target/66049
	* config/aarch64/aarch64.md
	(*adds_shift_imm_<mode>):  New pattern.
	(*subs_shift_imm_<mode>):  Likewise.
	(*adds_<optab><ALLX:mode>_shift_<GPI:mode>):  Likewise.
	(*subs_<optab><ALLX:mode>_shift_<GPI:mode>): Likewise.
	(*add_uxt<mode>_shift2): Likewise.
	(*add_uxtsi_shift2_uxtw): Likewise.
	(*sub_uxt<mode>_shift2): Likewise.
	(*sub_uxtsi_shift2_uxtw): Likewise.

2015-08-27  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r222679.
	2015-05-01  Wilco Dijkstra  <wdijkstr@arm.com>

	* gcc/config/aarch64/aarch64-protos.h (tune_params):
	Add min_div_recip_mul_sf and min_div_recip_mul_df fields.
	* gcc/config/aarch64/aarch64.c (aarch64_min_divisions_for_recip_mul):
	Return value depending on target.
	(generic_tunings): Initialize new target settings.
	(cortexa53_tunings): Likewise.
	(cortexa57_tunings): Likewise.
	(thunderx_tunings): Likewise.
	(xgene1_tunings): Likewise.

2015-08-27  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r222853.
	2015-05-06  Yvan Roux  <yvan.roux@linaro.org>

	PR target/64208
	* config/arm/iwmmxt.md ("*iwmmxt_arm_movdi"): Cleanup redundant
	alternatives.

	gcc/testsuite/
	Backport from trunk r222853.
	2015-05-06  Yvan Roux  <yvan.roux@linaro.org>

	PR target/64208
	* gcc.target/arm/pr64208.c: New test.

2015-08-27  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r222852.
	2015-05-06  Szabolcs Nagy  <szabolcs.nagy@arm.com>

	* config/aarch64/geniterators.sh: Use standard BRE in sed.

2015-08-27  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r222805.
	2015-05-05  Matthew Wahab  <matthew.wahab@arm.com>

	* gcc/config/aarch64-protos.h (struct cpu_branch_cost): New.
	        (tune_params): Add field branch_costs.
	(aarch64_branch_cost): Declare.
	* gcc/config/aarch64.c (generic_branch_cost): New.
	(generic_tunings): Set field cpu_branch_cost to generic_branch_cost.
	(cortexa53_tunings): Likewise.
	(cortexa57_tunings): Likewise.
	(thunderx_tunings): Likewise.
	(xgene1_tunings): Likewise.
	(aarch64_branch_cost): Define.
	* gcc/config/aarch64/aarch64.h (BRANCH_COST): Redefine.

2015-08-27  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r222803.
	2015-05-05  Matthew Wahab  <matthew.wahab@arm.com>

	* doc/extend.texi (__atomic Builtins): Move implementation details
	to the end of the description, rewrite opening paragraphs, state
	difference with __sync builtins, state C11/C++11 assumptions,
	weaken itemized descriptions, add explanation of memory model
	behaviour, expand description of compare-exchange, simplify text.

2015-08-27  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r222800.
	2015-05-05  Renlin Li  <renlin.li@arm.com>

	* config/aarch64/aarch64.md (add<mode>3): Use mov when allowed.

2015-08-27  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r222714.
	2015-05-01  Sandra Loosemore  <sandra@codesourcery.com>

	* doc/extend.texi (Variable Attributes): Add menu and proper
	@nodes to subsections.  Move Microsoft Windows attributes to
	their own subsection.
	(Type Attributes): Reorganize introduction to remove duplicate
	list of attributes.  Add menu and proper @nodes to subsections.
	Alphabetize the main table of common attributes.

2015-08-27  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r222688.
	2015-05-01  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* target.def (attribute_table): Mention that struct attribute_spec
	is defined in tree-core.h rather than tree.h
	* doc/tm.texi: Regenerate.

2015-08-27  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r222678.
	2015-05-01  Wilco Dijkstra  <wdijkstr@arm.com>

	* gcc/config/arm/aarch-cost-tables.h (cortexa53_extra_costs):
	Make Cortex-A53 shift costs more accurate.

2015-08-27  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r222676.
	2015-05-01  Wilco Dijkstra  <wdijkstr@arm.com>

	* gcc/config/aarch64/aarch64.c (aarch64_rtx_costs):
	Calculate cost of op0 and op1 in PLUS and MINUS cases.

2015-08-27  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r222673.
	2015-05-01  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config/aarch64/aarch64.c (aarch64_rtx_costs, COMPARE case):
	Add cost of op0 in the compare-with-fpzero case.

2015-08-27  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r222639.
	2015-04-30  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config/aarch64/aarch64.md (*extr<mode>5_insn_alt): New pattern.
	(*extrsi5_insn_uxtw_alt): Likewise.
	* config/aarch64/aarch64.c (aarch64_extr_rtx_p): New function.
	(aarch64_rtx_costs, IOR case): Use above to properly cost extr
	operations.

2015-08-23  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r222638.
	2015-04-30  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config/aarch64/aarch64.c (aarch64_rtx_costs): Handle pattern for
	fabd in ABS case.

2015-08-23  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r222398.
	2015-04-24  Thomas Preud'homme  <thomas.preudhomme@arm.com>
	    Steven Bosscher <steven@gcc.gnu.org>

	PR rtl-optimization/34503
	* cprop.c (cprop_reg_p): New.
	(hash_scan_set): Use above function to check if register can be
	propagated.
	(find_avail_set): Return up to two sets, one whose source is a
	register and one whose source is a constant.  Sets are returned in an
	array passed as parameter rather than as a return value.
	(cprop_insn): Use a do while loop rather than a goto.  Try each of the
	sets returned by find_avail_set, starting with the one whose source is
	a constant. Use cprop_reg_p to check if register can be propagated.
	(do_local_cprop): Use cprop_reg_p to check if register can be
	propagated.
	(implicit_set_cond_p): Likewise.

	gcc/testsuite/
	Backport from trunk r222398.
	2015-04-24  Thomas Preud'homme  <thomas.preudhomme@arm.com>
	    Steven Bosscher <steven@gcc.gnu.org>

	PR rtl-optimization/34503
	* gcc.target/arm/pr64616.c: New file.

	gcc/
	Backport from trunk r223001.
	2015-05-11  Thomas Preud'homme  <thomas.preudhomme@arm.com>

	* gcc.target/arm/pr64616.c: Test dump rather than assembly to work
	accross ARM targets.

2015-08-21  Yvan Roux  <yvan.roux@linaro.org>

	libitm/
	Backport from trunk r222325.
	2015-04-22  Gregor Richards  <gregor.richards@uwaterloo.ca>

	* config/arm/hwcap.cc: Use fcntl.h instead of sys/fcntl.h.
	* config/linux/x86/tls.h: Only use __GLIBC_PREREQ if defined.

	fixincludes/
	Backport from trunk r222327.
	2015-04-22  Gregor Richards  <gregor.richards@uwaterloo.ca>

	* mkfixinc.sh: Add *-musl* with no fixes.

	libgcc/
	Backport from trunk r222328.
	2015-04-22  Gregor Richards  <gregor.richards@uwaterloo.ca>
	    Szabolcs Nagy  <szabolcs.nagy@arm.com>

	* unwind-dw2-fde-dip.c (USE_PT_GNU_EH_FRAME): Define it on
	Linux if target provides dl_iterate_phdr.

	libgfortran/
	Backport from trunk r222329.
	2015-04-22  Szabolcs Nagy  <szabolcs.nagy@arm.com>

	* acinclude.m4 (GTHREAD_USE_WEAK): Define as 0 for *-*-musl*.
	* configure: Regenerate.

	libstdc++-v3/
	Backport from trunk r222329.
	2015-04-22  Szabolcs Nagy  <szabolcs.nagy@arm.com>

	* config/os/generic/os_defines.h (_GLIBCXX_GTHREAD_USE_WEAK): Define.
	* configure.host (os_include_dir): Set to "os/generic" for linux-musl*.

	gcc/
	Backport from trunk r222904.
	2015-05-08  Gregor Richards  <gregor.richards@uwaterloo.ca>
	    Szabolcs Nagy  <szabolcs.nagy@arm.com>

	* config.gcc (LIBC_MUSL): New tm_defines macro.
	* config/linux.h (OPTION_MUSL): Define.
	(MUSL_DYNAMIC_LINKER, MUSL_DYNAMIC_LINKER32,)
	(MUSL_DYNAMIC_LINKER64, MUSL_DYNAMIC_LINKERX32,)
	(INCLUDE_DEFAULTS_MUSL_GPP, INCLUDE_DEFAULTS_MUSL_LOCAL,)
	(INCLUDE_DEFAULTS_MUSL_PREFIX, INCLUDE_DEFAULTS_MUSL_CROSS,)
	(INCLUDE_DEFAULTS_MUSL_TOOL, INCLUDE_DEFAULTS_MUSL_NATIVE): Define.
	* config/linux.opt (mmusl): New option.
	* doc/invoke.texi (GNU/Linux Options): Document -mmusl.
	* configure.ac (gcc_cv_libc_provides_ssp): Add *-*-musl*.
	(gcc_cv_target_dl_iterate_phdr): Add *-linux-musl*.
	* configure: Regenerate.

	gcc/
	Backport from trunk r222905.
	2015-05-08  Szabolcs Nagy  <szabolcs.nagy@arm.com>

	* config/glibc-stdint.h (OPTION_MUSL): Define.
	(INT_FAST16_TYPE, INT_FAST32_TYPE, UINT_FAST16_TYPE, UINT_FAST32_TYPE):
	Change the definition based on OPTION_MUSL for 64 bit targets.
	* config/linux.h (OPTION_MUSL): Redefine.
	* config/alpha/linux.h (OPTION_MUSL): Redefine.
	* config/rs6000/linux.h (OPTION_MUSL): Redefine.
	* config/rs6000/linux64.h (OPTION_MUSL): Redefine.

	gcc/
	Backport from trunk r222915.
	2015-05-08  Gregor Richards  <gregor.richards@uwaterloo.ca>
	    Szabolcs Nagy  <szabolcs.nagy@arm.com>

	* config/mips/linux.h (MUSL_DYNAMIC_LINKER32): Define.
	(MUSL_DYNAMIC_LINKER64, MUSL_DYNAMIC_LINKERN32): Define.
	(GNU_USER_DYNAMIC_LINKERN32): Update.

	gcc/
	Backport from trunk r223749.
	2015-05-27  Gregor Richards  <gregor.richards@uwaterloo.ca>

	* config/arm/linux-eabi.h (MUSL_DYNAMIC_LINKER): Define.

	gcc/
	Backport from trunk r223766.
	2015-05-27  Gregor Richards  <gregor.richards@uwaterloo.ca>
	    Szabolcs Nagy  <szabolcs.nagy@arm.com>

	* config/aarch64/aarch64-linux.h (MUSL_DYNAMIC_LINKER): Define.

2015-08-21  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r222623.
	2015-04-30  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config/aarch64/aarch64.c (aarch64_rtx_costs): Use extend_arith
	rather than arith_shift cost when costing ADD/MINUS of an
	extended value.

2015-08-21  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r222582.
	2015-04-29  Alan Lawrence  <alan.lawrence@arm.com>

	PR target/65770
	* config/aarch64/aarch64-simd.md (vec_store_lanesoi_lane<mode>,
	vec_store_lanesci_lane<mode>, vec_store_lanesxi_lane<mode>):
	Flip lane index back at assembly time for bigendian.

	gcc/testsuite/
	Backport from trunk r222582.
	2015-04-29  Alan Lawrence  <alan.lawrence@arm.com>

	PR target/65770
	* gcc.target/aarch64/vstN_lane_1.c: New file.

2015-08-21  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r222568.
	2015-04-29  Alan Lawrence  <alan.lawrence@arm.com>

	* config/arm/neon.md (vec_shl<mode>, vec_shr<mode>): Remove.

2015-08-21  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r222543.
	2015-04-28  Sandra Loosemore  <sandra@codesourcery.com>

	* doc/extend.texi (Declaring Attributes of Functions): Split into
	subsections by target.  Alphabetize the table of common attributes.
	Rewrite some of the introductory text to reflect the new structure.
	Update some cross-references to point to the new subsections.
	(Attribute Syntax): Put paragraph about "__" naming here.  Remove
	duplicate copies in the discussion of function, label, and type
	attributes.

2015-08-21  Yvan Roux  <yvan.roux@linaro.org>

	gcc/ada/
	Backport from trunk r222492.
	2015-04-27  Jim Wilson  <jim.wilson@linaro.org>

	* gcc-interface/Makefile-lan.in (ada.mostlyclean): Remove gnatbind
	and gnat1.

	gcc/cp/
	Backport from trunk r222492.
	2015-04-27  Jim Wilson  <jim.wilson@linaro.org>

	* Make-lang.in (c++.mostlyclean): Remove xg++, g++-cross, and cc1plus.

	gcc/fortran/
	Backport from trunk r222492.
	2015-04-27  Jim Wilson  <jim.wilson@linaro.org>

	* Make-lang.in (fortran.mostlyclean): Remove gfortran and
	gfortran-cross.

	gcc/go/
	Backport from trunk r222492.
	2015-04-27  Jim Wilson  <jim.wilson@linaro.org>

	* Make-lang.in (go.mostlyclean): Remove gccgo, gccgo-cross, and go1.

	gcc/jit/
	Backport from trunk r222492.
	2015-04-27  Jim Wilson  <jim.wilson@linaro.org>

	* Make-lang.in (jit.mostlyclean): Remove shared libraries and object
	files.

	gcc/objc/
	Backport from trunk r222492.
	2015-04-27  Jim Wilson  <jim.wilson@linaro.org>

	* Make-lang.in (objc.mostlyclean): Remove cc1obj.

	gcc/objcp/
	Backport from trunk r222492.
	2015-04-27  Jim Wilson  <jim.wilson@linaro.org>

	* Make-lang.in (obj-c++.mostlyclean): Remove cc1objplus.

2015-08-21  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r222453.
	2015-04-27  Yvan Roux  <yvan.roux@linaro.org>

	* config/arm/arm.md (*arm_subsi3_insn): Fixed redundant
	alternatives.

2015-08-21  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r222416.
	2015-04-24  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config/arm/iterators.md (shiftable_ops): Rename to...
	(SHIFTABLE_OPS): ... This.  Update use in comments.
	(ior_xor): Rename to...
	(IOR_XOR): ... This.
	(vqh_ops): Rename to...
	(VQH_OPS): ... This.
	(vqhs_ops): Rename to...
	(VQHS_OPS): ... This.
	(rshifts): Rename to...
	(RSHIFTS): ... This.
	(returns): Rename to...
	(RETURNS): ... This.
	* config/arm/arm.md: Update uses of the above.
	* config/arm/neon.md: Likewise.

2015-08-21  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r222415.
	2014-04-24  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config.host (case ${host}): Add aarch64*-*-linux case.
	* config/aarch64/aarch64-cores.def: Add IMPLEMENTER_ID and PART_NUMBER
	fields to all the cores.
	* config/aarch64/aarch64-elf.h (DRIVER_SELF_SPECS):
	Add MCPU_MTUNE_NATIVE_SPECS.
	* config/aarch64/aarch64-option-extensions.def: Add FEATURE_STRING
	field to all extensions.
	* config/aarch64/aarch64-opts.h: Adjust definition of AARCH64_CORE.
	* config/aarch64/aarch64.c: Adjust definition of AARCH64_CORE.
	Adjust definition of AARCH64_OPT_EXTENSION.
	* config/aarch64/aarch64.h: Adjust definition of AARCH64_CORE.
	(MCPU_MTUNE_NATIVE_SPECS): Define.
	* config/aarch64/driver-aarch64.c: New file.
	* config/aarch64/x-arch64: New file.
	* doc/invoke.texi (AArch64 Options): Document native value for -mcpu,
	-mtune and -march.

2015-08-21  Yvan Roux  <yvan.roux@linaro.org>

	gcc/
	Backport from trunk r222371.
	2015-04-23  Kwok Cheung Yeung  <kcy@codesourcery.com>

	PR target/26702
	* config/arm/unknown-elf.h (ASM_OUTPUT_ALIGNED_DECL_LOCAL):
	Emit size of local.

	gcc/testsuite/
	Backport from trunk r222371.
	2015-04-23  Kyok Cheung Yeung  <kck@codesourcery.com>

	PR target/26702
	* gcc.target/arm/pr26702.c: New test.

	gcc/
	Backport from trunk r222401.
	2015-04-24  Thomas Preud'homme  <thomas.preudhomme@arm.com>

	* config/arm/unknown-elf.h (ASM_OUTPUT_ALIGNED_DECL_LOCAL): fix
	ternary operator in fprintf and harmonize spacing.

	gcc/testsuite/
	Backport from trunk r223473.
	2015-05-21  Ramana Radhakrishnan  <ramana.radhakrishnan@arm.com>

	PR target/65937
	* gcc.target/arm/pr26702.c: Adjust target selector.

2015-07-22  Ryan S. Arnold  <ryan.arnold@linaro.org>

	gcc/
	* LINARO-VERSION: Bump version number, post snapshot.

2015-06-23  Christophe Lyon  <christophe.lyon@linaro.org>

	* LINARO-VERSION: Bump version number, post release.

2015-06-19  Christophe Lyon  <christophe.lyon@linaro.org>

	Make Linaro GCC Snapshot 5.1-2015.06.

2015-06-19  Christophe Lyon  <christophe.lyon@linaro.org>

	gcc/
	* configure.ac: Add Linaro version string.
	* configure: Regenerate.

2015-06-18  Christophe Lyon  <christophe.lyon@linaro.org>

	Cherry-pick from linaro/gcc-4_9-branch r217544.

	gcc/
	2014-11-14  Yvan Roux  <yvan.roux@linaro.org>

	Add Linaro release macros (Linaro only patch.)

	* Makefile.in (LINAROVER, LINAROVER_C, LINAROVER_S): Define.
	(CFLAGS-cppbuiltin.o): Add LINAROVER macro definition.
	(cppbuiltin.o): Depend on $(LINAROVER).
	* cppbuiltin.c (parse_linarover): New.
	(define_GNUC__): Define __LINARO_RELEASE__ and __LINARO_SPIN__ macros.

2015-06-13  Christophe Lyon  <christophe.lyon@linaro.org>

	Merge branches/gcc-5-branch rev 224205.

2015-06-12  Christophe Lyon  <christophe.lyon@linaro.org>

	gcc/
	Backport from trunk r222263.
	2015-04-21  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config/aarch64/aarch64.md (*<NLOGICAL:optab>_one_cmplsidi3_ze):
	New pattern.
	(*xor_one_cmplsidi3_ze): Likewise.

2015-06-12  Christophe Lyon  <christophe.lyon@linaro.org>

	gcc/
	Backport from trunk r222229.
	2015-04-20  Alan Lawrence  <alan.lawrence@arm.com>

	PR target/64134
	* config/aarch64/aarch64.c (aarch64_expand_vector_init): Load constant
	and overwrite variable parts if <= 1/2 the elements are variable.

	gcc/testsuite/
	Backport from trunk r222229.
	2015-04-20  Alan Lawrence  <alan.lawrence@arm.com>

	PR target/64134
	* gcc.target/aarch64/vec_init_1.c: New test.

2015-06-12  Christophe Lyon  <christophe.lyon@linaro.org>

	gcc/
	Backport from trunk r222186.
	2015-04-17  Jakub Jelinek  <jakub@redhat.com>

	PR target/65689
	* genpreds.c (struct constraint_data): Add maybe_allows_reg and
	maybe_allows_mem bitfields.
	(maybe_allows_none_start, maybe_allows_none_end,
	maybe_allows_reg_start, maybe_allows_reg_end, maybe_allows_mem_start,
	maybe_allows_mem_end): New variables.
	(compute_maybe_allows): New function.
	(add_constraint): Use it to initialize maybe_allows_reg and
	maybe_allows_mem fields.
	(choose_enum_order): Sort the non-is_register/is_const_int/is_memory/
	is_address constraints such that those that allow neither mem nor
	reg come first, then those that only allow reg but not mem, then
	those that only allow mem but not reg, then the rest.
	(write_allows_reg_mem_function): New function.
	(write_tm_preds_h): Call it.
	* stmt.c (parse_output_constraint, parse_input_constraint): Use
	the generated insn_extra_constraint_allows_reg_mem function
	instead of always setting *allows_reg = true; *allows_mem = true;
	for unknown extra constraints.

	gcc/testsuite/
	Backport from trunk r222186.
	2015-04-17  Jakub Jelinek  <jakub@redhat.com>

	PR target/65689
	* gcc.target/aarch64/c-output-template-4.c: New test.

2015-06-12  Christophe Lyon  <christophe.lyon@linaro.org>

	gcc/
	Backport from trunk r222143.
	2015-04-16  Renlin Li  <renlin.li@arm.com>

	* simplify-rtx.c (simplify_unary_operation_1): Fix a typo. Enable two
	simplifications for UNSIGNED_FLOAT.

	gcc/testsuite/
	Backport from trunk r222143.
	2015-04-16  Renlin Li  <renlin.li@arm.com>

	* gcc.target/aarch64/unsigned-unsignedfloat.c: New.
	* gcc.target/arm/unsigned-float.c: New.

2015-06-11  Christophe Lyon  <christophe.lyon@linaro.org>

	gcc/testsuite/
	Backport from trunk r222396.
	2015-04-24  Bin Cheng  <bin.cheng@arm.com>

	* gcc.target/arm/pr42172-1.c: Check str instead of ldr.

2015-06-11  Christophe Lyon  <christophe.lyon@linaro.org>

	gcc/
	Backport from trunk r222359.
	2015-04-23  Matthew Wahab  <matthew.wahab@arm.com>

	* config/arm/arm.h (LEGITIMIZE_RELOAD_ADDRESS): Remove.
	(ARM_LEGITIMIZE_RELOAD_ADDRESS): Remove.
	(THUMB_LEGITIMIZE_RELOAD_ADDRESS): Remove.
	* config/arm/arm.c (arm_legimitimize_reload_address): Remove.
	(thumb_legimitimize_reload_address): Remove.
	* config/arm/arm-protos.h (arm_legimitimize_reload_address):
	Remove.
	(thumb_legimitimize_reload_address): Remove.

2015-06-11  Christophe Lyon  <christophe.lyon@linaro.org>

	gcc/
	Backport from trunk r222357.
	* config/arm/arm.md (load_multiple): Reject operand 2 greater than
	MAX_LDM_STM_OPS.
	(store_multiple): Likewise.

	2015-04-23  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

2015-06-11  Christophe Lyon  <christophe.lyon@linaro.org>

	gcc/
	Backport from trunk r222356.
	2015-04-23  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config/arm/arm-protos.h (struct tune_params): Add issue_rate field.
	* config/arm/arm.c (arm_slowmul_tune, arm_fastmul_tune,
	arm_strongarm_tune, arm_xscale_tune, arm_9e_tune, arm_v6t2_tune,
	arm_cortex_tune, arm_cortex_a8_tune, arm_cortex_a7_tune,
	arm_cortex_a15_tune, arm_cortex_a53_tune, arm_cortex_a57_tune,
	arm_cortex_a9_tune, arm_cortex_a12_tune, arm_v7m_tune, arm_v6m_tune,
	arm_fa726te_tune arm_cortex_a5_tune, arm_xgene1_tune):
	Specify issue_rate value.
	(arm_issue_rate): Look up issue rate from tuning structs. Remove
	large switch statement.
	(arm_marvell_pj4_tune): New struct.
	* config/arm/arm-cores.def (marvell-pj4): Use arm_marvell_pj4_tune
	struct.

2015-06-11  Christophe Lyon  <christophe.lyon@linaro.org>

	gcc/
	Backport from trunk r222350.
	2015-04-23  Kugan Vivekanandarajah  <kuganv@linaro.org>

	* ira-costs.c (record_operand_costs): Fix typo (remove redundant code).

2015-06-11  Christophe Lyon  <christophe.lyon@linaro.org>

	libstdc++/
	Backport from trunk r222324.
	2015-04-22  Renlin Li  <renlin.li@arm.com>

	* testsuite/lib/dg-options.exp (dg-require-thread-fence): New.
	* testsuite/lib/libstdc++.exp (check_v3_target_thread_fence): New.
	* testsuite/29_atomics/atomic_flag/clear/1.cc: Use it.
	* testsuite/29_atomics/atomic_flag/test_and_set/explicit.cc: Likewise.
	* testsuite/29_atomics/atomic_flag/test_and_set/implicit.cc: Likewise.

2015-06-11  Christophe Lyon  <christophe.lyon@linaro.org>

	gcc/
	Backport from trunk r222260.
	2015-04-21  Thomas Preud'homme  <thomas.preudhomme@arm.com>

	* df-core.c (df_finish_pass): Iterate over df->problems_by_index[] and
	use df_remove_problem rather than manually removing problems, leaving
	holes in df->problems_in_order[].

2015-06-11  Christophe Lyon  <christophe.lyon@linaro.org>

	gcc/
	Backport from trunk r222258.
	2015-04-21  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* common/config/aarch64/aarch64-common.c (AARCH64_CPU_NAME_LENGTH):
	Increase to 128.
	(aarch64_rewrite_selected_cpu): Do not chop off extensions starting
	at '.'.  Assert that there's enough space for everything.

2015-06-11  Christophe Lyon  <christophe.lyon@linaro.org>

	gcc/
	Backport from trunk r222234.
	2015-04-20  Alan Lawrence  <alan.lawrence@arm.com>

	* config/aarch64/aarch64.c (aarch64_simd_emit_pair_result_insn): Delete.
	* config/aarch64/aarch64-protos.h (aarch64_simd_emit_pair_result_insn):
	Delete.

2015-06-11  Christophe Lyon  <christophe.lyon@linaro.org>

	gcc/
	Backport from trunk r222177.
	2015-04-17  Alan Lawrence  <alan.lawrence@arm.com>

	* config/aarch64/arm_neon.h (vdup_n_f32): Remove forward declaration.

2015-06-11  Christophe Lyon  <christophe.lyon@linaro.org>

	gcc/testsuite/
	Backport from trunk r222148.
	2015-04-16  Alan Lawrence  <alan.lawrence@arm.com>

	* gcc.target/aarch64/vldN_lane_1.c: Correct dup->lane in comments.

2015-06-11  Christophe Lyon  <christophe.lyon@linaro.org>

	gcc/
	Backport from trunk r222120.
	2015-04-14  Matthew Wahab  <matthew.wahab@arm.com>

	* doc/extend.texi (__sync Builtins): Simplify some text.  Update
	details about the implementation.  Make clear preference for
	__atomic builtins.  Reduce possibility of future change.

2015-06-11  Christophe Lyon  <christophe.lyon@linaro.org>

	gcc/
	Backport from trunk r222101.
	2015-04-14  Yvan Roux  <yvan.roux@linaro.org>

	PR target/65729
	* lra-constraints.c (prohibited_class_reg_set_mode_p): Restore and fix
	the assertiion.

	gcc/testsuite/
	Backport from trunk r222101.
	2015-04-14  Yvan Roux  <yvan.roux@linaro.org>

	PR target/65729
	* gcc.target/arm/pr65729.c: New test.

	Backport from trunk r222228.
	2015-04-20  Yvan Roux  <yvan.roux@linaro.org>

	* gcc.target/arm/pr65729.c: Restrict to hard float ABI compliant
	targets.

2015-06-11  Christophe Lyon  <christophe.lyon@linaro.org>

	gcc/testsuite/
	Backport from trunk r224312.
	2015-06-10  James Greenhalgh  <james.greenhalgh@arm.com>

	* gcc.target/arm/pr65710.c: Do not override -mfloat-abi directives
	passed by the testsuite driver.

	Backport from trunk r222393.
	2015-04-24  Terry Guo  <terry.guo@arm.com>

	* gcc.target/arm/pr65710.c: Update the options.

	Backport from trunk r222037.
	2015-04-13  Terry Guo  <terry.guo@arm.com>

	PR target/65710
	* gcc.target/arm/pr65710.c: New.

2015-06-11  Christophe Lyon  <christophe.lyon@linaro.org>

	gcc/
	Backport from trunk r222379.
	2015-04-23  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* config/arm/iterators.md (GTGE, GTUGEU, COMPARISONS): New code
	iterators.
	(cmp_op, cmp_type): New code attributes.
	(NEON_VCMP, NEON_VACMP): New int iterators.
	(cmp_op_unsp): New int attribute.
	* config/arm/neon.md (neon_vc<cmp_op><mode>): New define_expand.
	(neon_vceq<mode>): Delete.
	(neon_vc<cmp_op><mode>_insn): New pattern.
	(neon_vc<cmp_op_unsp><mode>_insn_unspec): Likewise.
	(neon_vcgeu<mode>): Delete.
	(neon_vcle<mode>): Likewise.
	(neon_vclt<mode>: Likewise.
	(neon_vcage<mode>): Likewise.
	(neon_vcagt<mode>): Likewise.
	(neon_vca<cmp_op><mode>): New define_expand.
	(neon_vca<cmp_op><mode>_insn): New pattern.
	(neon_vca<cmp_op_unsp><mode>_insn_unspec): Likewise.

	gcc/testsuite/
	Backport from trunk r222379.
	2015-04-23  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>

	* gcc.target/arm/neon/pr51534.c: Update vcg* scan-assembly patterns
	to look for vcl* where appropriate.

2015-06-11  Christophe Lyon  <christophe.lyon@linaro.org>

	gcc/
	Backport from trunk r222092.
	2015-04-14  Alan Lawrence  <alan.lawrence@arm.com>

	* config/aarch64/arm_neon.h (vst1_lane_f32, vst1_lane_f64,
	vst1_lane_p8, vst1_lane_p16, vst1_lane_s8, vst1_lane_s16,
	vst1_lane_s32, vst1_lane_s64, vst1_lane_u8, vst1_lane_u16,
	vst1_lane_u32, vst1_lane_u64, vst1q_lane_f32, vst1q_lane_f64,
	vst1q_lane_p8, vst1q_lane_p16, vst1q_lane_s8, vst1q_lane_s16,
	vst1q_lane_s32, vst1q_lane_s64, vst1q_lane_u8, vst1q_lane_u16,
	vst1q_lane_u32, vst1q_lane_u64): Reimplement with pointer dereference
	and __aarch64_vget_lane_any.

2015-06-11  Christophe Lyon  <christophe.lyon@linaro.org>

	Backport from trunk r222306.
	gcc/
	2015-04-22  Hale Wang  <hale.wang@arm.com>
	    Terry Guo  <terry.guo@arm.com>

	PR rtl-optimization/64818
	* combine.c (can_combine_p): Don't combine user-specified
	register if it is in an asm input.

	gcc/testsuite/
	2015-04-22  Hale Wang  <hale.wang@arm.com>
	    Terry Guo  <terry.guo@arm.com>

	PR rtl-optimization/64818
	* gcc.target/arm/pr64818.c: New test.

2015-06-11  Yvan Roux  <yvan.roux@linaro.org>

	gcc/testsuite/
	Backport from trunk r222083.
	2015-04-14  Yvan Roux  <yvan.roux@linaro.org>

	PR target/65648
	* gcc.c-torture/execute/pr65648.c: New test.

2015-04-30  Maxim Kuvyrkov  <maxim.kuvyrkov@linaro.org>

	Add .gitreview file pointing to Linaro's gerrit server

	* .gitreview: New file.
